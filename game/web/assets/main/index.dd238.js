window.__require=function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var u="function"==typeof __require&&__require;if(!r&&u)return u(l,!0);if(s)return s(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){return o(e[a][1][t]||t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){"use strict";i.byteLength=function(t){var e=u(t),i=e[0],n=e[1];return 3*(i+n)/4-n},i.toByteArray=function(t){var e,i,n=u(t),a=n[0],r=n[1],l=new s(c(0,a,r)),h=0,d=r>0?a-4:a;for(i=0;i<d;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===r&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,l[h++]=255&e),1===r&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l},i.fromByteArray=function(t){for(var e,i=t.length,o=i%3,s=[],a=0,r=i-o;a<r;a+=16383)s.push(h(t,a,a+16383>r?r:a+16383));return 1===o?(e=t[i-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[i-2]<<8)+t[i-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),s.join("")};for(var n=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,l=a.length;r<l;++r)n[r]=a[r],o[a.charCodeAt(r)]=r;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function c(t,e,i){return 3*(e+i)/4-i}function h(t,e,i){for(var o,s,a=[],r=e;r<i;r+=3)o=(t[r]<<16&16711680)+(t[r+1]<<8&65280)+(255&t[r+2]),a.push(n[(s=o)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(t,e){"use strict";const{Deflate:i,deflate:n,deflateRaw:o,gzip:s}=t("./lib/deflate"),{Inflate:a,inflate:r,inflateRaw:l,ungzip:u}=t("./lib/inflate"),c=t("./lib/zlib/constants");e.exports.Deflate=i,e.exports.deflate=n,e.exports.deflateRaw=o,e.exports.gzip=s,e.exports.Inflate=a,e.exports.inflate=r,e.exports.inflateRaw=l,e.exports.ungzip=u,e.exports.constants=c},{"./lib/deflate":3,"./lib/inflate":4,"./lib/zlib/constants":8}],3:[function(t,e){"use strict";const i=t("./zlib/deflate"),n=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),r=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:c,Z_FINISH:h,Z_OK:d,Z_STREAM_END:f,Z_DEFAULT_COMPRESSION:m,Z_DEFAULT_STRATEGY:p,Z_DEFLATED:_}=t("./zlib/constants");function g(t){this.options=n.assign({level:m,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:p},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let l=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(l!==d)throw new Error(s[l]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===r.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(l=i.deflateSetDictionary(this.strm,t))!==d)throw new Error(s[l]);this._dict_set=!0}}function y(t,e){const i=new g(e);if(i.push(t,!0),i.err)throw i.msg||s[i.err];return i.result}g.prototype.push=function(t,e){const n=this.strm,s=this.options.chunkSize;let a,m;if(this.ended)return!1;for(m=e===~~e?e:!0===e?h:l,"string"==typeof t?n.input=o.string2buf(t):"[object ArrayBuffer]"===r.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(s),n.next_out=0,n.avail_out=s),(m===u||m===c)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if((a=i.deflate(n,m))===f)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),a=i.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===d;if(0!==n.avail_out){if(m>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},g.prototype.onData=function(t){this.chunks.push(t)},g.prototype.onEnd=function(t){t===d&&(this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.exports.Deflate=g,e.exports.deflate=y,e.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,y(t,e)},e.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,y(t,e)},e.exports.constants=t("./zlib/constants")},{"./utils/common":5,"./utils/strings":6,"./zlib/constants":8,"./zlib/deflate":10,"./zlib/messages":15,"./zlib/zstream":17}],4:[function(t,e){"use strict";const i=t("./zlib/inflate"),n=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),r=t("./zlib/gzheader"),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:c,Z_OK:h,Z_STREAM_END:d,Z_NEED_DICT:f,Z_STREAM_ERROR:m,Z_DATA_ERROR:p,Z_MEM_ERROR:_}=t("./zlib/constants");function g(t){this.options=n.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let u=i.inflateInit2(this.strm,e.windowBits);if(u!==h)throw new Error(s[u]);if(this.header=new r,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(u=i.inflateSetDictionary(this.strm,e.dictionary))!==h))throw new Error(s[u])}function y(t,e){const i=new g(e);if(i.push(t),i.err)throw i.msg||s[i.err];return i.result}g.prototype.push=function(t,e){const n=this.strm,s=this.options.chunkSize,a=this.options.dictionary;let r,g,y;if(this.ended)return!1;for(g=e===~~e?e:!0===e?c:u,"[object ArrayBuffer]"===l.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(s),n.next_out=0,n.avail_out=s),(r=i.inflate(n,g))===f&&a&&((r=i.inflateSetDictionary(n,a))===h?r=i.inflate(n,g):r===p&&(r=f));n.avail_in>0&&r===d&&n.state.wrap>0&&0!==t[n.next_in];)i.inflateReset(n),r=i.inflate(n,g);switch(r){case m:case p:case f:case _:return this.onEnd(r),this.ended=!0,!1}if(y=n.avail_out,n.next_out&&(0===n.avail_out||r===d))if("string"===this.options.to){let t=o.utf8border(n.output,n.next_out),e=n.next_out-t,i=o.buf2string(n.output,t);n.next_out=e,n.avail_out=s-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(r!==h||0!==y){if(r===d)return r=i.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},g.prototype.onData=function(t){this.chunks.push(t)},g.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.exports.Inflate=g,e.exports.inflate=y,e.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,y(t,e)},e.exports.ungzip=y,e.exports.constants=t("./zlib/constants")},{"./utils/common":5,"./utils/strings":6,"./zlib/constants":8,"./zlib/gzheader":11,"./zlib/inflate":13,"./zlib/messages":15,"./zlib/zstream":17}],5:[function(t,e){"use strict";const i=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);e.exports.assign=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const e in n)i(n,e)&&(t[e]=n[e])}}return t},e.exports.flattenChunks=t=>{let e=0;for(let n=0,o=t.length;n<o;n++)e+=t[n].length;const i=new Uint8Array(e);for(let n=0,o=0,s=t.length;n<s;n++){let e=t[n];i.set(e,o),o+=e.length}return i}},{}],6:[function(t,e){"use strict";let i=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){i=!1}const n=new Uint8Array(256);for(let a=0;a<256;a++)n[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;n[254]=n[254]=1,e.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,i,n,o,s,a=t.length,r=0;for(o=0;o<a;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),r+=i<128?1:i<2048?2:i<65536?3:4;for(e=new Uint8Array(r),s=0,o=0;s<r;o++)55296==(64512&(i=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(n=t.charCodeAt(o+1)))&&(i=65536+(i-55296<<10)+(n-56320),o++),i<128?e[s++]=i:i<2048?(e[s++]=192|i>>>6,e[s++]=128|63&i):i<65536?(e[s++]=224|i>>>12,e[s++]=128|i>>>6&63,e[s++]=128|63&i):(e[s++]=240|i>>>18,e[s++]=128|i>>>12&63,e[s++]=128|i>>>6&63,e[s++]=128|63&i);return e};const o=(t,e)=>{if(e<65534&&t.subarray&&i)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n};e.exports.buf2string=(t,e)=>{const i=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let s,a;const r=new Array(2*i);for(a=0,s=0;s<i;){let e=t[s++];if(e<128){r[a++]=e;continue}let o=n[e];if(o>4)r[a++]=65533,s+=o-1;else{for(e&=2===o?31:3===o?15:7;o>1&&s<i;)e=e<<6|63&t[s++],o--;o>1?r[a++]=65533:e<65536?r[a++]=e:(e-=65536,r[a++]=55296|e>>10&1023,r[a++]=56320|1023&e)}}return o(r,a)},e.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+n[t[i]]>e?i:e}},{}],7:[function(t,e){"use strict";e.exports=(t,e,i,n)=>{let o=65535&t|0,s=t>>>16&65535|0,a=0;for(;0!==i;){i-=a=i>2e3?2e3:i;do{s=s+(o=o+e[n++]|0)|0}while(--a);o%=65521,s%=65521}return o|s<<16|0}},{}],8:[function(t,e){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],9:[function(t,e){"use strict";const i=new Uint32Array((()=>{let t,e=[];for(var i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e})());e.exports=(t,e,n,o)=>{const s=i,a=o+n;t^=-1;for(let i=o;i<a;i++)t=t>>>8^s[255&(t^e[i])];return-1^t}},{}],10:[function(t,e){"use strict";const{_tr_init:i,_tr_stored_block:n,_tr_flush_block:o,_tr_tally:s,_tr_align:a}=t("./trees"),r=t("./adler32"),l=t("./crc32"),u=t("./messages"),{Z_NO_FLUSH:c,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:d,Z_FINISH:f,Z_BLOCK:m,Z_OK:p,Z_STREAM_END:_,Z_STREAM_ERROR:g,Z_DATA_ERROR:y,Z_BUF_ERROR:C,Z_DEFAULT_COMPRESSION:b,Z_FILTERED:v,Z_HUFFMAN_ONLY:w,Z_RLE:S,Z_FIXED:k,Z_DEFAULT_STRATEGY:I,Z_UNKNOWN:R,Z_DEFLATED:L}=t("./constants"),G=286,B=30,x=19,P=2*G+1,T=15,U=(t,e)=>(t.msg=u[e],e),A=t=>2*t-(t>4?9:0),E=t=>{let e=t.length;for(;--e>=0;)t[e]=0},O=t=>{let e,i,n,o=t.w_size;n=e=t.hash_size;do{i=t.head[--n],t.head[n]=i>=o?i-o:0}while(--e);n=e=o;do{i=t.prev[--n],t.prev[n]=i>=o?i-o:0}while(--e)};let M=(t,e,i)=>(e<<t.hash_shift^i)&t.hash_mask;const F=t=>{const e=t.state;let i=e.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+i),t.next_out),t.next_out+=i,e.pending_out+=i,t.total_out+=i,t.avail_out-=i,e.pending-=i,0===e.pending&&(e.pending_out=0))},j=(t,e)=>{o(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,F(t.strm)},V=(t,e)=>{t.pending_buf[t.pending++]=e},D=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},N=(t,e,i,n)=>{let o=t.avail_in;return o>n&&(o=n),0===o?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),i),1===t.state.wrap?t.adler=r(t.adler,e,o,i):2===t.state.wrap&&(t.adler=l(t.adler,e,o,i)),t.next_in+=o,t.total_in+=o,o)},W=(t,e)=>{let i,n,o=t.max_chain_length,s=t.strstart,a=t.prev_length,r=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,u=t.window,c=t.w_mask,h=t.prev,d=t.strstart+258;let f=u[s+a-1],m=u[s+a];t.prev_length>=t.good_match&&(o>>=2),r>t.lookahead&&(r=t.lookahead);do{if(u[(i=e)+a]===m&&u[i+a-1]===f&&u[i]===u[s]&&u[++i]===u[s+1]){s+=2,i++;do{}while(u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&u[++s]===u[++i]&&s<d);if(n=258-(d-s),s=d-258,n>a){if(t.match_start=e,a=n,n>=r)break;f=u[s+a-1],m=u[s+a]}}}while((e=h[e&c])>l&&0!=--o);return a<=t.lookahead?a:t.lookahead},H=t=>{const e=t.w_size;let i,n,o;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-n),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),O(t),n+=e),0===t.strm.avail_in)break;if(i=N(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=i,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=M(t,t.ins_h,t.window[o+1]);t.insert&&(t.ins_h=M(t,t.ins_h,t.window[o+3-1]),t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},z=(t,e)=>{let i,o,s,a=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,l=t.strm.avail_in;do{if(i=65535,s=t.bi_valid+42>>3,t.strm.avail_out<s)break;if(s=t.strm.avail_out-s,i>(o=t.strstart-t.block_start)+t.strm.avail_in&&(i=o+t.strm.avail_in),i>s&&(i=s),i<a&&(0===i&&e!==f||e===c||i!==o+t.strm.avail_in))break;r=e===f&&i===o+t.strm.avail_in?1:0,n(t,0,0,r),t.pending_buf[t.pending-4]=i,t.pending_buf[t.pending-3]=i>>8,t.pending_buf[t.pending-2]=~i,t.pending_buf[t.pending-1]=~i>>8,F(t.strm),o&&(o>i&&(o=i),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+o),t.strm.next_out),t.strm.next_out+=o,t.strm.avail_out-=o,t.strm.total_out+=o,t.block_start+=o,i-=o),i&&(N(t.strm,t.strm.output,t.strm.next_out,i),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i)}while(0===r);return(l-=t.strm.avail_in)&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==c&&e!==f&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(s=t.window_size-t.strstart,t.strm.avail_in>s&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,s+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),s>t.strm.avail_in&&(s=t.strm.avail_in),s&&(N(t.strm,t.window,t.strstart,s),t.strstart+=s,t.insert+=s>t.w_size-t.insert?t.w_size-t.insert:s),t.high_water<t.strstart&&(t.high_water=t.strstart),s=t.bi_valid+42>>3,a=(s=t.pending_buf_size-s>65535?65535:t.pending_buf_size-s)>t.w_size?t.w_size:s,((o=t.strstart-t.block_start)>=a||(o||e===f)&&e!==c&&0===t.strm.avail_in&&o<=s)&&(i=o>s?s:o,r=e===f&&0===t.strm.avail_in&&i===o?1:0,n(t,t.block_start,i,r),t.block_start+=i,F(t.strm)),r?3:1)},q=(t,e)=>{let i,n;for(;;){if(t.lookahead<262){if(H(t),t.lookahead<262&&e===c)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-262&&(t.match_length=W(t,i)),t.match_length>=3)if(n=s(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=M(t,t.ins_h,t.window[t.strstart+1]);else n=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(j(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===f?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2},K=(t,e)=>{let i,n,o;for(;;){if(t.lookahead<262){if(H(t),t.lookahead<262&&e===c)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-262&&(t.match_length=W(t,i),t.match_length<=5&&(t.strategy===v||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-3,n=s(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=o&&(t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(j(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=s(t,0,t.window[t.strstart-1]))&&j(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=s(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===f?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2},Z=(t,e)=>{let i,n,o,a;const r=t.window;for(;;){if(t.lookahead<=258){if(H(t),t.lookahead<=258&&e===c)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=r[o=t.strstart-1])===r[++o]&&n===r[++o]&&n===r[++o]){a=t.strstart+258;do{}while(n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&n===r[++o]&&o<a);t.match_length=258-(a-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=s(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(j(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===f?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2},J=(t,e)=>{let i;for(;;){if(0===t.lookahead&&(H(t),0===t.lookahead)){if(e===c)return 1;break}if(t.match_length=0,i=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(j(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===f?(j(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(j(t,!1),0===t.strm.avail_out)?1:2};function Y(t,e,i,n,o){this.good_length=t,this.max_lazy=e,this.nice_length=i,this.max_chain=n,this.func=o}const Q=[new Y(0,0,0,0,z),new Y(4,4,8,4,q),new Y(4,5,16,8,q),new Y(4,6,32,32,q),new Y(4,4,16,16,K),new Y(8,16,32,32,K),new Y(8,16,128,128,K),new Y(8,32,128,256,K),new Y(32,128,258,1024,K),new Y(32,258,258,4096,K)],X=t=>{t.window_size=2*t.w_size,E(t.head),t.max_lazy_match=Q[t.level].max_lazy,t.good_match=Q[t.level].good_length,t.nice_match=Q[t.level].nice_length,t.max_chain_length=Q[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0};function $(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=L,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*P),this.dyn_dtree=new Uint16Array(2*(2*B+1)),this.bl_tree=new Uint16Array(2*(2*x+1)),E(this.dyn_ltree),E(this.dyn_dtree),E(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(T+1),this.heap=new Uint16Array(2*G+1),E(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*G+1),E(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const tt=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},et=t=>{if(tt(t))return U(t,g);t.total_in=t.total_out=0,t.data_type=R;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,i(e),p},it=t=>{const e=et(t);return e===p&&X(t.state),e},nt=(t,e,i,n,o,s)=>{if(!t)return g;let a=1;if(e===b&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),o<1||o>9||i!==L||n<8||n>15||e<0||e>9||s<0||s>k||8===n&&1!==a)return U(t,g);8===n&&(n=9);const r=new $;return t.state=r,r.strm=t,r.status=42,r.wrap=a,r.gzhead=null,r.w_bits=n,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=o+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+3-1)/3),r.window=new Uint8Array(2*r.w_size),r.head=new Uint16Array(r.hash_size),r.prev=new Uint16Array(r.w_size),r.lit_bufsize=1<<o+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new Uint8Array(r.pending_buf_size),r.sym_buf=r.lit_bufsize,r.sym_end=3*(r.lit_bufsize-1),r.level=e,r.strategy=s,r.method=i,it(t)};e.exports.deflateInit=(t,e)=>nt(t,e,L,15,8,I),e.exports.deflateInit2=nt,e.exports.deflateReset=it,e.exports.deflateResetKeep=et,e.exports.deflateSetHeader=(t,e)=>tt(t)||2!==t.state.wrap?g:(t.state.gzhead=e,p),e.exports.deflate=(t,e)=>{if(tt(t)||e>m||e<0)return t?U(t,g):g;const i=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===i.status&&e!==f)return U(t,0===t.avail_out?C:g);const o=i.last_flush;if(i.last_flush=e,0!==i.pending){if(F(t),0===t.avail_out)return i.last_flush=-1,p}else if(0===t.avail_in&&A(e)<=A(o)&&e!==f)return U(t,C);if(666===i.status&&0!==t.avail_in)return U(t,C);if(42===i.status&&0===i.wrap&&(i.status=113),42===i.status){let e=L+(i.w_bits-8<<4)<<8,n=-1;if(e|=(n=i.strategy>=w||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(e|=32),D(i,e+=31-e%31),0!==i.strstart&&(D(i,t.adler>>>16),D(i,65535&t.adler)),t.adler=1,i.status=113,F(t),0!==i.pending)return i.last_flush=-1,p}if(57===i.status)if(t.adler=0,V(i,31),V(i,139),V(i,8),i.gzhead)V(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),V(i,255&i.gzhead.time),V(i,i.gzhead.time>>8&255),V(i,i.gzhead.time>>16&255),V(i,i.gzhead.time>>24&255),V(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),V(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(V(i,255&i.gzhead.extra.length),V(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=l(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(V(i,0),V(i,0),V(i,0),V(i,0),V(i,0),V(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),V(i,3),i.status=113,F(t),0!==i.pending)return i.last_flush=-1,p;if(69===i.status){if(i.gzhead.extra){let e=i.pending,n=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+n>i.pending_buf_size;){let o=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+o),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>e&&(t.adler=l(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex+=o,F(t),0!==i.pending)return i.last_flush=-1,p;e=0,n-=o}let o=new Uint8Array(i.gzhead.extra);i.pending_buf.set(o.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending+=n,i.gzhead.hcrc&&i.pending>e&&(t.adler=l(t.adler,i.pending_buf,i.pending-e,e)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=l(t.adler,i.pending_buf,i.pending-n,n)),F(t),0!==i.pending)return i.last_flush=-1,p;n=0}e=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,V(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=l(t.adler,i.pending_buf,i.pending-n,n)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let e,n=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>n&&(t.adler=l(t.adler,i.pending_buf,i.pending-n,n)),F(t),0!==i.pending)return i.last_flush=-1,p;n=0}e=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,V(i,e)}while(0!==e);i.gzhead.hcrc&&i.pending>n&&(t.adler=l(t.adler,i.pending_buf,i.pending-n,n))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(F(t),0!==i.pending))return i.last_flush=-1,p;V(i,255&t.adler),V(i,t.adler>>8&255),t.adler=0}if(i.status=113,F(t),0!==i.pending)return i.last_flush=-1,p}if(0!==t.avail_in||0!==i.lookahead||e!==c&&666!==i.status){let o=0===i.level?z(i,e):i.strategy===w?J(i,e):i.strategy===S?Z(i,e):Q[i.level].func(i,e);if(3!==o&&4!==o||(i.status=666),1===o||3===o)return 0===t.avail_out&&(i.last_flush=-1),p;if(2===o&&(e===h?a(i):e!==m&&(n(i,0,0,!1),e===d&&(E(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),F(t),0===t.avail_out))return i.last_flush=-1,p}return e!==f?p:i.wrap<=0?_:(2===i.wrap?(V(i,255&t.adler),V(i,t.adler>>8&255),V(i,t.adler>>16&255),V(i,t.adler>>24&255),V(i,255&t.total_in),V(i,t.total_in>>8&255),V(i,t.total_in>>16&255),V(i,t.total_in>>24&255)):(D(i,t.adler>>>16),D(i,65535&t.adler)),F(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:_)},e.exports.deflateEnd=t=>{if(tt(t))return g;const e=t.state.status;return t.state=null,113===e?U(t,y):p},e.exports.deflateSetDictionary=(t,e)=>{let i=e.length;if(tt(t))return g;const n=t.state,o=n.wrap;if(2===o||1===o&&42!==n.status||n.lookahead)return g;if(1===o&&(t.adler=r(t.adler,e,i,0)),n.wrap=0,i>=n.w_size){0===o&&(E(n.head),n.strstart=0,n.block_start=0,n.insert=0);let t=new Uint8Array(n.w_size);t.set(e.subarray(i-n.w_size,i),0),e=t,i=n.w_size}const s=t.avail_in,a=t.next_in,l=t.input;for(t.avail_in=i,t.next_in=0,t.input=e,H(n);n.lookahead>=3;){let t=n.strstart,e=n.lookahead-2;do{n.ins_h=M(n,n.ins_h,n.window[t+3-1]),n.prev[t&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=t,t++}while(--e);n.strstart=t,n.lookahead=2,H(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=a,t.input=l,t.avail_in=s,n.wrap=o,p},e.exports.deflateInfo="pako deflate (from Nodeca project)"},{"./adler32":7,"./constants":8,"./crc32":9,"./messages":15,"./trees":16}],11:[function(t,e){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],12:[function(t,e){"use strict";e.exports=function(t,e){let i,n,o,s,a,r,l,u,c,h,d,f,m,p,_,g,y,C,b,v,w,S,k,I;const R=t.state;i=t.next_in,k=t.input,n=i+(t.avail_in-5),o=t.next_out,I=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),r=R.dmax,l=R.wsize,u=R.whave,c=R.wnext,h=R.window,d=R.hold,f=R.bits,m=R.lencode,p=R.distcode,_=(1<<R.lenbits)-1,g=(1<<R.distbits)-1;t:do{f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),y=m[d&_];e:for(;;){if(d>>>=C=y>>>24,f-=C,0==(C=y>>>16&255))I[o++]=65535&y;else{if(!(16&C)){if(0==(64&C)){y=m[(65535&y)+(d&(1<<C)-1)];continue e}if(32&C){R.mode=16191;break t}t.msg="invalid literal/length code",R.mode=16209;break t}b=65535&y,(C&=15)&&(f<C&&(d+=k[i++]<<f,f+=8),b+=d&(1<<C)-1,d>>>=C,f-=C),f<15&&(d+=k[i++]<<f,f+=8,d+=k[i++]<<f,f+=8),y=p[d&g];i:for(;;){if(d>>>=C=y>>>24,f-=C,!(16&(C=y>>>16&255))){if(0==(64&C)){y=p[(65535&y)+(d&(1<<C)-1)];continue i}t.msg="invalid distance code",R.mode=16209;break t}if(v=65535&y,f<(C&=15)&&(d+=k[i++]<<f,(f+=8)<C&&(d+=k[i++]<<f,f+=8)),(v+=d&(1<<C)-1)>r){t.msg="invalid distance too far back",R.mode=16209;break t}if(d>>>=C,f-=C,v>(C=o-s)){if((C=v-C)>u&&R.sane){t.msg="invalid distance too far back",R.mode=16209;break t}if(w=0,S=h,0===c){if(w+=l-C,C<b){b-=C;do{I[o++]=h[w++]}while(--C);w=o-v,S=I}}else if(c<C){if(w+=l+c-C,(C-=c)<b){b-=C;do{I[o++]=h[w++]}while(--C);if(w=0,c<b){b-=C=c;do{I[o++]=h[w++]}while(--C);w=o-v,S=I}}}else if(w+=c-C,C<b){b-=C;do{I[o++]=h[w++]}while(--C);w=o-v,S=I}for(;b>2;)I[o++]=S[w++],I[o++]=S[w++],I[o++]=S[w++],b-=3;b&&(I[o++]=S[w++],b>1&&(I[o++]=S[w++]))}else{w=o-v;do{I[o++]=I[w++],I[o++]=I[w++],I[o++]=I[w++],b-=3}while(b>2);b&&(I[o++]=I[w++],b>1&&(I[o++]=I[w++]))}break}}break}}while(i<n&&o<a);i-=b=f>>3,d&=(1<<(f-=b<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<n?n-i+5:5-(i-n),t.avail_out=o<a?a-o+257:257-(o-a),R.hold=d,R.bits=f}},{}],13:[function(t,e){"use strict";const i=t("./adler32"),n=t("./crc32"),o=t("./inffast"),s=t("./inftrees"),{Z_FINISH:a,Z_BLOCK:r,Z_TREES:l,Z_OK:u,Z_STREAM_END:c,Z_NEED_DICT:h,Z_STREAM_ERROR:d,Z_DATA_ERROR:f,Z_MEM_ERROR:m,Z_BUF_ERROR:p,Z_DEFLATED:_}=t("./constants"),g=16209,y=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function C(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const b=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},v=t=>{if(b(t))return d;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,u},w=t=>{if(b(t))return d;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,v(t)},S=(t,e)=>{let i;if(b(t))return d;const n=t.state;return e<0?(i=0,e=-e):(i=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?d:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,w(t))},k=(t,e)=>{if(!t)return d;const i=new C;t.state=i,i.strm=t,i.window=null,i.mode=16180;const n=S(t,e);return n!==u&&(t.state=null),n};let I,R,L=!0;const G=t=>{if(L){I=new Int32Array(512),R=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,I,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,R,0,t.work,{bits:5}),L=!1}t.lencode=I,t.lenbits=9,t.distcode=R,t.distbits=5},B=(t,e,i,n)=>{let o;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(e.subarray(i-s.wsize,i),0),s.wnext=0,s.whave=s.wsize):((o=s.wsize-s.wnext)>n&&(o=n),s.window.set(e.subarray(i-n,i-n+o),s.wnext),(n-=o)?(s.window.set(e.subarray(i-n,i),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0};e.exports.inflateReset=w,e.exports.inflateReset2=S,e.exports.inflateResetKeep=v,e.exports.inflateInit=t=>k(t,15),e.exports.inflateInit2=k,e.exports.inflate=(t,e)=>{let C,v,w,S,k,I,R,L,x,P,T,U,A,E,O,M,F,j,V,D,N,W,H=0;const z=new Uint8Array(4);let q,K;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(b(t)||!t.output||!t.input&&0!==t.avail_in)return d;16191===(C=t.state).mode&&(C.mode=16192),k=t.next_out,w=t.output,R=t.avail_out,S=t.next_in,v=t.input,I=t.avail_in,L=C.hold,x=C.bits,P=I,T=R,W=u;t:for(;;)switch(C.mode){case 16180:if(0===C.wrap){C.mode=16192;break}for(;x<16;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(2&C.wrap&&35615===L){0===C.wbits&&(C.wbits=15),C.check=0,z[0]=255&L,z[1]=L>>>8&255,C.check=n(C.check,z,2,0),L=0,x=0,C.mode=16181;break}if(C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&L)<<8)+(L>>8))%31){t.msg="incorrect header check",C.mode=g;break}if((15&L)!==_){t.msg="unknown compression method",C.mode=g;break}if(x-=4,N=8+(15&(L>>>=4)),0===C.wbits&&(C.wbits=N),N>15||N>C.wbits){t.msg="invalid window size",C.mode=g;break}C.dmax=1<<C.wbits,C.flags=0,t.adler=C.check=1,C.mode=512&L?16189:16191,L=0,x=0;break;case 16181:for(;x<16;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(C.flags=L,(255&C.flags)!==_){t.msg="unknown compression method",C.mode=g;break}if(57344&C.flags){t.msg="unknown header flags set",C.mode=g;break}C.head&&(C.head.text=L>>8&1),512&C.flags&&4&C.wrap&&(z[0]=255&L,z[1]=L>>>8&255,C.check=n(C.check,z,2,0)),L=0,x=0,C.mode=16182;case 16182:for(;x<32;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}C.head&&(C.head.time=L),512&C.flags&&4&C.wrap&&(z[0]=255&L,z[1]=L>>>8&255,z[2]=L>>>16&255,z[3]=L>>>24&255,C.check=n(C.check,z,4,0)),L=0,x=0,C.mode=16183;case 16183:for(;x<16;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}C.head&&(C.head.xflags=255&L,C.head.os=L>>8),512&C.flags&&4&C.wrap&&(z[0]=255&L,z[1]=L>>>8&255,C.check=n(C.check,z,2,0)),L=0,x=0,C.mode=16184;case 16184:if(1024&C.flags){for(;x<16;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}C.length=L,C.head&&(C.head.extra_len=L),512&C.flags&&4&C.wrap&&(z[0]=255&L,z[1]=L>>>8&255,C.check=n(C.check,z,2,0)),L=0,x=0}else C.head&&(C.head.extra=null);C.mode=16185;case 16185:if(1024&C.flags&&((U=C.length)>I&&(U=I),U&&(C.head&&(N=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Uint8Array(C.head.extra_len)),C.head.extra.set(v.subarray(S,S+U),N)),512&C.flags&&4&C.wrap&&(C.check=n(C.check,v,U,S)),I-=U,S+=U,C.length-=U),C.length))break t;C.length=0,C.mode=16186;case 16186:if(2048&C.flags){if(0===I)break t;U=0;do{N=v[S+U++],C.head&&N&&C.length<65536&&(C.head.name+=String.fromCharCode(N))}while(N&&U<I);if(512&C.flags&&4&C.wrap&&(C.check=n(C.check,v,U,S)),I-=U,S+=U,N)break t}else C.head&&(C.head.name=null);C.length=0,C.mode=16187;case 16187:if(4096&C.flags){if(0===I)break t;U=0;do{N=v[S+U++],C.head&&N&&C.length<65536&&(C.head.comment+=String.fromCharCode(N))}while(N&&U<I);if(512&C.flags&&4&C.wrap&&(C.check=n(C.check,v,U,S)),I-=U,S+=U,N)break t}else C.head&&(C.head.comment=null);C.mode=16188;case 16188:if(512&C.flags){for(;x<16;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(4&C.wrap&&L!==(65535&C.check)){t.msg="header crc mismatch",C.mode=g;break}L=0,x=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),t.adler=C.check=0,C.mode=16191;break;case 16189:for(;x<32;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}t.adler=C.check=y(L),L=0,x=0,C.mode=16190;case 16190:if(0===C.havedict)return t.next_out=k,t.avail_out=R,t.next_in=S,t.avail_in=I,C.hold=L,C.bits=x,h;t.adler=C.check=1,C.mode=16191;case 16191:if(e===r||e===l)break t;case 16192:if(C.last){L>>>=7&x,x-=7&x,C.mode=16206;break}for(;x<3;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}switch(C.last=1&L,x-=1,3&(L>>>=1)){case 0:C.mode=16193;break;case 1:if(G(C),C.mode=16199,e===l){L>>>=2,x-=2;break t}break;case 2:C.mode=16196;break;case 3:t.msg="invalid block type",C.mode=g}L>>>=2,x-=2;break;case 16193:for(L>>>=7&x,x-=7&x;x<32;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if((65535&L)!=(L>>>16^65535)){t.msg="invalid stored block lengths",C.mode=g;break}if(C.length=65535&L,L=0,x=0,C.mode=16194,e===l)break t;case 16194:C.mode=16195;case 16195:if(U=C.length){if(U>I&&(U=I),U>R&&(U=R),0===U)break t;w.set(v.subarray(S,S+U),k),I-=U,S+=U,R-=U,k+=U,C.length-=U;break}C.mode=16191;break;case 16196:for(;x<14;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(C.nlen=257+(31&L),L>>>=5,x-=5,C.ndist=1+(31&L),L>>>=5,x-=5,C.ncode=4+(15&L),L>>>=4,x-=4,C.nlen>286||C.ndist>30){t.msg="too many length or distance symbols",C.mode=g;break}C.have=0,C.mode=16197;case 16197:for(;C.have<C.ncode;){for(;x<3;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}C.lens[Z[C.have++]]=7&L,L>>>=3,x-=3}for(;C.have<19;)C.lens[Z[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,q={bits:C.lenbits},W=s(0,C.lens,0,19,C.lencode,0,C.work,q),C.lenbits=q.bits,W){t.msg="invalid code lengths set",C.mode=g;break}C.have=0,C.mode=16198;case 16198:for(;C.have<C.nlen+C.ndist;){for(;M=(H=C.lencode[L&(1<<C.lenbits)-1])>>>16&255,F=65535&H,!((O=H>>>24)<=x);){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(F<16)L>>>=O,x-=O,C.lens[C.have++]=F;else{if(16===F){for(K=O+2;x<K;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(L>>>=O,x-=O,0===C.have){t.msg="invalid bit length repeat",C.mode=g;break}N=C.lens[C.have-1],U=3+(3&L),L>>>=2,x-=2}else if(17===F){for(K=O+3;x<K;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}x-=O,N=0,U=3+(7&(L>>>=O)),L>>>=3,x-=3}else{for(K=O+7;x<K;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}x-=O,N=0,U=11+(127&(L>>>=O)),L>>>=7,x-=7}if(C.have+U>C.nlen+C.ndist){t.msg="invalid bit length repeat",C.mode=g;break}for(;U--;)C.lens[C.have++]=N}}if(C.mode===g)break;if(0===C.lens[256]){t.msg="invalid code -- missing end-of-block",C.mode=g;break}if(C.lenbits=9,q={bits:C.lenbits},W=s(1,C.lens,0,C.nlen,C.lencode,0,C.work,q),C.lenbits=q.bits,W){t.msg="invalid literal/lengths set",C.mode=g;break}if(C.distbits=6,C.distcode=C.distdyn,q={bits:C.distbits},W=s(2,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,q),C.distbits=q.bits,W){t.msg="invalid distances set",C.mode=g;break}if(C.mode=16199,e===l)break t;case 16199:C.mode=16200;case 16200:if(I>=6&&R>=258){t.next_out=k,t.avail_out=R,t.next_in=S,t.avail_in=I,C.hold=L,C.bits=x,o(t,T),k=t.next_out,w=t.output,R=t.avail_out,S=t.next_in,v=t.input,I=t.avail_in,L=C.hold,x=C.bits,16191===C.mode&&(C.back=-1);break}for(C.back=0;M=(H=C.lencode[L&(1<<C.lenbits)-1])>>>16&255,F=65535&H,!((O=H>>>24)<=x);){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(M&&0==(240&M)){for(j=O,V=M,D=F;M=(H=C.lencode[D+((L&(1<<j+V)-1)>>j)])>>>16&255,F=65535&H,!(j+(O=H>>>24)<=x);){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}L>>>=j,x-=j,C.back+=j}if(L>>>=O,x-=O,C.back+=O,C.length=F,0===M){C.mode=16205;break}if(32&M){C.back=-1,C.mode=16191;break}if(64&M){t.msg="invalid literal/length code",C.mode=g;break}C.extra=15&M,C.mode=16201;case 16201:if(C.extra){for(K=C.extra;x<K;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}C.length+=L&(1<<C.extra)-1,L>>>=C.extra,x-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=16202;case 16202:for(;M=(H=C.distcode[L&(1<<C.distbits)-1])>>>16&255,F=65535&H,!((O=H>>>24)<=x);){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(0==(240&M)){for(j=O,V=M,D=F;M=(H=C.distcode[D+((L&(1<<j+V)-1)>>j)])>>>16&255,F=65535&H,!(j+(O=H>>>24)<=x);){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}L>>>=j,x-=j,C.back+=j}if(L>>>=O,x-=O,C.back+=O,64&M){t.msg="invalid distance code",C.mode=g;break}C.offset=F,C.extra=15&M,C.mode=16203;case 16203:if(C.extra){for(K=C.extra;x<K;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}C.offset+=L&(1<<C.extra)-1,L>>>=C.extra,x-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){t.msg="invalid distance too far back",C.mode=g;break}C.mode=16204;case 16204:if(0===R)break t;if(U=T-R,C.offset>U){if((U=C.offset-U)>C.whave&&C.sane){t.msg="invalid distance too far back",C.mode=g;break}U>C.wnext?(U-=C.wnext,A=C.wsize-U):A=C.wnext-U,U>C.length&&(U=C.length),E=C.window}else E=w,A=k-C.offset,U=C.length;U>R&&(U=R),R-=U,C.length-=U;do{w[k++]=E[A++]}while(--U);0===C.length&&(C.mode=16200);break;case 16205:if(0===R)break t;w[k++]=C.length,R--,C.mode=16200;break;case 16206:if(C.wrap){for(;x<32;){if(0===I)break t;I--,L|=v[S++]<<x,x+=8}if(T-=R,t.total_out+=T,C.total+=T,4&C.wrap&&T&&(t.adler=C.check=C.flags?n(C.check,w,T,k-T):i(C.check,w,T,k-T)),T=R,4&C.wrap&&(C.flags?L:y(L))!==C.check){t.msg="incorrect data check",C.mode=g;break}L=0,x=0}C.mode=16207;case 16207:if(C.wrap&&C.flags){for(;x<32;){if(0===I)break t;I--,L+=v[S++]<<x,x+=8}if(4&C.wrap&&L!==(4294967295&C.total)){t.msg="incorrect length check",C.mode=g;break}L=0,x=0}C.mode=16208;case 16208:W=c;break t;case g:W=f;break t;case 16210:return m;case 16211:default:return d}return t.next_out=k,t.avail_out=R,t.next_in=S,t.avail_in=I,C.hold=L,C.bits=x,(C.wsize||T!==t.avail_out&&C.mode<g&&(C.mode<16206||e!==a))&&B(t,t.output,t.next_out,T-t.avail_out)?(C.mode=16210,m):(P-=t.avail_in,T-=t.avail_out,t.total_in+=P,t.total_out+=T,C.total+=T,4&C.wrap&&T&&(t.adler=C.check=C.flags?n(C.check,w,T,t.next_out-T):i(C.check,w,T,t.next_out-T)),t.data_type=C.bits+(C.last?64:0)+(16191===C.mode?128:0)+(16199===C.mode||16194===C.mode?256:0),(0===P&&0===T||e===a)&&W===u&&(W=p),W)},e.exports.inflateEnd=t=>{if(b(t))return d;let e=t.state;return e.window&&(e.window=null),t.state=null,u},e.exports.inflateGetHeader=(t,e)=>{if(b(t))return d;const i=t.state;return 0==(2&i.wrap)?d:(i.head=e,e.done=!1,u)},e.exports.inflateSetDictionary=(t,e)=>{const n=e.length;let o,s,a;return b(t)?d:0!==(o=t.state).wrap&&16190!==o.mode?d:16190===o.mode&&(s=i(s=1,e,n,0))!==o.check?f:(a=B(t,e,n,n))?(o.mode=16210,m):(o.havedict=1,u)},e.exports.inflateInfo="pako inflate (from Nodeca project)"},{"./adler32":7,"./constants":8,"./crc32":9,"./inffast":12,"./inftrees":14}],14:[function(t,e){"use strict";const i=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),o=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),s=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);e.exports=(t,e,a,r,l,u,c,h)=>{const d=h.bits;let f,m,p,_,g,y,C=0,b=0,v=0,w=0,S=0,k=0,I=0,R=0,L=0,G=0,B=null;const x=new Uint16Array(16),P=new Uint16Array(16);let T,U,A,E=null;for(C=0;C<=15;C++)x[C]=0;for(b=0;b<r;b++)x[e[a+b]]++;for(S=d,w=15;w>=1&&0===x[w];w--);if(S>w&&(S=w),0===w)return l[u++]=20971520,l[u++]=20971520,h.bits=1,0;for(v=1;v<w&&0===x[v];v++);for(S<v&&(S=v),R=1,C=1;C<=15;C++)if(R<<=1,(R-=x[C])<0)return-1;if(R>0&&(0===t||1!==w))return-1;for(P[1]=0,C=1;C<15;C++)P[C+1]=P[C]+x[C];for(b=0;b<r;b++)0!==e[a+b]&&(c[P[e[a+b]]++]=b);if(0===t?(B=E=c,y=20):1===t?(B=i,E=n,y=257):(B=o,E=s,y=0),G=0,b=0,C=v,g=u,k=S,I=0,p=-1,_=(L=1<<S)-1,1===t&&L>852||2===t&&L>592)return 1;for(;;){T=C-I,c[b]+1<y?(U=0,A=c[b]):c[b]>=y?(U=E[c[b]-y],A=B[c[b]-y]):(U=96,A=0),f=1<<C-I,v=m=1<<k;do{l[g+(G>>I)+(m-=f)]=T<<24|U<<16|A|0}while(0!==m);for(f=1<<C-1;G&f;)f>>=1;if(0!==f?(G&=f-1,G+=f):G=0,b++,0==--x[C]){if(C===w)break;C=e[a+c[b]]}if(C>S&&(G&_)!==p){for(0===I&&(I=S),g+=v,R=1<<(k=C-I);k+I<w&&!((R-=x[k+I])<=0);)k++,R<<=1;if(L+=1<<k,1===t&&L>852||2===t&&L>592)return 1;l[p=G&_]=S<<24|k<<16|g-u|0}}return 0!==G&&(l[g+G]=C-I<<24|64<<16|0),h.bits=S,0}},{}],15:[function(t,e){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],16:[function(t,e){"use strict";function i(t){let e=t.length;for(;--e>=0;)t[e]=0}const n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),s=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),a=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r=new Array(576);i(r);const l=new Array(60);i(l);const u=new Array(512);i(u);const c=new Array(256);i(c);const h=new Array(29);i(h);const d=new Array(30);function f(t,e,i,n,o){this.static_tree=t,this.extra_bits=e,this.extra_base=i,this.elems=n,this.max_length=o,this.has_stree=t&&t.length}let m,p,_;function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}i(d);const y=t=>t<256?u[t]:u[256+(t>>>7)],C=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},b=(t,e,i)=>{t.bi_valid>16-i?(t.bi_buf|=e<<t.bi_valid&65535,C(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=i)},v=(t,e,i)=>{b(t,i[2*e],i[2*e+1])},w=(t,e)=>{let i=0;do{i|=1&t,t>>>=1,i<<=1}while(--e>0);return i>>>1},S=t=>{16===t.bi_valid?(C(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)},k=(t,e)=>{const i=e.dyn_tree,n=e.max_code,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,r=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,c,h,d,f,m,p=0;for(d=0;d<=15;d++)t.bl_count[d]=0;for(i[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)(d=i[2*i[2*(c=t.heap[u])+1]+1]+1)>l&&(d=l,p++),i[2*c+1]=d,c>n||(t.bl_count[d]++,f=0,c>=r&&(f=a[c-r]),m=i[2*c],t.opt_len+=m*(d+f),s&&(t.static_len+=m*(o[2*c+1]+f)));if(0!==p){do{for(d=l-1;0===t.bl_count[d];)d--;t.bl_count[d]--,t.bl_count[d+1]+=2,t.bl_count[l]--,p-=2}while(p>0);for(d=l;0!==d;d--)for(c=t.bl_count[d];0!==c;)(h=t.heap[--u])>n||(i[2*h+1]!==d&&(t.opt_len+=(d-i[2*h+1])*i[2*h],i[2*h+1]=d),c--)}},I=(t,e,i)=>{const n=new Array(16);let o,s,a=0;for(o=1;o<=15;o++)a=a+i[o-1]<<1,n[o]=a;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=w(n[e]++,e))}},R=()=>{let t,e,i,a,g;const y=new Array(16);for(i=0,a=0;a<28;a++)for(h[a]=i,t=0;t<1<<n[a];t++)c[i++]=a;for(c[i-1]=a,g=0,a=0;a<16;a++)for(d[a]=g,t=0;t<1<<o[a];t++)u[g++]=a;for(g>>=7;a<30;a++)for(d[a]=g<<7,t=0;t<1<<o[a]-7;t++)u[256+g++]=a;for(e=0;e<=15;e++)y[e]=0;for(t=0;t<=143;)r[2*t+1]=8,t++,y[8]++;for(;t<=255;)r[2*t+1]=9,t++,y[9]++;for(;t<=279;)r[2*t+1]=7,t++,y[7]++;for(;t<=287;)r[2*t+1]=8,t++,y[8]++;for(I(r,287,y),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=w(t,5);m=new f(r,n,257,286,15),p=new f(l,o,0,30,15),_=new f(new Array(0),s,0,19,7)},L=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},G=t=>{t.bi_valid>8?C(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},B=(t,e,i,n)=>{const o=2*e,s=2*i;return t[o]<t[s]||t[o]===t[s]&&n[e]<=n[i]},x=(t,e,i)=>{const n=t.heap[i];let o=i<<1;for(;o<=t.heap_len&&(o<t.heap_len&&B(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!B(e,n,t.heap[o],t.depth));)t.heap[i]=t.heap[o],i=o,o<<=1;t.heap[i]=n},P=(t,e,i)=>{let s,a,r,l,u=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+u++],s+=(255&t.pending_buf[t.sym_buf+u++])<<8,a=t.pending_buf[t.sym_buf+u++],0===s?v(t,a,e):(r=c[a],v(t,r+256+1,e),0!==(l=n[r])&&(a-=h[r],b(t,a,l)),r=y(--s),v(t,r,i),0!==(l=o[r])&&(s-=d[r],b(t,s,l)))}while(u<t.sym_next);v(t,256,e)},T=(t,e)=>{const i=e.dyn_tree,n=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.elems;let a,r,l,u=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<s;a++)0!==i[2*a]?(t.heap[++t.heap_len]=u=a,t.depth[a]=0):i[2*a+1]=0;for(;t.heap_len<2;)i[2*(l=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[l]=0,t.opt_len--,o&&(t.static_len-=n[2*l+1]);for(e.max_code=u,a=t.heap_len>>1;a>=1;a--)x(t,i,a);l=s;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],x(t,i,1),r=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=r,i[2*l]=i[2*a]+i[2*r],t.depth[l]=(t.depth[a]>=t.depth[r]?t.depth[a]:t.depth[r])+1,i[2*a+1]=i[2*r+1]=l,t.heap[1]=l++,x(t,i,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],k(t,e),I(i,u,t.bl_count)},U=(t,e,i)=>{let n,o,s=-1,a=e[1],r=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(i+1)+1]=65535,n=0;n<=i;n++)o=a,a=e[2*(n+1)+1],++r<l&&o===a||(r<u?t.bl_tree[2*o]+=r:0!==o?(o!==s&&t.bl_tree[2*o]++,t.bl_tree[32]++):r<=10?t.bl_tree[34]++:t.bl_tree[36]++,r=0,s=o,0===a?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4))},A=(t,e,i)=>{let n,o,s=-1,a=e[1],r=0,l=7,u=4;for(0===a&&(l=138,u=3),n=0;n<=i;n++)if(o=a,a=e[2*(n+1)+1],!(++r<l&&o===a)){if(r<u)do{v(t,o,t.bl_tree)}while(0!=--r);else 0!==o?(o!==s&&(v(t,o,t.bl_tree),r--),v(t,16,t.bl_tree),b(t,r-3,2)):r<=10?(v(t,17,t.bl_tree),b(t,r-3,3)):(v(t,18,t.bl_tree),b(t,r-11,7));r=0,s=o,0===a?(l=138,u=3):o===a?(l=6,u=3):(l=7,u=4)}},E=t=>{let e;for(U(t,t.dyn_ltree,t.l_desc.max_code),U(t,t.dyn_dtree,t.d_desc.max_code),T(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*a[e]+1];e--);return t.opt_len+=14+3*(e+1),e},O=(t,e,i,n)=>{let o;for(b(t,e-257,5),b(t,i-1,5),b(t,n-4,4),o=0;o<n;o++)b(t,t.bl_tree[2*a[o]+1],3);A(t,t.dyn_ltree,e-1),A(t,t.dyn_dtree,i-1)},M=t=>{let e,i=4093624447;for(e=0;e<=31;e++,i>>>=1)if(1&i&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0};let F=!1;const j=(t,e,i,n)=>{b(t,0+(n?1:0),3),G(t),C(t,i),C(t,~i),i&&t.pending_buf.set(t.window.subarray(e,e+i),t.pending),t.pending+=i};e.exports._tr_init=t=>{F||(R(),F=!0),t.l_desc=new g(t.dyn_ltree,m),t.d_desc=new g(t.dyn_dtree,p),t.bl_desc=new g(t.bl_tree,_),t.bi_buf=0,t.bi_valid=0,L(t)},e.exports._tr_stored_block=j,e.exports._tr_flush_block=(t,e,i,n)=>{let o,s,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=M(t)),T(t,t.l_desc),T(t,t.d_desc),a=E(t),o=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=o&&(o=s)):o=s=i+5,i+4<=o&&-1!==e?j(t,e,i,n):4===t.strategy||s===o?(b(t,2+(n?1:0),3),P(t,r,l)):(b(t,4+(n?1:0),3),O(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),P(t,t.dyn_ltree,t.dyn_dtree)),L(t),n&&G(t)},e.exports._tr_tally=(t,e,i)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=i,0===e?t.dyn_ltree[2*i]++:(t.matches++,e--,t.dyn_ltree[2*(c[i]+256+1)]++,t.dyn_dtree[2*y(e)]++),t.sym_next===t.sym_end),e.exports._tr_align=t=>{b(t,2,3),v(t,256,r),S(t)}},{}],17:[function(t,e){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],ActionData:[function(t,e,i){"use strict";cc._RF.push(e,"f58f5Ael9BAVa1VQU5RO91S","ActionData"),Object.defineProperty(i,"__esModule",{value:!0}),i.ActionResponseData=i.ActionData=void 0;i.ActionData=function(){};i.ActionResponseData=function(){},cc._RF.pop()},{}],AppEntry:[function(t,e,i){"use strict";cc._RF.push(e,"8aeb8X8bvFGf4oPMTanX2AB","AppEntry");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../Common/Global"),r=t("../Common/LogUtil"),l=t("../Config/Config"),u=t("./Scenes/LaunchMain"),c=t("./Scenes/Main"),h=cc._decorator,d=h.ccclass,f=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){this.initView()},e.prototype.initView=function(){fgui.GRoot.create(),this.loadRoomScene()},e.prototype.loadRoomScene=function(){cc.sys.isNative?(a.default.loginMode=0,l.RunEnvironment.environment=l.GameEnvironment.Test_1,r.default.log("\u539f\u751f\u73af\u5883"),this.addComponent(c.default)):(l.RunEnvironment.environment=l.GameEnvironment.Test_1,r.default.log("web\u73af\u5883"),a.default.loginMode=1,this.addComponent(u.default))},s([d],e)}(cc.Component));i.default=f,cc._RF.pop()},{"../Common/Global":"Global","../Common/LogUtil":"LogUtil","../Config/Config":"Config","./Scenes/LaunchMain":"LaunchMain","./Scenes/Main":"Main"}],ArrayUtil:[function(t,e,i){"use strict";cc._RF.push(e,"86dbcrWN9xB16/ex09nlgVK","ArrayUtil");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n};Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t.copy2DArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].concat());return e},t.fisherYatesShuffle=function(t){for(var e=t.length;e;){var i=Math.floor(Math.random()*e--),n=t[e];t[e]=t[i],t[i]=n}return t},t.confound=function(t){return t.slice().sort(function(){return Math.random()-.5})},t.flattening=function(t){for(;t.some(function(t){return Array.isArray(t)});)t=[].concat.apply([],t);return t},t.combineArrays=function(t,e){return n(t,e)},t.getRandomValueInArray=function(t){return t[Math.floor(Math.random()*t.length)]},t}();i.default=o,cc._RF.pop()},{}],ArticleDto:[function(t,e,i){"use strict";cc._RF.push(e,"6fd148epWdCXZDUY4gwRXzt","ArticleDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.ArticleDto=void 0;i.ArticleDto=function(){this.isSelected=!1,this.selectCount=0},cc._RF.pop()},{}],Article:[function(t,e,i){"use strict";cc._RF.push(e,"37be1uF7OVA36UugRfw3/4T","Article"),Object.defineProperty(i,"__esModule",{value:!0}),i.Article=void 0;i.Article=function(){},cc._RF.pop()},{}],AuctionObjectVo:[function(t,e,i){"use strict";cc._RF.push(e,"c890dFfClJKNoBxc9Xx2Ij9","AuctionObjectVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.AuctionObjectVo=void 0;i.AuctionObjectVo=function(){},cc._RF.pop()},{}],AuctionVo:[function(t,e,i){"use strict";cc._RF.push(e,"a91b2P4FeZBRbRM+NUHL3Dw","AuctionVo");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.AuctionVo=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.convert=function(t){var i=new e;return i.price=t,i},e}(t("./GameVo").GameVo);i.AuctionVo=s,cc._RF.pop()},{"./GameVo":"GameVo"}],AudioPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"5a1d6zeIMVP4J1boPtK+dZI","AudioPlayer"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"masterVolume",{get:function(){return this._masterVolume},enumerable:!1,configurable:!0}),Object.defineProperty(t,"musicVolume",{get:function(){return this._musicVolume},enumerable:!1,configurable:!0}),Object.defineProperty(t,"effectVolume",{get:function(){return this._effectVolume},enumerable:!1,configurable:!0}),Object.defineProperty(t,"musicStatus",{get:function(){return this._musicStatus},enumerable:!1,configurable:!0}),t.setMusicStatus=function(t){this._musicStatus=t},t.setMasterVolume=function(t){t<0?t=0:t>1&&(t=1),this._masterVolume=t,this.setMusicVolume(this._musicVolume),this.setEffectVolume(this._effectVolume)},t.setVolume=function(t){this.setMusicVolume(t),this.setEffectVolume(t)},t.setMusicVolume=function(t){t<0?t=0:t>1&&(t=1),this._musicVolume=t;var e=this._masterVolume*t;this._music.forEach(function(t){return cc.audioEngine.setVolume(t,e)})},t.setEffectVolume=function(t){t<0?t=0:t>1&&(t=1),this._effectVolume=t;var e=this._masterVolume*t;this._effect.forEach(function(t,i){return cc.audioEngine.setVolume(i,e)})},t.playMusic=function(t){this._music.has(t)&&this.stopMusic(t);var e=cc.audioEngine.play(t,!0,this._masterVolume*this._musicVolume);this._music.set(t,e)},t.stopMusic=function(t){this._music.has(t)&&(cc.audioEngine.stop(this._music.get(t)),this._music.delete(t))},t.stopAllMusic=function(){var t=this;this._music.forEach(function(e,i){return t.stopMusic(i)})},t.pauseMusic=function(t){this._music.has(t)&&cc.audioEngine.pause(this._music.get(t))},t.pauseAllMusic=function(){var t=this;this._music.forEach(function(e,i){return t.pauseMusic(i)})},t.resumeMusic=function(t){this._music.has(t)&&cc.audioEngine.resume(this._music.get(t))},t.resumeAllMusic=function(){var t=this;this._music.forEach(function(e,i){return t.resumeMusic(i)})},t.playEffect=function(t,e){var i=this,n=cc.audioEngine.play(t,e,this._masterVolume*this._effectVolume);this._effect.set(n,t),e||cc.audioEngine.setFinishCallback(n,function(){return i._effect.delete(n)})},t.stopEffect=function(t){var e=this;this._effect.forEach(function(i,n){i===t&&(cc.audioEngine.stop(n),e._effect.delete(n))})},t.stopAllEffect=function(){var t=this;this._effect.forEach(function(e,i){cc.audioEngine.stop(i),t._effect.delete(i)})},t.pauseEffect=function(t){this._effect.forEach(function(e,i){return e===t&&cc.audioEngine.pause(i)})},t.pauseAllEffect=function(){this._effect.forEach(function(t,e){return cc.audioEngine.pause(e)})},t.resumeEffect=function(t){this._effect.forEach(function(e,i){return e===t&&cc.audioEngine.resume(i)})},t.resumeAllEffect=function(){this._effect.forEach(function(t,e){return cc.audioEngine.resume(e)})},t.stopAll=function(){this.stopAllMusic(),this.stopAllEffect()},t.pauseAll=function(){this.pauseAllMusic(),this.pauseAllEffect()},t.resumeAll=function(){this.resumeAllMusic(),this.resumeAllEffect()},t.mute=function(){this.setMasterVolume(0)},t.StopAllEngine=function(){cc.audioEngine.stopAll(),cc.audioEngine.stopAllEffects()},t._music=new Map,t._effect=new Map,t._masterVolume=1,t._musicVolume=1,t._effectVolume=1,t._musicStatus=!1,t}();i.default=n,cc._RF.pop()},{}],BackgroundAdapter:[function(t,e,i){"use strict";cc._RF.push(e,"6e385g2HCZJA5T5O1BRbXcv","BackgroundAdapter");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){var t=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),e=this.node.width*t,i=this.node.height*t;this.node.scale=Math.max(cc.view.getCanvasSize().width/e,cc.view.getCanvasSize().height/i)},s([r],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],BadNews:[function(t,e,i){"use strict";cc._RF.push(e,"f23e1OolIpNg5XjaluQqCVu","BadNews"),Object.defineProperty(i,"__esModule",{value:!0}),i.BadNews=void 0;i.BadNews=function(){},cc._RF.pop()},{}],BrowserUtil:[function(t,e,i){"use strict";cc._RF.push(e,"f0d9eO3EJRNkZekrFlFWpkm","BrowserUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.clearUrlParam=function(){window&&window.history&&window.history.replaceState({},null,".")},t.setUrlParam=function(t){window&&window.history&&window.history.replaceState({},null,"?"+t)},t.getUrlParam=function(t){if(!window||!window.location)return null;var e=window.location.search.replace("?","");if(""===e)return null;for(var i=e.split("&"),n=0;n<i.length;n++){var o=i[n].split("=");if(decodeURIComponent(o[0])===t)return decodeURIComponent(o[1])}return null},t.copy=function(t){if(!document)return!1;var e=document.createElement("textarea");e.readOnly=!0,e.style.opacity="0",e.value=t,document.body.appendChild(e),e.select();var i=document.createRange();i.selectNodeContents(e);var n=getSelection();n.removeAllRanges(),n.addRange(i);var o=document.execCommand("copy");return e.remove(),o},t}();i.default=n,cc._RF.pop()},{}],Capture_to_native:[function(t,e,i){"use strict";cc._RF.push(e,"d86f4tlhGpHZac4qBYFOcin","Capture_to_native");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("./TextureRenderUtils"),r=cc._decorator,l=r.ccclass,u=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onStartLaunch=function(){var t=this;this.init(),this._camera.enabled=!0,this.schedule(function(){var e=t.initImage();t.saveFile(e),t._camera.enabled=!1},1,0)},e.prototype.initImage=function(){var t=this._texture.readPixels();return this._width=this._texture.width,this._height=this._texture.height,this.filpYImage(t,this._width,this._height)},e.prototype.createData=function(t){var e=new cc.Texture2D;e.initWithData(t,32,this._width,this._height);var i=new cc.SpriteFrame;i.setTexture(e);var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,n.zIndex=cc.macro.MAX_ZINDEX,n.parent=cc.director.getScene();var o=cc.winSize.width,s=cc.winSize.height;n.x=o/2,n.y=s/2,n.on(cc.Node.EventType.TOUCH_START,function(){n.parent=null,n.destroy()}),this.captureAction(n,o,s)},e.prototype.saveFile=function(){},e.prototype.filpYImage=function(t,e,i){for(var n=new Uint8Array(e*i*4),o=4*e,s=0;s<i;s++)for(var a=(i-1-s)*e*4,r=s*e*4,l=0;l<o;l++)n[r+l]=t[a+l];return n},s([l],e)}(a.default));i.default=u,cc._RF.pop()},{"./TextureRenderUtils":"TextureRenderUtils"}],ChancelTypeConstant:[function(t,e,i){"use strict";cc._RF.push(e,"38307IuBCNBv5NzBZz5MPCo","ChancelTypeConstant"),Object.defineProperty(i,"__esModule",{value:!0}),i.ChancelTypeConstant=void 0,function(t){t[t.STOCK=1]="STOCK",t[t.FUTURES=2]="FUTURES",t[t.HOUSE=3]="HOUSE",t[t.COMPANY=4]="COMPANY",t[t.EQUITY=5]="EQUITY",t[t.ARTICLE=6]="ARTICLE",t[t.SPECULATE=7]="SPECULATE"}(i.ChancelTypeConstant||(i.ChancelTypeConstant={})),cc._RF.pop()},{}],ChildrenVo:[function(t,e,i){"use strict";cc._RF.push(e,"01a92Bh5oFKEIeeTj+K2xRx","ChildrenVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.ChildrenVo=void 0;var n=function(){function t(){}return t.convert=function(e){var i=new t;return i.isChildren=e,i},t}();i.ChildrenVo=n,cc._RF.pop()},{}],CompanyDto:[function(t,e,i){"use strict";cc._RF.push(e,"5e42bmBhRBPjq6tyrB5xsW/","CompanyDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.CompanyDto=void 0;i.CompanyDto=function(){this.isSelected=!1},cc._RF.pop()},{}],Company:[function(t,e,i){"use strict";cc._RF.push(e,"241d8OaYCtBM4xsm5cgK33Q","Company"),Object.defineProperty(i,"__esModule",{value:!0}),i.Company=void 0;i.Company=function(){},cc._RF.pop()},{}],Config:[function(t,e,i){"use strict";cc._RF.push(e,"11f76/yjDhFhpguEnQT9S1l","Config"),Object.defineProperty(i,"__esModule",{value:!0}),i.RunEnvironment=i.EnvironmentProfile=i.GameEnvironment=void 0;var n,o=t("../Common/LogUtil");(function(t){t[t.Release=0]="Release",t[t.Test_1=1]="Test_1",t[t.Test_2=2]="Test_2",t[t.Test_3=3]="Test_3"})(n=i.GameEnvironment||(i.GameEnvironment={}));i.EnvironmentProfile=function(){};var s=function(){function t(){}return t.hadEnvironment=function(){var t=null;switch(this.environment){case n.Release:t=this.release_profile,o.default.log("\u3010\u5f53\u524d\u8fd0\u884c\u73af\u5883\u3011\uff1aRelease");break;case n.Test_1:t=this.test1_profile,o.default.log("\u3010\u5f53\u524d\u8fd0\u884c\u73af\u5883\u3011\uff1aTest_1");break;case n.Test_2:t=this.test2_profile,o.default.log("\u3010\u5f53\u524d\u8fd0\u884c\u73af\u5883\u3011\uff1aTest_2");break;case n.Test_3:t=this.test3_profile,o.default.log("\u3010\u5f53\u524d\u8fd0\u884c\u73af\u5883\u3011\uff1aTest_3");break;default:o.default.log("\u3010\u5f53\u524d\u8fd0\u884c\u73af\u5883\u3011\uff1a\u672a\u77e5")}return t},t.version="1.0.6",t.release_profile={gameId:"obg-dtwrwcfn",url:"dtwrwcfn.wxlagame.com",service_url:"https://api.bjy1314.com/app/api/"},t.test1_profile={gameId:"obg-pjagq5a6",url:"pjagq5a6.wxlagame.com",service_url:"https://testapi.bjy1314.com/app/api/"},t.test2_profile={gameId:"obg-18t829zx",url:"18t829zx.wxlagame.com",service_url:"https://testapi.bjy1314.com/app/api/"},t.test3_profile={gameId:"obg-rr0zlfoz",url:"rr0zlfoz.wxlagame.com",service_url:"https://testapi.bjy1314.com/app/api/"},t}();i.RunEnvironment=s,i.default={openId:function(){for(var t=Date.now().toString(36),e=0;e<7;e++)t+=Math.ceil(Math.random()*Math.pow(10,4)).toString(36);return t}(),cacertNativeUrl:"",roomID:"",roomName:"",grantType:"client_credentials",asymmetric:!1,handleFrameRate:3,appId:"172249065902339305",clientId:"1039080641087425600",clientSecret:"7A4222D9D1CFDD273DB136EA23830AACBB47744A5B94541A9C135D8DD657DF6C",matchCode:"4",asymmetricMatchCode:"",http_url:"https://testapi.bjy1314.com/app/api/",url_auth_login:"auth/login",url_user_info:"user/userInfo",url_role_list:"game/role/selectList",url_game_userInfo:"user/game/userInfo",url_gameIndex_gameCareerDetail:"gameIndex/gameCareerDetail",url_gamePlayer_start:"gamePlayer/start",url_gamePlayer_gameLogin:"gamePlayer/gameLogin",url_gamePlayer_test_gameLogin:"gamePlayer/test_gameLogin",url_gamePlayer_messageList:"gamePlayer/messageList",url_gamePlayer_friendList:"gamePlayer/friendList",url_gamePlayer_gameInvite:"gamePlayer/gameInvite",game_rule_desc:"https://image.bjy1314.com/game_resource/game_rule_1.png",game_rule_flow:"https://image.bjy1314.com/game_resource/game_rule_2.png",game_rule_question:"https://image.bjy1314.com/game_resource/game_rule_3.png",game_rule_rule:"https://image.bjy1314.com/game_resource/game_rule_4.png"},cc._RF.pop()},{"../Common/LogUtil":"LogUtil"}],ContentAdapter:[function(t,e,i){"use strict";cc._RF.push(e,"465dehvFZVCH4zAQCow0siY","ContentAdapter");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){var t=Math.min(cc.view.getCanvasSize().width/this.node.width,cc.view.getCanvasSize().height/this.node.height),e=this.node.width*t,i=this.node.height*t;this.node.width=this.node.width*(cc.view.getCanvasSize().width/e),this.node.height=this.node.height*(cc.view.getCanvasSize().height/i)},s([r],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],DataUtil:[function(t,e,i){"use strict";cc._RF.push(e,"06f68O0oolHyJCsOg4USDpE","DataUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.dataDifference=i.checkNumber=i.formatNum=i.keepDecimal=i.moneyToWan=void 0,i.moneyToWan=function(t){return isNaN(t)?"0":t>1e4||t<-1e4?Math.floor(t/1e3)/10+"\u4e07":""+t},i.keepDecimal=function(){return Math.floor(1577.84514)/100},i.formatNum=function(t,e){if(void 0===e&&(e=!0),null==t)return"0";var i=t.toString();-1==i.indexOf(".")&&(i+=".00"),-1!=i.indexOf(",")&&(i=i.replace(new RegExp(",","g"),""));var n=i.substring(0,i.indexOf(".")).replace(/\B(?=(?:\d{3})+$)/g,",");return e?n:n+i.substring(i.length,i.indexOf("."))},i.checkNumber=function(t){return!!/^[0-9]+.?[0-9]*$/.test(t)},i.dataDifference=function(t,e){var i=t.getTime();return(e.getTime()-i)/1e3},cc._RF.pop()},{}],DebugUtil:[function(t,e,i){"use strict";cc._RF.push(e,"22a66gTCDxHeYduA5AEiJGr","DebugUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.log=function(t,e){e?console.log("%c "+t+" %c "+e+" ","background: #35495E;padding: 1px;border-radius: 2px 0 0 2px;color: #fff;","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;"):console.log("%c "+t+" ","background: #409EFF;padding: 1px;border-radius: 0 2px 2px 0;color: #fff;")},t.showDynamicAtlas=function(t){return void 0===t&&(t=!0),cc.dynamicAtlasManager.showDebug(t)},t.showStats=function(t){void 0===t&&(t=!0),cc.debug.setDisplayStats(t)},t.setStatsColor=function(t,e){void 0===t&&(t=cc.Color.WHITE),void 0===e&&(e=cc.color(0,0,0,150));var i=cc.find("PROFILER-NODE");if(!i)return cc.warn("\u672a\u627e\u5230\u7edf\u8ba1\u9762\u677f\u8282\u70b9\uff01");i.children.forEach(function(e){return e.color=t});var n=i.getChildByName("BACKGROUND");n||(n=new cc.Node("BACKGROUND"),i.addChild(n,cc.macro.MIN_ZINDEX),n.setContentSize(i.getBoundingBoxToWorld()),n.setPosition(0,0));var o=n.getComponent(cc.Graphics)||n.addComponent(cc.Graphics);o.clear(),o.rect(-5,12.5,n.width+10,n.height-10),o.fillColor=e,o.fill()},t.getDrawCalls=function(){return cc.renderer.drawCalls},t}();i.default=n,window.eazax&&(window.eazax.debug=n),cc._RF.pop()},{}],DeviceUtil:[function(t,e,i){"use strict";cc._RF.push(e,"ca996EanDdNgqOIinNq/fGy","DeviceUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.getSafeAreaRect=function(){return cc.sys.getSafeAreaRect()},Object.defineProperty(t,"platform",{get:function(){return cc.sys.platform},enumerable:!1,configurable:!0}),Object.defineProperty(t,"os",{get:function(){return cc.sys.os},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return cc.sys.platform===cc.sys.ANDROID},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isNative",{get:function(){return cc.sys.isNative},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isBrowser",{get:function(){return cc.sys.isBrowser},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isMobile",{get:function(){return cc.sys.isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isIPhone",{get:function(){return cc.sys.platform===cc.sys.IPHONE},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isIPad",{get:function(){return cc.sys.platform===cc.sys.IPAD},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isMobileBrowser",{get:function(){return cc.sys.platform===cc.sys.MOBILE_BROWSER},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isDesktopBrowser",{get:function(){return cc.sys.platform===cc.sys.DESKTOP_BROWSER},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isWeChat",{get:function(){return cc.sys.platform===cc.sys.WECHAT_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isQQPlay",{get:function(){return cc.sys.platform===cc.sys.QQ_PLAY},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isByteDance",{get:function(){return cc.sys.platform===cc.sys.BYTEDANCE_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isBaidu",{get:function(){return cc.sys.platform===cc.sys.BAIDU_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isVivo",{get:function(){return cc.sys.platform===cc.sys.VIVO_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isOPPO",{get:function(){return cc.sys.platform===cc.sys.OPPO_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isXiaomi",{get:function(){return cc.sys.platform===cc.sys.XIAOMI_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isHuawei",{get:function(){return cc.sys.platform===cc.sys.HUAWEI_GAME},enumerable:!1,configurable:!0}),Object.defineProperty(t,"isAlipay",{get:function(){return cc.sys.platform===cc.sys.ALIPAY_GAME},enumerable:!1,configurable:!0}),t}();i.default=n,cc._RF.pop()},{}],DialogMgr:[function(t,e,i){"use strict";cc._RF.push(e,"9b93efNUdpIWKCHKx/HdGP7","DialogMgr"),Object.defineProperty(i,"__esModule",{value:!0}),i.default={showTipsWithOkBtn:function(t,e,i,n){var o=cc.director.getScene();if(o){var s=cc.view.getVisibleSize().width,a=cc.view.getVisibleSize().height;cc.resources.load("DialogLayer",cc.Prefab,function(r,l){if(!r){var u=cc.instantiate(l);u.x=s/2,u.y=a/2,o.addChild(u);var c=u.getComponent("DialogLayer");c&&c.showTipsWithOkBtn(t,e,i,n)}})}},showTipsWithOkCancelBtn:function(t,e,i,n,o){var s=cc.director.getScene();if(s){var a=cc.view.getVisibleSize().width,r=cc.view.getVisibleSize().height;cc.resources.load("DialogLayer",cc.Prefab,function(l,u){if(!l){var c=cc.instantiate(u);c.x=a/2,c.y=r/2,s.addChild(c);var h=c.getComponent("DialogLayer");h&&h.showTipsWithOkCancelBtn(t,e,i,n),o&&o(c)}})}},showTipsWithOkBtnAndNoCloseBtn:function(t,e,i,n){var o=cc.director.getScene();if(o){var s=cc.view.getVisibleSize().width,a=cc.view.getVisibleSize().height;cc.resources.load("DialogLayer",function(r,l){if(!r){var u=cc.instantiate(l);u.x=s/2,u.y=a/2,o.addChild(u);var c=u.getComponent("DialogLayer");c&&(c.showTipsWithOkBtn(t,e,i),c.setCloseBtnVisible()),n&&n(u)}})}}},cc._RF.pop()},{}],DiceVo:[function(t,e,i){"use strict";cc._RF.push(e,"20a7dHo9JhHhbsV8SX35gs8","DiceVo");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.DiceVo=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t("./GameVo").GameVo);i.DiceVo=s,cc._RF.pop()},{"./GameVo":"GameVo"}],EpisodeVo:[function(t,e,i){"use strict";cc._RF.push(e,"8ded2IXww1OWK14WMiEc5It","EpisodeVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.EpisodeVo=void 0;var n=function(){function t(){}return t.convert=function(e){var i=new t;return i.episode=e,i},t}();i.EpisodeVo=n,cc._RF.pop()},{}],Episode:[function(t,e,i){"use strict";cc._RF.push(e,"18aa0LU3yhFHKDZ4KPNeexy","Episode"),Object.defineProperty(i,"__esModule",{value:!0}),i.Episode=void 0;i.Episode=function(){},cc._RF.pop()},{}],EquityDto:[function(t,e,i){"use strict";cc._RF.push(e,"f786d1HYaFFk6WSZhBsMBxM","EquityDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.EquityDto=void 0;i.EquityDto=function(){this.isSelected=!1,this.selectCount=0},cc._RF.pop()},{}],Equity:[function(t,e,i){"use strict";cc._RF.push(e,"0b7e6WLEIFLBKgUE4uGI2tj","Equity"),Object.defineProperty(i,"__esModule",{value:!0}),i.Equity=void 0;i.Equity=function(){},cc._RF.pop()},{}],EventManager:[function(t,e,i){"use strict";cc._RF.push(e,"8277cfc34ZO3p8L3G6q8QzN","EventManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.on=function(t,e,i){var n=this.events;n.has(t)?n.get(t).push({callback:e,target:i}):n.set(t,[{callback:e,target:i}])},t.once=function(t,e,i){var n=this.onceEvents;n.has(t)?n.get(t).push({callback:e,target:i}):n.set(t,[{callback:e,target:i}])},t.off=function(t,e,i){var n=this.events.get(t);if(n)for(var o=0,s=n.length;o<s;o++)if(this.compare(n[o],e,i)){n.splice(o,1),0===n.length&&this.events.delete(t);break}var a=this.onceEvents.get(t);if(a)for(o=0,s=a.length;o<s;o++)if(this.compare(a[o],e,i)){a.splice(o,1),0===a.length&&this.onceEvents.delete(t);break}},t.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.events.get(t);if(n)for(var o=0;o<n.length;o++){var s=n[o],a=s.callback,r=s.target;a.apply(r,e)}var l=this.onceEvents.get(t);if(l){for(o=0;o<l.length;o++){var u=l[o];a=u.callback,r=u.target,a.apply(r,e)}this.onceEvents.delete(t)}},t.remove=function(t){this.events.has(t)&&this.events.delete(t),this.onceEvents.has(t)&&this.onceEvents.delete(t)},t.removeAll=function(){this.events.clear(),this.onceEvents.clear()},t.compare=function(t,e,i){var n=t.callback;return t.target===i&&(n===e||n.toString()===e.toString())},t.events=new Map,t.onceEvents=new Map,t}();i.default=n,cc._RF.pop()},{}],FuturesDto:[function(t,e,i){"use strict";cc._RF.push(e,"30dd5m2Md9DZpczQAcvlC3m","FuturesDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.FuturesDto=void 0;i.FuturesDto=function(){this.isSelected=!1},cc._RF.pop()},{}],Futures:[function(t,e,i){"use strict";cc._RF.push(e,"98554lQG7FMV4XIxOXslh96","Futures"),Object.defineProperty(i,"__esModule",{value:!0}),i.Futures=void 0;i.Futures=function(){},cc._RF.pop()},{}],GameActivityArea:[function(t,e,i){"use strict";cc._RF.push(e,"82d240wOH9Ha4AMmDmXh+Lb","GameActivityArea");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameActivityArea=void 0;var a=t("../../Common/GameResourceUtil"),r=t("../../Common/Global"),l=t("../../Common/LogUtil"),u=t("../../Utils/AudioPlayer"),c=t("./GamePlayer"),h=cc._decorator,d=h.ccclass,f=(h.property,function(t){function e(){var e=t.call(this)||this;return e._game_location_01=0,e}return o(e,t),e.prototype.onConstruct=function(){this._game_player_01=new c.default(this.getChild("n43").asImage,this._game_location_01),this._game_player_02=new c.default(this.getChild("n44").asImage,this._game_location_01),this._game_player_03=new c.default(this.getChild("n45").asImage,this._game_location_01),this._game_player_04=new c.default(this.getChild("n46").asImage,this._game_location_01)},e.prototype.handleCurrentRole=function(){var t=r.default.roomInfo.userInfoList.findIndex(function(t){return t.userId===r.default.gameDiceVo.sender});return l.default.log("\u9700\u8981\u79fb\u52a8\u7684\u89d2\u8272id:"+r.default.gameDiceVo.sender),l.default.log("\u9700\u8981\u79fb\u52a8\u7684\u89d2\u8272\u4f4d\u7f6e\u7d22\u5f15:"+t),0==t?this._game_player_01:1==t?this._game_player_02:2==t?this._game_player_03:3==t?this._game_player_04:null},e.prototype.prepareToMove=function(t,e,i,n){var o=r.default.roomInfo.userInfoList.find(function(t){return t.userId===r.default.gameDiceVo.sender});if(o.stepNumber==e._game_location)return l.default.log("[\u89d2\u8272\u79fb\u52a8] \u5df2\u5728\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+o.nickname+"\u5df2\u5728\u6307\u5b9a\u4f4d\u7f6e"),void n();e.step(t,e._game_location,this,this,function(e){t!=e&&u.default.playEffect(a.GameSoundUtil.incidentSounds(a.GameSoundMode.Move),!1)},function(){n()})},e.prototype.sifterJudgeMessage=function(){},e.prototype.changePlayerLocation=function(){var t=this,e=r.default.roomInfo.userInfoList,i=this;e.forEach(function(e,n){var o=e.stepNumber;if(0!=o)if(0==n){if(t._game_player_01._game_location==o)return void l.default.log("[\u89d2\u8272\u79fb\u52a8] \u5df2\u5728\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u5df2\u5728\u6307\u5b9a\u4f4d\u7f6e");t._game_player_01.changePlayerLocation(o,i,i,function(){l.default.log("[\u89d2\u8272\u79fb\u52a8] \u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u79fb\u52a8\u5230"+o)})}else if(1==n){if(t._game_player_02._game_location==o)return void l.default.log("[\u89d2\u8272\u79fb\u52a8] \u5df2\u5728\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u5df2\u5728\u6307\u5b9a\u4f4d\u7f6e");t._game_player_02.changePlayerLocation(o,i,i,function(){l.default.log("[\u89d2\u8272\u79fb\u52a8] \u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u79fb\u52a8\u5230"+o)})}else if(2==n){if(t._game_player_03._game_location==o)return void l.default.log("[\u89d2\u8272\u79fb\u52a8] \u5df2\u5728\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u5df2\u5728\u6307\u5b9a\u4f4d\u7f6e");t._game_player_03.changePlayerLocation(o,i,i,function(){l.default.log("[\u89d2\u8272\u79fb\u52a8] \u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u79fb\u52a8\u5230"+o)})}else if(3==n){if(t._game_player_04._game_location==o)return void l.default.log("[\u89d2\u8272\u79fb\u52a8] \u5df2\u5728\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u5df2\u5728\u6307\u5b9a\u4f4d\u7f6e");t._game_player_04.changePlayerLocation(o,i,i,function(){l.default.log("[\u89d2\u8272\u79fb\u52a8] \u79fb\u52a8\u5230\u6307\u5b9a\u76ee\u6807\u4f4d\u7f6e:\u73a9\u5bb6"+e.nickname+"\u79fb\u52a8\u5230"+o)})}})},s([d],e)}(fgui.GComponent));i.GameActivityArea=f,cc._RF.pop()},{"../../Common/GameResourceUtil":"GameResourceUtil","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Utils/AudioPlayer":"AudioPlayer","./GamePlayer":"GamePlayer"}],GameBank:[function(t,e,i){"use strict";cc._RF.push(e,"bbfddPdCKRK7aca7qr9DuTW","GameBank");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.GameBankAssetRefundCell=i.GameBankAssetRefundListView=i.GameBankAssetRefundView=i.GameBankRefundView=i.GameBankLoanView=i.GameBankWindow=i.GameBankEventMode=void 0;var s,a=t("../../Common/GameUtils"),r=t("../../Common/Global"),l=t("../../Common/LogUtil"),u=t("../../Constant/RoomEventConstant"),c=t("../../Cores/EventManager"),h=t("../../Utils/MathUtil"),d=t("../Common/GameKeyboard"),f=t("../Common/Toast"),m=cc._decorator;m.ccclass,m.property,function(t){t[t.Loan=1]="Loan",t[t.Refund=2]="Refund",t[t.AssetRefund=3]="AssetRefund"}(s=i.GameBankEventMode||(i.GameBankEventMode={}));var p=function(t){function e(e){var i=t.call(this)||this;return i.onSubmitResult=null,i._userInfo=null,i._userInfo=e,fgui.UIObjectFactory.setExtension("ui://Game/GameBankLoanView",_),fgui.UIObjectFactory.setExtension("ui://Game/GameBankRefundView",g),fgui.UIObjectFactory.setExtension("ui://Game/GameBankAssetRefundView",y),fgui.UIObjectFactory.setExtension("ui://Basic/GameKeyBoardWindow",d.GameKeyboard),i}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","GameBankWindow").asCom,this.makeFullScreen(),this.center(),this._gameController=this.frame.getController("tab"),this._keyboardController=this.contentPane.getController("KeyBoard"),this._bankLoanView=this.frame.getChild("n0"),this._bankRefundView=this.frame.getChild("n1"),this._bankAssetRefundView=this.frame.getChild("n2"),this._keyboard=this.contentPane.getChild("keyboard"),this.frame.getChild("n4").asButton.onClick(this.hideKeyboard,this),this.frame.getChild("n5").asButton.onClick(this.hideKeyboard,this),this.frame.getChild("n6").asButton.onClick(this.hideKeyboard,this);var t=this.frame.getChild("n7").asButton;t.onClick(this.hideKeyboard,this),this.closeButton=t,this.changeShowUI()},e.prototype.changeShowUI=function(){var t=this,e=this;this._bankLoanView.onSubmitResult=function(i){if(3==e._userInfo.status)f.default.show("\u60a8\u5df2\u7834\u4ea7\uff0c\u65e0\u6cd5\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01");else{var n=e._userInfo.mayLoan;l.default.log("\u5f85\u501f\u6b3e\u91d1\u989d\uff1a",i),l.default.log("\u53ef\u8d37\u6b3e\u989d\u5ea6\uff1a",n),0!=i&&(null==n||n<=0?f.default.show("\u8d37\u6b3e\u5931\u8d25\uff0c\u60a8\u7684\u53ef\u8d37\u989d\u5ea6\u4e0d\u8db3"):n-i>=0?(e.onSubmitResult&&e.onSubmitResult(t,s.Loan,i),e._bankLoanView.touchable=!1,e.hideKeyboard()):f.default.show("\u8d37\u6b3e\u5931\u8d25\uff0c\u60a8\u7684\u53ef\u8d37\u989d\u5ea6\u4e0d\u8db3"))}},this._bankRefundView.onSubmitResult=function(i){if(0!=i)if(3==e._userInfo.status)f.default.show("\u60a8\u5df2\u7834\u4ea7\uff0c\u65e0\u6cd5\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01");else{var n=e._userInfo.assetCash;l.default.log("\u5f85\u8fd8\u6b3e\u91d1\u989d\uff1a",i),l.default.log("\u62e5\u6709\u73b0\u91d1\uff1a",n),n-i>=0?(e.onSubmitResult&&e.onSubmitResult(t,s.Refund,i),e._bankRefundView.touchable=!1,e.hideKeyboard()):f.default.show("\u8fd8\u6b3e\u5931\u8d25\uff0c\u60a8\u7684\u73b0\u91d1\u4e0d\u8db3")}},this._bankAssetRefundView.onSubmitResult=function(i,n,o,a,r){if(3==e._userInfo.status)f.default.show("\u60a8\u5df2\u7834\u4ea7\uff0c\u65e0\u6cd5\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01");else{var l=!1;i&&e._userInfo.loanMyHouse&&e._userInfo.loanMyHouse>0&&(l=!0);var u=!1;n&&e._userInfo.loanCar&&e._userInfo.loanCar>0&&(u=!0);var c=!1;if(o&&e._userInfo.loanCreditCard&&e._userInfo.loanCreditCard>0&&(c=!0),l||u||c||0!=a.length||0!=r.length)if(e.checkRefundAseet(l,u,c,a,r)){var h={isLoanMyHouse:l?1:0,isLoanCar:u?1:0,isLoanCreditCard:c?1:0,houseIdList:a,companyIdList:r};e.onSubmitResult&&e.onSubmitResult(t,s.AssetRefund,h),e._bankAssetRefundView.touchable=!1,e.hideKeyboard()}else f.default.show("\u8fd8\u6b3e\u5931\u8d25\uff0c\u60a8\u7684\u73b0\u91d1\u4e0d\u8db3");else f.default.show("\u8bf7\u9009\u62e9\u8981\u8fd8\u6b3e\u8d44\u4ea7")}},this._bankLoanView.changeLoanData(this._userInfo),this._bankRefundView.changeLoanData(this._userInfo),this._bankAssetRefundView.changeLoanData(this._userInfo),this.handleKeyboard()},e.prototype.handleKeyboard=function(){var t=this;this._keyboard.onSubmitResult=function(e){10==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u5220\u9664"),0==t._gameController.selectedIndex?t._bankLoanView.updateTotal(e):1==t._gameController.selectedIndex&&t._bankRefundView.updateTotal(e)):11==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u6536\u8d77\u952e\u76d8"),t.hideKeyboard()):(console.log("\u3010\u8f93\u5165\u7ed3\u679c\u3011:",e),0==t._gameController.selectedIndex?t._bankLoanView.updateTotal(e):1==t._gameController.selectedIndex&&t._bankRefundView.updateTotal(e))},this._bankLoanView.onSubmitKeyBoardResult=function(){t.showKeyboard()},this._bankRefundView.onSubmitKeyBoardResult=function(){t.showKeyboard()}},e.prototype.showKeyboard=function(){if(1!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=1;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,fgui.GRoot.inst.height),fgui.GTween.to2(0,fgui.GRoot.inst.height,0,t,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e.prototype.hideKeyboard=function(){if(0!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=0;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,t),fgui.GTween.to2(0,t,0,fgui.GRoot.inst.height,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e.prototype.onHide=function(){this.hideKeyboard()},e.prototype.refreshView=function(){l.default.log("\u5237\u65b0\u6570\u636e")},e.prototype.setUserInfo=function(t){this._userInfo=t,this._userInfo.assetHouseList.forEach(function(t){t.isSelected=!1}),this._userInfo.assetCompanyList.forEach(function(t){t.isSelected=!1}),this._bankLoanView.changeLoanData(this._userInfo),this._bankRefundView.changeLoanData(this._userInfo),this._bankAssetRefundView.changeLoanData(this._userInfo);var e=this;setTimeout(function(){l.default.log("\u5f00\u542f\u6309\u94ae\u529f\u80fd"),e._bankLoanView.touchable=!0,e._bankRefundView.touchable=!0,e._bankAssetRefundView.touchable=!0},3e3),0==this._gameController.selectedIndex&&(l.default.log("\u53d1\u9001\u94f6\u884c\u8d37\u6b3e\u4fe1\u606f"),c.default.emit(u.RoomEventConstant.EMIT_BankLoan))},e.prototype.checkRefundAseet=function(t,e,i,n,o){var s=this,a=t?this._userInfo.loanMyHouse:0,r=e?this._userInfo.loanCar:0,u=i?this._userInfo.loanCreditCard:0,c=0;n.forEach(function(t){var e=s._userInfo.assetHouseList.find(function(e){return e.id===t});e&&(c+=e.loan)});var h=0;o.forEach(function(t){var e=s._userInfo.assetCompanyList.find(function(e){return e.id===t});e&&(h+=e.loan)});var d=a+r+u+c+h,f=this._userInfo.assetCash;return l.default.log("\u5f85\u8fd8\u6b3e\u91d1\u989d\uff1a",d),l.default.log("\u62e5\u6709\u73b0\u91d1\uff1a",f),f-d>=0},e}(fgui.Window);i.GameBankWindow=p;var _=function(t){function e(){var e=t.call(this)||this;return e._month_rate=r.default.bankRate,e.onSubmitResult=null,e.onSubmitKeyBoardResult=null,e._mayLon=0,e}return o(e,t),e.prototype.onConstruct=function(){this._load_limit=this.getChild("n6").asLabel,this._load_rate=this.getChild("n8").asLabel,this._month_interest=this.getChild("n18").asLabel,this._decreaseButton=this.getChild("n13").asButton,this._addButton=this.getChild("n14").asButton,this._sureButton=this.getChild("n16").asButton,this._inputButton=this.getChild("inputButton").asButton,this.changeShowUI()},e.prototype.changeShowUI=function(){this._addButton.onClick(this.onChooseAddClick,this),this._decreaseButton.onClick(this.onChooseDecreaseClick,this),this._sureButton.onClick(this.onChooseSureClick,this),this._inputButton.onClick(this.onChooseInputClick,this)},e.prototype.updateTotal=function(t){var e=a.GameUtils.checBoardNumber(t,this._inputButton.title),i=Number(e);if(!isNaN(i)){var n=i,o=n>this._mayLon?this._mayLon:n;l.default.log("\u3010\u81ea\u5b9a\u4e49\u952e\u76d8\u3011\u6700\u7ec8\u7ed3\u679c:",o),this._inputButton.title=""+o,this.updateMonthInterest(o)}},e.prototype.updateMonthInterest=function(t){var e,i=this._month_rate*((null!=t?t:0)/100);e=Math.ceil(i)>i?i.toFixed(1):i.toFixed(),this._month_interest.text=""+h.default.thousandBitSeparator(e)},e.prototype.onChooseAddClick=function(){var t=Number(this._inputButton.title);if(l.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),isNaN(t))this._inputButton.title="0",this.updateMonthInterest(0);else{var e=t+1e4,i=e>this._mayLon?this._mayLon:e;this._inputButton.title=""+i,this.updateMonthInterest(i)}},e.prototype.onChooseDecreaseClick=function(){var t=Number(this._inputButton.title);if(isNaN(t))this._inputButton.title="0",this.updateMonthInterest(0);else{var e=t-1e4,i=e<=0?0:e;this._inputButton.title=""+i,this.updateMonthInterest(i)}},e.prototype.onChooseSureClick=function(){var t=Number(this._inputButton.title);isNaN(t)||t<=0||this.onSubmitResult&&this.onSubmitResult(t)},e.prototype.changeLoanData=function(t){var e,i,n=null!==(e=t.mayLoan)&&void 0!==e?e:0,o=parseInt(""+(n>0?n:0));this._mayLon=o,this._load_limit.text="\xa5"+h.default.thousandBitSeparator(null!=o?o:0);var s;s=r.default.expectLoan&&r.default.expectLoan>0?r.default.expectLoan>o?o:r.default.expectLoan:o,this._inputButton.title=""+parseInt(""+(null!=s?s:0)),this._load_rate.text=(null!==(i=this._month_rate)&&void 0!==i?i:0)+"%",this.updateMonthInterest(s)},e.prototype.onChooseInputClick=function(){this.onSubmitKeyBoardResult&&this.onSubmitKeyBoardResult()},e}(fgui.GComponent);i.GameBankLoanView=_;var g=function(t){function e(){var e=t.call(this)||this;return e._bankLon=0,e.onSubmitResult=null,e.onSubmitKeyBoardResult=null,e}return o(e,t),e.prototype.onConstruct=function(){this._loan=this.getChild("n2").asLabel,this._decreaseButton=this.getChild("n4").asButton,this._addButton=this.getChild("n5").asButton,this._sureButton=this.getChild("n7").asButton,this._inputButton=this.getChild("inputButton").asButton,this.changeShowUI()},e.prototype.changeShowUI=function(){this._addButton.onClick(this.onChooseAddClick,this),this._decreaseButton.onClick(this.onChooseDecreaseClick,this),this._sureButton.onClick(this.onChooseSureClick,this),this._inputButton.onClick(this.onChooseInputClick,this)},e.prototype.updateTotal=function(t){var e=a.GameUtils.checBoardNumber(t,this._inputButton.title),i=Number(e);if(!isNaN(i)){var n=i>this._bankLon?this._bankLon:i;this._inputButton.title=""+n,l.default.log("\u3010\u81ea\u5b9a\u4e49\u952e\u76d8\u3011\u6700\u7ec8\u7ed3\u679c:",n)}},e.prototype.onChooseAddClick=function(){var t=Number(this._inputButton.title);if(l.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),isNaN(t))this._inputButton.title="0";else{var e=t+1e4,i=e>this._bankLon?this._bankLon:e;this._inputButton.title=""+i}},e.prototype.onChooseDecreaseClick=function(){var t=Number(this._inputButton.title);if(l.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),l.default.log("\u5f53\u524d\u5355\u4f4d:",1e4),isNaN(t))this._inputButton.title="0";else{var e=t-1e4;this._inputButton.title=""+(e<=0?0:e)}},e.prototype.onChooseSureClick=function(){var t=Number(this._inputButton.title);isNaN(t)||t<=0||this.onSubmitResult&&this.onSubmitResult(t)},e.prototype.changeLoanData=function(t){var e,i,n,o,s=null!==(e=t.loanBank)&&void 0!==e?e:0,a=null!==(i=t.assetCash)&&void 0!==i?i:0;this._loan.text="\u5f53\u524d\u6b20\u6b3e \uffe5"+h.default.thousandBitSeparator(null!==(n=t.loanBank)&&void 0!==n?n:0),this._bankLon=t.loanBank,this._inputButton.title=""+(null!==(o=t.loanBank)&&void 0!==o?o:0),s>0?s>a?this._inputButton.title=""+a:s<a&&(this._inputButton.title=""+s):this._inputButton.title="0"},e.prototype.onChooseInputClick=function(){this.onSubmitKeyBoardResult&&this.onSubmitKeyBoardResult()},e}(fgui.GComponent);i.GameBankRefundView=g;var y=function(t){function e(){var e=t.call(this)||this;return e._userInfo=null,e._assetHouseList=[],e._assetCompanyList=[],e.onSubmitResult=null,fgui.UIObjectFactory.setExtension("ui://Game/GameBankAssetRefundList",C),e}return o(e,t),e.prototype.onConstruct=function(){this._personal_house_loan=this.getChild("n3").asCom,this._car_loan=this.getChild("n4").asCom,this._invest_house_loan=this.getChild("n5").asCom,this._company_loan=this.getChild("n6").asCom,this._credit_loan=this.getChild("n7").asCom,this._invest_houseList=this.getChild("n8").asCom,this._invest_companyList=this.getChild("n9").asCom,this._sureButton=this.getChild("n1").asButton,this._sureButton.onClick(this.onChooseSureClick,this),this.changeShowUI()},e.prototype.changeShowUI=function(){this._car_loan.getChild("n1").asLabel.text="\u8d2d\u8f66\u8d37\u6b3e",this._invest_house_loan.getChild("n1").asLabel.text="\u6295\u8d44\u623f\u8d37\u6b3e",this._company_loan.getChild("n1").asLabel.text="\u4f01\u4e1a\u8d37\u6b3e",this._credit_loan.getChild("n1").asLabel.text="\u4fe1\u7528\u5361",this._company_loan.getChild("n2").asLabel.text="",this._invest_house_loan.getChild("n2").asLabel.text="";var t=this;this._houseButton=this._invest_house_loan.getChild("n0").asButton,this._houseButton.onClick(function(){t._houseButton.selected?t._assetHouseList.forEach(function(t){t.isSelected=!0}):t._assetHouseList.forEach(function(t){t.isSelected=!1}),t._invest_houseList.changeLoanData(t._assetHouseList)},this),this._companyButton=this._company_loan.getChild("n0").asButton,this._companyButton.onClick(function(){t._companyButton.selected?t._assetCompanyList.forEach(function(t){t.isSelected=!0}):t._assetCompanyList.forEach(function(t){t.isSelected=!1}),t._invest_companyList.changeLoanData(t._assetCompanyList)},this)},e.prototype.onChooseSureClick=function(){for(var t=this._personal_house_loan.getChild("n0").asButton.selected,e=this._car_loan.getChild("n0").asButton.selected,i=this._credit_loan.getChild("n0").asButton.selected,n=[],o=0,s=this._assetHouseList;o<s.length;o++){var a=s[o];a.isSelected&&n.push(a.id)}for(var r=[],l=0,u=this._assetCompanyList;l<u.length;l++){var c=u[l];c.isSelected&&r.push(c.id)}this.onSubmitResult&&this.onSubmitResult(t,e,i,n,r)},e.prototype.changeLoanData=function(t){var e,i,n;this._userInfo=t;var o=null!==(e=t.loanMyHouse)&&void 0!==e?e:0,s=null!==(i=t.loanCar)&&void 0!==i?i:0,a=null!==(n=t.loanCreditCard)&&void 0!==n?n:0;this._personal_house_loan.getChild("n2").asLabel.text=""+h.default.thousandBitSeparator(o),this._car_loan.getChild("n2").asLabel.text=""+h.default.thousandBitSeparator(s),this._credit_loan.getChild("n2").asLabel.text=""+h.default.thousandBitSeparator(a),this._personal_house_loan.getChild("n0").asButton.selected=!1,this._car_loan.getChild("n0").asButton.selected=!1,this._credit_loan.getChild("n0").asButton.selected=!1;for(var r=[],l=[],u=0,c=t.assetHouseList;u<c.length;u++){var d=c[u];d.loan>0&&(l.push(d),d.isSelected&&r.push(d))}this._assetHouseList=l,this._houseButton.selected=!1;for(var f=[],m=[],p=0,_=t.assetCompanyList;p<_.length;p++){var g=_[p];g.loan>0&&(m.push(g),g.isSelected&&f.push(g))}this._companyButton.selected=!1,this._assetCompanyList=m,this._invest_houseList.changeLoanData(l),this._invest_companyList.changeLoanData(m)},e}(fgui.GComponent);i.GameBankAssetRefundView=y;var C=function(t){function e(){var e=t.call(this)||this;return e._dataArray=null,e.onSubmitResult=null,fgui.UIObjectFactory.setExtension("ui://Game/GameBankAssetRefundCell",b),e}return o(e,t),e.prototype.onConstruct=function(){this._list=this.getChild("n2").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.changeLoanData=function(t){this._dataArray=t,this._list.numItems=this._dataArray.length},e.prototype.renderListItem=function(t,e){var i,n=this._dataArray[t],o=e;o.setName(n.name),o.setNumber(h.default.thousandBitSeparator(null!==(i=n.loan)&&void 0!==i?i:"0")),o.selected=n.isSelected,this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=this._list.childIndexToItemIndex(e),n=this._dataArray[i];n.isSelected=!n.isSelected},e}(fgui.GComponent);i.GameBankAssetRefundListView=C;var b=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._nameLab=this.getChild("n1").asLabel,this._numberLab=this.getChild("n2").asLabel},e.prototype.setNumber=function(t){this._numberLab.text=t},e.prototype.setName=function(t){this._nameLab.text=t},e}(fgui.GButton);i.GameBankAssetRefundCell=b,cc._RF.pop()},{"../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Constant/RoomEventConstant":"RoomEventConstant","../../Cores/EventManager":"EventManager","../../Utils/MathUtil":"MathUtil","../Common/GameKeyboard":"GameKeyboard","../Common/Toast":"Toast"}],GameCacheInfo:[function(t,e,i){"use strict";cc._RF.push(e,"81d9boZ/dlFw62PmjSwvwyE","GameCacheInfo"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameCacheProfile=i.GameCacheInfo=void 0;i.GameCacheInfo=function(){};i.GameCacheProfile=function(){},cc._RF.pop()},{}],GameChatWindow:[function(t,e,i){"use strict";cc._RF.push(e,"a39d54q4JRD84+1Y15uYg70","GameChatWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameChatContentView=i.GameChatLogCell=i.GameChatLogWindow=void 0;var a=t("../../Common/Global"),r=t("../../Common/LogUtil"),l=t("../Common/Toast"),u=cc._decorator,c=u.ccclass,h=(u.property,function(t){function e(){var e=t.call(this)||this;return e.onSubmitResult=null,console.log("constructor"),fgui.UIObjectFactory.setExtension("ui://Game/GameChatLogCell",d),e}return o(e,t),e.prototype.onInit=function(){console.log("onInit"),this.contentPane=fgui.UIPackage.createObject("Game","GameChatLogWindow").asCom,this.makeFullScreen(),this.center(),this.setPivot(.5,.5),this._chatList=this.contentPane.getChild("n0").asList,this._chatList.setVirtual(),this._chatList.itemRenderer=this.renderListItem.bind(this);var t=this.frame.getChild("n2").asButton;t.onClick(this.onCloseClick,this),this.closeButton=t,this._messages&&(this._chatList.numItems=this._messages.length)},e.prototype.renderListItem=function(t,e){var i=this._messages[t],n=e;n.setName(i.sender),n.setTime(i.addTime),n.setContent(i.msg),n.setUser(i.icon)},e.prototype.changeChatLog=function(t){if(console.log("changeChatLog"),console.log("logs:"+t.length),this._messages=t,this._chatList){var e=this._chatList.scrollPane.isBottomMost;this._chatList.numItems=this._messages.length,e&&this._chatList.scrollPane.scrollBottom()}},e.prototype.onCloseClick=function(){this.onSubmitResult&&this.onSubmitResult()},s([c],e)}(fgui.Window));i.GameChatLogWindow=h;var d=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._userView=this.getChild("n1").asLoader,this._nameText=this.getChild("n2").asLabel,this._timeText=this.getChild("n3").asLabel,this._contentText=this.getChild("n4").asLabel},e.prototype.setTime=function(t){this._timeText.text=t},e.prototype.setName=function(t){this._nameText.text=t},e.prototype.setUser=function(t){this._userView.url=t},e.prototype.setContent=function(t){this._contentText.text=t},e}(fgui.GButton);i.GameChatLogCell=d;var f=function(t){function e(){var e=t.call(this)||this;return e.onSubmit=null,e._is_chat_allow=!0,e}return o(e,t),e.prototype.onConstruct=function(){this._chatList=this.getChild("n3").asList,this._chatList.setVirtual(),this._chatList.itemRenderer=this.renderListItem.bind(this),this._messages?this._chatList.numItems=this._messages.length:this._chatList.numItems=0},e.prototype.renderListItem=function(t,e){var i=this._messages[t];e.getChild("n0").asLabel.text=i.content,this._chatList.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.onClickItem=function(t){var e=this._chatList.getChildIndex(t),i=this._chatList.childIndexToItemIndex(e),n=this._messages[i];r.default.log("\u53d1\u9001\u4fe1\u606f:"+n.content);var o=this;setTimeout(function(){o._is_chat_allow=!0},1e4),this._is_chat_allow?(this._is_chat_allow=!1,this.onSubmit&&this.onSubmit(n)):l.default.show("\u6bcf10s\u53ef\u4ee5\u53d1\u9001\u4e00\u6b21\u77ed\u8bed")},e.prototype.changeChatList=function(t){this._messages=t,this._chatList&&(this._chatList.numItems=this._messages.length)},e.prototype.changeTheme=function(){this.getController("gameTheme").selectedIndex=a.default.theme},e}(fgui.GComponent);i.GameChatContentView=f,cc._RF.pop()},{"../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../Common/Toast":"Toast"}],GameChooseModeWindow:[function(t,e,i){"use strict";cc._RF.push(e,"b3eeajxK6BOU4/fef8XJVlV","GameChooseModeWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.GameChooseModeWindow=void 0;var s=t("../../Common/Global"),a=function(t){function e(e){var i=t.call(this)||this;return i._mode=null,i.onSubmitResult=null,i._mode=e,i}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Main","GameChooseModeWindow").asCom,this.makeFullScreen();var t=this.frame.getChild("n2").asButton;this._sureButton=t;var e=this.frame.getChild("n1").asButton;this.closeButton=e,this.center(),this._signLab=this.frame.getChild("n5").asLabel,this._modeController=this.frame.getController("gameMode"),this.setPivot(.5,.5),this.changeShowUI()},e.prototype.changeShowUI=function(){switch(this._sureButton.onClick(this.onSureButtonClick,this),this._mode){case s.GameChooseMode.pk:break;case s.GameChooseMode.primary:this._modeController.selectedIndex=0;break;case s.GameChooseMode.medium:this._signLab.text="\u5956\u52b1"+s.default.grade2Award+"\u4e2a\u77e5\u8bc6\u70b9",this._modeController.selectedIndex=1;break;case s.GameChooseMode.hight:this._signLab.text="\u5956\u52b1"+s.default.grade3Award+"\u4e2a\u77e5\u8bc6\u70b9",this._modeController.selectedIndex=2}},e.prototype.onSureButtonClick=function(){this.hide(),this.onSubmitResult&&this.onSubmitResult(1)},e}(fgui.Window);i.GameChooseModeWindow=a,cc._RF.pop()},{"../../Common/Global":"Global"}],GameData:[function(t,e,i){"use strict";cc._RF.push(e,"53f98XqXK9GI7Wn/Kl9kpwS","GameData"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GameFlow:[function(t,e,i){"use strict";cc._RF.push(e,"13e051zlF9MraUeK+uvpjAw","GameFlow"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameFlow=void 0;i.GameFlow=function(){},cc._RF.pop()},{}],GameHudView:[function(t,e,i){"use strict";cc._RF.push(e,"738bfwFw7JBCo2667mAknAB","GameHudView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.GameHudView=void 0;var s=cc._decorator,a=(s.ccclass,s.property,function(t){function e(e,i,n){void 0===n&&(n=0);var o=t.call(this)||this;return o.onSubmitBlock=null,o._title=null,o._msg=null,o._type=0,o._msg=i,o._title=e,o._type=n,o}return o(e,t),e.show=function(t,i,n,o){void 0===n&&(n=0);var s=new e(t,i,n);s.show(),s.onSubmitBlock=o||null},e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Basic","GameHudView").asCom,this.makeFullScreen(),this.center(),this.contentPane.getChild("n1").asLabel.text=this._msg,this.frame.getController("c1").selectedIndex=this._type,this.frame.getChild("title").asLabel.text=this._title,this.frame.getChild("n3").onClick(this.onChooseSureClick,this),this.frame.getChild("n2").onClick(this.onChooseCancelClick,this)},e.prototype.onChooseSureClick=function(){this.hide(),this.onSubmitBlock&&this.onSubmitBlock()},e.prototype.onChooseCancelClick=function(){this.hide()},e}(fgui.Window));i.GameHudView=a,cc._RF.pop()},{}],GameIncidentsWindow:[function(t,e,i){"use strict";cc._RF.push(e,"b4144Wdz8dJLJUv6f/otWGW","GameIncidentsWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.GameTradeBiddingActionWindow=i.GameTradeTransferActionWindow=i.GameTradetLoanActionWindow=i.IncidentAssetSaleOtherCell=i.GameTradeAssetSaleOtherActionWindow=i.IncidentAssetSaleCell=i.GameTradeAssetSaleActionWindow=i.GameTradeStockBuyActionWindow=i.IncidentStockNumCell=i.IncidentStockItemCell=i.GameTradeStockSaleActionWindow=i.GameTradeFutureActionWindow=i.IncidentExponentBearishCell=i.GameTradeExponentActionWindow=i.GameTradeInvestActionWindow=i.InvestActionType=i.GameTradeInvestCompanyBiddingWindow=i.GameTradeInvestHouseBiddingWindow=i.GameTradeStockEquityBiddingWindow=i.GameTradeFixationBiddingWindow=i.IncidentServiceMode=i.GameTradeFuturesWindow=i.GameTradeSpeculateWindow=i.GameTradeStockEquityWindow=i.GameTradeInvestChildInfoView=i.GameTradeInvestHouseWindow=i.GameTradeInvestCompanyWindow=i.GameTradeStockWindow=i.GameTradeFixationWindow=i.GameTradeWindow=i.GameMarketNewsWindow=i.GameEpisodeWindow=i.GameRaiseWindow=i.GameUnemploymentWindow=i.GameChildWindow=i.GameSkillWindow=void 0;var s=t("../../Common/Util"),a=t("../../Common/GameResourceUtil"),r=t("../Common/Toast"),l=t("../../Utils/MathUtil"),u=t("../../Common/LogUtil"),c=t("../../Common/Global"),h=t("../Common/GameKeyboard"),d=t("../../Common/GameUtils"),f=t("../../Cores/EventManager"),m=t("../../Constant/RoomEventConstant"),p=cc._decorator,_=(p.ccclass,p.property,function(t){function e(e,i,n){var o=t.call(this)||this;return o._isSelf=!1,o._hadStudy=!1,o.onSubmitResult=null,o._hadStudy=i,o._isSelf=n,o._skill=e,o}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentSkillComponent").asCom,this.center(),this.setPivot(.5,.5),this.frame.text="\u6280\u80fd\u6807\u9898";var t=this.contentPane.getChild("n3").asCom;this._pricecLab=t.getChild("n1").asLabel,this._pricecLab.text="\u4ef7\u683c \xa510000000",this._descLab=this.contentPane.getChild("n4").asLabel,this._sureButton=this.contentPane.getChild("n0").asButton,this._studyButton=this.contentPane.getChild("n1").asButton,this._noStudyButton=this.contentPane.getChild("n2").asButton,this._eventGroup=this.contentPane.getChild("n5").asGroup,this._anandonButton=this.contentPane.getChild("n6").asButton,this.contentPane.getController("isMySelf").selectedIndex=this._isSelf?1:0,this._anandonButton.onClick(this.onChooseCloseClick,this),this._studyButton.onClick(this.onChooseStudyClick,this),this._noStudyButton.onClick(this.onChooseAbandonClick,this),this._sureButton.onClick(this.onChooseAbandonClick,this),this.frame.getChild("n3").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentOther(a.GameIncidentResource.Skill,this._skill.imgType),this.onShownUI()},e.prototype.onShownUI=function(){var t;this.frame.text=this._skill.name,this._descLab.text=this._skill.depict,this._pricecLab.text="\u4ef7\u683c \xa5"+l.default.thousandBitSeparator(null!==(t=this._skill.price)&&void 0!==t?t:0),this._isSelf?this._hadStudy?(this._descLab.text="\u4f60\u5df2\u62e5\u6709\u6709\u6b64\u9879\u6280\u80fd",this._studyButton.visible=!1,this._noStudyButton.visible=!1,this._anandonButton.visible=!1,this._sureButton.visible=!0,this.closeButton=this._sureButton):(this._studyButton.visible=!0,this._noStudyButton.visible=!0,this._anandonButton.visible=!1,this._sureButton.visible=!1,this.closeButton=this._noStudyButton):(this.changeButtonStatus(!1),this.closeButton=this._anandonButton)},e.prototype.changeButtonStatus=function(t){this._anandonButton.visible=!t,this._eventGroup.visible=t},e.prototype.onChooseStudyClick=function(){this.onSubmitResult(0)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult(1)},e.prototype.onChooseCloseClick=function(){this.onSubmitResult(2)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e}(fgui.Window));i.GameSkillWindow=_;var g=function(t){function e(e,i){var n=t.call(this)||this;return n._max_limit=!1,n._isSelf=!1,n.onSubmitResult=null,n._max_limit=e,n._isSelf=i,n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentPinkComponent").asCom,this.center(),this.setPivot(.5,.5),this.frame.text="\u751f\u5b69\u5b50",this._descLab=this.contentPane.getChild("n4").asLabel;var t=this.contentPane.getChild("n0").asButton;this.contentPane.getChild("n3").asCom.visible=!1,this.contentPane.getChild("n1").asButton.visible=!1,this.contentPane.getChild("n2").asButton.visible=!1;var e=this.contentPane.getChild("n5").asButton;this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentOther(a.GameIncidentResource.Child,-1),t.onClick(this.onChooseSureClick,this),e.onClick(this.onChooseCloseClick,this),this._isSelf?(t.visible=!0,e.visible=!1,this._descLab.text=this._max_limit?"\u4eb2\uff0c\u518d\u751f\u5c31\u8d85\u6807\u55bd\uff5e":"\u606d\u559c\u4f60\uff01\u5bb6\u5ead\u591a\u4e86\u4e00\u4e2a\u5c0f\u5b9d\u8d1d\uff0c\n\u9700\u8981\u589e\u52a0\u5b69\u5b50\u7684\u6708\u652f\u51fa",this.closeButton=t):(t.visible=!1,e.visible=!0,this._descLab.text=this._max_limit?"\u4eb2\uff0c\u518d\u751f\u5c31\u8d85\u6807\u55bd\uff5e":"\u606d\u559c\u8be5\u73a9\u5bb6\uff01\u5bb6\u5ead\u591a\u4e86\u4e00\u4e2a\u5c0f\u5b9d\u8d1d\uff0c\n\u9700\u8981\u589e\u52a0\u5b69\u5b50\u7684\u6708\u652f\u51fa",this.closeButton=e)},e.prototype.onShown=function(){},e.prototype.onChooseSureClick=function(){this.onSubmitResult(1)},e.prototype.onChooseCloseClick=function(){this.onSubmitResult(2)},e}(fgui.Window);i.GameChildWindow=g;var y=function(t){function e(e,i){var n=t.call(this)||this;return n.onSubmitResult=null,n._isSelf=e,n._depict=i,n}return o(e,t),e.prototype.onInit=function(){var t,e,i=fgui.UIPackage.createObject("Game","IncidentUnemploymentComponent").asCom;this.contentPane=i;var n=this.contentPane.getChild("n0").asButton,o=this.contentPane.getChild("n1").asButton;this._descLab=this.contentPane.getChild("n4").asLabel;var s=this.contentPane.getChild("n3").asCom;s.getChild("n0").asGraph.color=cc.color(166,178,181),this._titleLab=s.getChild("n1").asLabel,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentOther(a.GameIncidentResource.Lose,-1),this.contentPane.getController("isMySelf").selectedIndex=this._isSelf?1:0,n.onClick(this.onChooseSureClick,this),o.onClick(this.onChooseCloseClick,this),this.center(),this.setPivot(.5,.5),this.frame.text="\u5931\u4e1a",this.closeButton=this._isSelf?n:o,this._isSelf?(this._titleLab.text=null!==(t=this._depict)&&void 0!==t?t:"\u6263\u9664\u4e09\u4e2a\u6708\u5de5\u8d44\u6536\u5165",this._descLab.text="\u7531\u4e8e\u6240\u5728\u5355\u4f4d\u6548\u76ca\u4e0d\u597d\uff0c\n\u5bfc\u81f4\u4f60\u5931\u4e1a\u4e86"):(this._titleLab.text=null!==(e=this._depict)&&void 0!==e?e:"\u6263\u9664\u4e09\u4e2a\u6708\u5de5\u8d44\u6536\u5165",this._descLab.text="\u7531\u4e8e\u6240\u5728\u5355\u4f4d\u6548\u76ca\u4e0d\u597d\uff0c\n\u5bfc\u81f4\u8be5\u73a9\u5bb6\u5931\u4e1a\u4e86")},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onChooseSureClick=function(){this.onSubmitResult(1)},e.prototype.onChooseCloseClick=function(){this.onSubmitResult(2)},e}(fgui.Window);i.GameUnemploymentWindow=y;var C=function(t){function e(e,i,n){var o=t.call(this)||this;return o.onSubmitResult=null,o._isRaise=e,o._isSelf=n,o._depict=i,o}return o(e,t),e.prototype.onInit=function(){var t,e,i,n;if(this._isRaise){this.contentPane=fgui.UIPackage.createObject("Game","IncidentRaiseingComponent").asCom,i=this.contentPane.getChild("n1").asButton,n=this.contentPane.getChild("n2").asButton,i.onClick(this.onChooseSureClick,this);var o=this.contentPane.getChild("n3").asCom;o.getChild("n0").asGraph.color=cc.color(255,117,117),this._pricecLab=o.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n4").asLabel,this._pricecLab.text=null!==(t=this._depict)&&void 0!==t?t:"\u5de5\u8d44\u6536\u5165\u7ffb\u500d",this._isSelf?this._descLab.text="\u606d\u559c\u4f60\u5347\u804c\u4e86\uff01\u4f60\u5728\u672c\u804c\u5de5\u4f5c\n\u4e0a\u7684\u8ba4\u771f\u548c\u52aa\u529b\u6709\u4e86\u56de\u62a5\uff01":this._descLab.text="\u606d\u559c\u8be5\u73a9\u5bb6\u5347\u804c\u4e86\uff01\u8be5\u73a9\u5bb6\u5728\u672c\u804c\n\u5de5\u4f5c\u4e0a\u7684\u8ba4\u771f\u548c\u52aa\u529b\u6709\u4e86\u56de\u62a5\uff01",this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentOther(a.GameIncidentResource.Raises,-1)}else this.contentPane=fgui.UIPackage.createObject("Game","IncidentRaiseComponent").asCom,this._pricecLab=this.contentPane.getChild("n0").asLabel,this._isSelf?this._pricecLab.text=null!==(e=this._depict)&&void 0!==e?e:"\u60a8\u5df2\u8fbe\u5230\u804c\u4e1a\u5dc5\u5cf0\uff01":this._pricecLab.text="\u8be5\u73a9\u5bb6\u5df2\u8fbe\u5230\u804c\u4e1a\u5dc5\u5cf0\uff01",i=this.contentPane.getChild("n1").asButton,n=this.contentPane.getChild("n2").asButton,i.onClick(this.onChooseSureClick,this);this.center(),this.setPivot(.5,.5),this.frame.text="\u5347\u804c\u52a0\u85aa",i.visible=this._isSelf,n.visible=!this._isSelf,this.closeButton=this._isSelf?i:n},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult()},e}(fgui.Window);i.GameRaiseWindow=C;var b=function(t){function e(e,i){var n=t.call(this)||this;return n.onSubmitResult=null,n._episode=e,n._isSelf=i,n}return o(e,t),e.prototype.onInit=function(){1==this._episode.color?(this._incidentRedComponent(),this.frame.text="\u751f\u6d3b\u5c0f\u63d2\u66f2"):2==this._episode.color?(this._incidentPinkComponent(),this.frame.text="\u751f\u6d3b\u5c0f\u63d2\u66f2"):3==this._episode.color?(this._incidentYellowComponent(),this.frame.text="\u751f\u6d3b\u5c0f\u63d2\u66f2"):4==this._episode.color&&(1==this._episode.isCredit?this._incidentBruiseComponent():(this._incidentGrayComponent(),this.frame.text="\u751f\u6d3b\u5c0f\u63d2\u66f2")),this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentOther(a.GameIncidentResource.Episode,this._episode.imgType),this.center(),this.setPivot(.5,.5)},e.prototype.onShown=function(){},e.prototype._incidentRedComponent=function(){var t;this.contentPane=fgui.UIPackage.createObject("Game","IncidentRedComponent").asCom;var e=this.contentPane.getChild("n1").asButton,i=this.contentPane.getChild("n2").asButton,n=this.contentPane.getChild("n3").asCom;n.getChild("n0").asGraph.color=cc.color(255,117,117),this._pricecLab=n.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n4").asLabel,e.onClick(this.onChooseCashPayClick,this),i.onClick(this.onChooseCloseClick,this),this._descLab.text=this._episode.depict2,this._pricecLab.text="\u652f\u51fa \xa5"+l.default.thousandBitSeparator(null!==(t=this._episode.price)&&void 0!==t?t:0),e.visible=this._isSelf,i.visible=!this._isSelf,this._isSelf||(this.closeButton=i)},e.prototype._incidentPinkComponent=function(){var t;this.contentPane=fgui.UIPackage.createObject("Game","IncidentPinkComponent").asCom,this.contentPane.getChild("n0").asButton.visible=!1;var e=this.contentPane.getChild("n1").asButton;e.visible=!1;var i=this.contentPane.getChild("n2").asButton;i.visible=!1;var n=this.contentPane.getChild("n5").asButton;n.visible=!1;var o=this.contentPane.getChild("n3").asCom;o.getChild("n0").asGraph.color=cc.color(255,157,190),this._pricecLab=o.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n4").asLabel,e.onClick(this.onChooseCashPayClick,this),i.onClick(this.onChooseCreditPayClick,this),n.onClick(this.onChooseCloseClick,this),this._descLab.text=this._episode.depict2,this._pricecLab.text="\u652f\u51fa \xa5"+l.default.thousandBitSeparator(null!==(t=this._episode.price)&&void 0!==t?t:0),this._isSelf?1==this._episode.isCredit?(e.visible=!0,i.visible=!0):(e.visible=!0,i.visible=!1,e.setPosition(.5*(fgui.GRoot.inst.width-e.width),this.frame.y+this.frame.height-e.height-36)):n.visible=!0},e.prototype._incidentYellowComponent=function(){var t;this.contentPane=fgui.UIPackage.createObject("Game","IncidentYellowComponent").asCom;var e=this.contentPane.getChild("n1").asButton,i=this.contentPane.getChild("n2").asButton,n=this.contentPane.getChild("n3").asCom;n.getChild("n0").asGraph.color=cc.color(255,213,3),this._pricecLab=n.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n4").asLabel,this._descLab.text=this._episode.depict2,this._pricecLab.text="\u652f\u51fa \xa5"+l.default.thousandBitSeparator(null!==(t=this._episode.price)&&void 0!==t?t:0),e.onClick(this.onChooseCashPayClick,this),i.onClick(this.onChooseCloseClick,this),e.visible=this._isSelf,i.visible=!this._isSelf,this._isSelf||(this.closeButton=i)},e.prototype._incidentGrayComponent=function(){var t,e=fgui.UIPackage.createObject("Game","IncidentGrayComponent").asCom;this.contentPane=e;var i=this.contentPane.getChild("n1").asButton;i.visible=!0;var n=this.contentPane.getChild("n2").asButton;n.visible=!1,this._descLab=this.contentPane.getChild("n4").asLabel;var o=this.contentPane.getChild("n3").asCom;o.getChild("n0").asGraph.color=cc.color(166,178,181),this._pricecLab=o.getChild("n1").asLabel,this._pricecLab.text="\u4ef7\u683c \xa5"+this._episode.price,this._descLab.text=this._episode.depict1,i.visible=this._isSelf,n.visible=!this._isSelf,this._isSelf||(this.closeButton=n),i.onClick(this.onChooseCashPayClick,this),n.onClick(this.onChooseCloseClick,this),this._descLab.text=this._episode.depict2,this._pricecLab.text="\u652f\u51fa \xa5"+l.default.thousandBitSeparator(null!==(t=this._episode.price)&&void 0!==t?t:0)},e.prototype._incidentBruiseComponent=function(){var t,e=fgui.UIPackage.createObject("Game","IncidentBruiseComponent").asCom;this.contentPane=e;var i=this.contentPane.getChild("n1").asButton;i.visible=!1;var n=this.contentPane.getChild("n2").asButton;n.visible=!0;var o=this.contentPane.getChild("n5").asButton;o.visible=!1,this._descLab=this.contentPane.getChild("n4").asLabel;var s=this.contentPane.getChild("n3").asCom;s.getChild("n0").asGraph.color=cc.color(166,178,181),this._pricecLab=s.getChild("n1").asLabel,i.visible=this._isSelf,n.visible=this._isSelf,o.visible=!this._isSelf,this._isSelf||(this.closeButton=o),i.onClick(this.onChooseCashPayClick,this),n.onClick(this.onChooseCreditPayClick,this),o.onClick(this.onChooseCloseClick,this),this._descLab.text=this._episode.depict2,this._pricecLab.text=this._episode.depict1+" \xa5"+l.default.thousandBitSeparator(null!==(t=this._episode.price)&&void 0!==t?t:0)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onChooseCashPayClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseCreditPayClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseCloseClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e}(fgui.Window);i.GameEpisodeWindow=b;var v=function(t){function e(e,i,n){var o=t.call(this)||this;return o._assetArray=[],o.onSubmitResult=null,o._marketVo=e,o._isSelf=i,o._userInfo=n,o}return o(e,t),e.prototype.onInit=function(){var t=fgui.UIPackage.createObject("Game","IncidentGreenComponent").asCom;this.contentPane=t,this._modeController=t.getController("c1"),this._sureButton=this.contentPane.getChild("n0").asButton,this._abandonButton=this.contentPane.getChild("n1").asButton,this._saleButton=this.contentPane.getChild("n2").asButton,this._namecCom=this.contentPane.getChild("n3").asCom,this._pricecLab=this.contentPane.getChild("n5").asLabel,this._close_Button=this.contentPane.getChild("n8").asButton,this._typeLoader=this.frame.getChild("n5").asLoader,this._skillImage=this.frame.getChild("n7").asImage,this._namecCom.getChild("n0").asGraph.color=cc.color(50,232,182),this._nameLab=this._namecCom.getChild("n1").asLabel,this.center(),this.frame.text="\u5e02\u573a\u8baf\u606f",this.setPivot(.5,.5),this.initChild()},e.prototype.initChild=function(){if(1==this._marketVo.marketType){this._descLab=this.contentPane.getChild("n4").asLabel;var t=this._marketVo.object,e=d.GameUtils.extractMarketRequestBuy(t,this._userInfo),i=!1;if(4==t.bigType)for(var n=0,o=e;n<o.length;n++)if(3==o[n].type){i=!0;break}this._assetArray=e,this._modeController.selectedIndex=i?1:0,this.initRequestBuy(!i,t,e),this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentMarket(a.GameIncidentMarket.RequestBuy,t.imgType)}else if(2==this._marketVo.marketType){this._descLab=this.contentPane.getChild("n12").asLabel,this._modeController.selectedIndex=2;var s=this._marketVo.object;this.initGoodNews(s),this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentMarket(a.GameIncidentMarket.GoodsNews,s.type)}else if(3==this._marketVo.marketType){this._descLab=this.contentPane.getChild("n13").asLabel,this._modeController.selectedIndex=3;for(var r=this._marketVo.object,l=!1,u=0,c=this._userInfo.skillList;u<c.length;u++)if(c[u].type==r.skillType&&r.skillType>0){l=!0;break}this.initBadNews(l,r),this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentMarket(a.GameIncidentMarket.BadNews,r.type)}},e.prototype.initRequestBuy=function(t,e,i){var n,o;if(u.default.log("\u6c42\u8d2d"),this._skillImage.visible=!1,t)if(null==i||0==i.length)if(this._isSelf){this._saleButton.visible=!1,this._close_Button.visible=!0,this._abandonButton.visible=!1,this._close_Button.setPosition(.5*(fgui.GRoot.inst.width-this._close_Button.width),this.frame.y+this.frame.height-this._close_Button.height-36),this.closeButton=this._close_Button;for(var s=!1,a=0,r=c.default.roomInfo.userInfoList;a<r.length;a++){var h=r[a];if(0!=h.status)break;var f=d.GameUtils.handleMarketRequestBuy(e,h);if(this._userInfo.userId!==h.userId&&f){console.log("\u73a9\u5bb6"+h.nickname+"\u62e5\u6709\u8be5\u6c42\u8d2d\u8d44\u4ea7"),s=!0;break}}s||this._close_Button.onClick(this.onChooseAbandonClick,this)}else this._saleButton.visible=!1,this._close_Button.visible=!0,this._abandonButton.visible=!1,this._close_Button.setPosition(.5*(fgui.GRoot.inst.width-this._close_Button.width),this.frame.y+this.frame.height-this._close_Button.height-36),this.closeButton=this._close_Button;else this._saleButton.visible=!0,this._close_Button.visible=!1,this._abandonButton.visible=!0,this._saleButton.setPosition(.5*fgui.GRoot.inst.width-18-this._saleButton.width,this.frame.y+this.frame.height-this._saleButton.height-36),this._abandonButton.setPosition(.5*fgui.GRoot.inst.width+18,this.frame.y+this.frame.height-this._abandonButton.height-36),this.closeButton=this._abandonButton,this._saleButton.title="\u51fa\u552e("+i.length+")",this._abandonButton.onClick(this.onChooseAbandonClick,this),this._saleButton.onClick(this.onChooseSaleClick,this);else this._saleButton.title="\u51fa\u552e("+i.length+")",this._saleButton.visible=!0,this._saleButton.setPosition(.5*(fgui.GRoot.inst.width-this._saleButton.width),this.frame.y+this.frame.height-this._saleButton.height-36),this._saleButton.onClick(this.onChooseSaleClick,this),this.closeButton=this._saleButton;null==e.priceUnit?this._pricecLab.text="\uffe5"+l.default.thousandBitSeparator(null!==(n=e.totalPrice)&&void 0!==n?n:0):this._pricecLab.text="\uffe5"+l.default.thousandBitSeparator(null!==(o=e.totalPrice)&&void 0!==o?o:0)+e.priceUnit,this._nameLab.text=e.name,this._descLab.text=e.depict},e.prototype.initBadNews=function(t,e){this._skillImage.visible=t,this._descLab.text=e.depict,this._isSelf?(this._sureButton.visible=!0,this._close_Button.visible=!1,this._sureButton.setPosition(.5*(fgui.GRoot.inst.width-this._sureButton.width),this.frame.y+this.frame.height-this._sureButton.height-36),this._sureButton.onClick(this.onChooseAbandonClick,this),this.closeButton=this._sureButton):(this._sureButton.visible=!1,this._close_Button.visible=!0,this.closeButton=this._close_Button,this._close_Button.setPosition(.5*(fgui.GRoot.inst.width-this._close_Button.width),this.frame.y+this.frame.height-this._close_Button.height-36))},e.prototype.initGoodNews=function(t){this._skillImage.visible=!1,u.default.log("\u5229\u597d"),this._nameLab.text=t.name,this._descLab.text=t.depict,this._isSelf?(this._sureButton.visible=!0,this._close_Button.visible=!1,this._sureButton.setPosition(.5*(fgui.GRoot.inst.width-this._sureButton.width),this.frame.y+this.frame.height-this._sureButton.height-36),this._sureButton.onClick(this.onChooseAbandonClick,this),this.closeButton=this._sureButton):(this._sureButton.visible=!1,this._close_Button.visible=!0,this.closeButton=this._close_Button,this.closeButton.setPosition(.5*(fgui.GRoot.inst.width-this._close_Button.width),this.frame.y+this.frame.height-this._close_Button.height-36))},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onChooseSaleClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e}(fgui.Window);i.GameMarketNewsWindow=v;var w=function(t){function e(){var e=t.call(this)||this;return e.onSubmitResult=null,e}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentChanceComponet").asCom,this._smallButton=this.contentPane.getChild("n0").asButton,this._bigButton=this.contentPane.getChild("n1").asButton,this._bigButton.visible=!1,this._smallButton.setPivot(.5,.5),this._bigButton.setPivot(.5,.5),this.center(),this.setPivot(.5,.5),this._smallButton.onClick(this.onSmallClick,this),this._bigButton.onClick(this.onBigClick,this)},e.prototype.doShowAnimation=function(){fgui.GTween.to2(.5,.5,1,1,.25).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShownBig,this)},e.prototype.onShownBig=function(){this._bigButton.visible=!0,this._bigButton.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.25).setTarget(this._bigButton,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onShown=function(){},e.prototype.onBigClick=function(){this.onSubmitResult(2),this.hide()},e.prototype.onSmallClick=function(){this.onSubmitResult(1),this.hide()},e}(fgui.Window);i.GameTradeWindow=w;var S=function(t){function e(e,i){var n=t.call(this)||this;return n.onSubmitResult=null,n._isSelf=e,n._article=i,n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentFixationComponent").asCom,this._buyButton=this.contentPane.getChild("n4").asButton,this._transferButton=this.contentPane.getChild("n5").asButton,this._abondonButton=this.contentPane.getChild("n6").asButton;var t=this.contentPane.getChild("n1").asCom;t.getChild("n0").asGraph.color=cc.color(173,152,255),this._pricecLab=t.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n2").asLabel,this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Article,this._article.type),this.contentPane.getController("isMySelf").selectedIndex=this._isSelf?1:0},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onShown=function(){},e.prototype.changeShowUI=function(){var t,e,i;this._buyButton.onClick(this.onChooseBuyClick,this),this._transferButton.onClick(this.onChooseTransferClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),1==this._article.type?(this.frame.text="\u9ec4\u91d1\u6295\u8d44",this._pricecLab.text=this._article.name+" \xa5"+l.default.thousandBitSeparator(null!==(t=this._article.price)&&void 0!==t?t:0)+"/\u6839"):2==this._article.type?(this.frame.text="\u90ae\u7968\u6295\u8d44",this._pricecLab.text=this._article.name+" \xa5"+l.default.thousandBitSeparator(null!==(e=this._article.price)&&void 0!==e?e:0)+"/\u5f20"):3==this._article.type&&(this.frame.text="\u53e4\u8463\u6295\u8d44",this._pricecLab.text=this._article.name+" \xa5"+l.default.thousandBitSeparator(null!==(i=this._article.price)&&void 0!==i?i:0)+"/\u4ef6"),this._descLab.text=this._article.depict},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseTransferClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e}(fgui.Window);i.GameTradeFixationWindow=S;var k=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s._skillList=[],s.onSubmitResult=null,s._hadStock=n,s._stock=i,s._skillList=o,s._isSelf=e,s}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentStockComponent").asCom;var t=this.contentPane.getChild("n4").asButton;t.onClick(this.onBuyButtonClick,this),this._buyButton=t;var e=this.contentPane.getChild("n5").asButton;e.onClick(this.onSaleButtonClick,this),this._saleButton=e;var i=this.contentPane.getChild("n6").asButton;i.onClick(this.onAbandonButtonClick,this),this._abondonButton=i;var n=this.contentPane.getChild("n9").asButton;n.onClick(this.onCloseButtonClick,this),this._cancelButton=n;var o=this.contentPane.getChild("n1").asCom;o.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=o.getChild("n1").asLabel,this._pricecLab=this.contentPane.getChild("n2").asLabel,this._infoView=this.contentPane.getChild("n7").asCom,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Stock,this._stock.stockType),this._skillView=this.frame.getChild("n3").asCom,this.center(),this.changeShowUI(),this.setPivot(.5,.5)},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){var t,e,i,n,o=this;this._hadStock?(this._saleButton.visible=!0,this._stock.skillType>0&&(null==(n=this._skillList.find(function(t){return t.type===o._stock.skillType}))||null==n)?(u.default.log("\u6ca1\u6709\u8be5\u6280\u80fd"),3===this._stock.type?this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60Reits\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70":this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u80a1\u7968\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this._skillView.visible=!0,this._buyButton.visible=!1,this._saleButton.setPosition(.5*fgui.GRoot.inst.width-this._saleButton.width-20,this.frame.y+this.frame.height-this._saleButton.height-26),this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26)):(this._skillView.visible=!1,this._isSelf?this._buyButton.visible=!0:(this._buyButton.visible=!1,this._saleButton.setPosition(.5*fgui.GRoot.inst.width-this._saleButton.width-20,this.frame.y+this.frame.height-this._saleButton.height-26),this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26)))):(this._saleButton.visible=!1,this._stock.skillType>0&&(null==(n=this._skillList.find(function(t){return t.type===o._stock.skillType}))||null==n)?(u.default.log("\u6ca1\u6709\u8be5\u6280\u80fd"),3===this._stock.type?this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60Reits\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70":this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u80a1\u7968\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this._skillView.visible=!0,this._buyButton.visible=!1,this._isSelf?this._abondonButton.setPosition(.5*(fgui.GRoot.inst.width-this._abondonButton.width),this.frame.y+this.frame.height-this._abondonButton.height-26):(this._abondonButton.visible=!1,this._cancelButton.visible=!0)):(this._skillView.visible=!1,this._isSelf?(this._buyButton.setPosition(.5*fgui.GRoot.inst.width-this._buyButton.width-20,this.frame.y+this.frame.height-this._buyButton.height-26),this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26)):(this._abondonButton.visible=!1,this._cancelButton.visible=!0,this._buyButton.visible=!1))),this._pricecLab.text="\xa5"+l.default.thousandBitSeparator(null!==(t=this._stock.price)&&void 0!==t?t:0)+"/\u6bcf\u80a1",this._nameLab.text=this._stock.name,this._infoView.getChild("n2").asLabel.text="\uffe5"+l.default.thousandBitSeparator(null!==(e=this._stock.minPrice)&&void 0!==e?e:0)+"~\uffe5"+l.default.thousandBitSeparator(null!==(i=this._stock.maxPrice)&&void 0!==i?i:0)+"/\u6bcf\u80a1",this._infoView.getChild("n3").asLabel.text=(100*this._stock.dividendRate).toFixed(2)+"%"},e.prototype.onSaleButtonClick=function(){this.onSubmitResult(2,this._stock)},e.prototype.onAbandonButtonClick=function(){this.onSubmitResult(3,this._stock)},e.prototype.onBuyButtonClick=function(){this.onSubmitResult(1,this._stock)},e.prototype.onCloseButtonClick=function(){this.hide()},e}(fgui.Window);i.GameTradeStockWindow=k;var I=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s._skillList=[],s._companyList=[],s.onSubmitResult=null,s._isSelf=e,s._business=i,s._skillList=n,s._companyList=o,fgui.UIObjectFactory.setExtension("ui://Game/IncidentTradeDataView",L),s}return o(e,t),e.prototype.onInit=function(){var t;1==this._business.type?(this.contentPane=fgui.UIPackage.createObject("Game","IncidentSmallCompanyComponent").asCom,(t=this.contentPane.getChild("n1").asCom).getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=t.getChild("n1").asLabel):(this.contentPane=fgui.UIPackage.createObject("Game","IncidentTadeBigCompanyComponent").asCom,(t=this.contentPane.getChild("n1").asCom).getChild("n0").asGraph.color=cc.color(179,77,255),this._nameLab=t.getChild("n1").asLabel),this._myController=this.contentPane.getController("isMySelf"),this._myController.selectedIndex=this._isSelf?1:0;var e=this.contentPane.getChild("n4").asButton;this._buyButton=e;var i=this.contentPane.getChild("n5").asButton;this._transferButton=i;var n=this.contentPane.getChild("n6").asButton;this._abondonButton=n;var o=this.contentPane.getChild("n8").asButton;this._sureButton=o;var s=this.contentPane.getChild("n9").asButton;this._pricecLab=this.contentPane.getChild("n2").asLabel,this._descLab=this.contentPane.getChild("n4").asLabel,this._dataView=this.contentPane.getChild("n7").asCom;var r=this.frame.getChild("n3").asCom;this._skillView=r,r.visible=!1,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Company,this._business.smallType),this._isSelf?(this._abondonButton=n,this.closeButton=n):this.closeButton=s,this.center(),this.changeShowUI(),this.setPivot(.5,.5)},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){var t,e,i,n,o,s,a=this;if(this._buyButton.onClick(this.onChooseBuyClick,this),this._transferButton.onClick(this.onChooseTransferClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),this._sureButton.onClick(this.onChooseSureClick,this),this._pricecLab.text="\u603b\u4ef7  \uffe5"+l.default.thousandBitSeparator(null!==(t=this._business.totalPrice)&&void 0!==t?t:0),this._nameLab.text=this._business.name,this._dataView.setFirstPrice(""+l.default.thousandBitSeparator(null!==(e=this._business.firstPrice)&&void 0!==e?e:0)),this._dataView.setLone(""+l.default.thousandBitSeparator(null!==(i=this._business.loan)&&void 0!==i?i:0)),this._dataView.setMonthRepay(""+l.default.thousandBitSeparator(null!==(n=this._business.monthRepay)&&void 0!==n?n:0)),this._dataView.setMonthIncome(""+l.default.thousandBitSeparator(null!==(o=this._business.monthIncome)&&void 0!==o?o:0)),this._dataView.setMonthCashFlow(""+l.default.thousandBitSeparator(null!==(s=this._business.monthCashFlow)&&void 0!==s?s:0)),this._dataView.setYearIncomeRate(""+this._business.yearIncomeRate),this._dataView.setType(1),this._business.skillType>0&&null==this._skillList.find(function(t){return t.type===a._business.skillType}))return this._skillView.visible=!0,this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u4f01\u4e1a\u7ecf\u8425\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",void(this._isSelf&&(this._buyButton.visible=!1,this._sureButton.visible=!1,this._transferButton.setPosition(.5*fgui.GRoot.inst.width-this._transferButton.width-20,this.frame.y+this.frame.height-this._transferButton.height-26),this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26)));this._companyList.find(function(t){return t.smallType===a._business.smallType})?(this._skillView.visible=!0,this._skillView.getChild("n1").asLabel.text="\u4f60\u5df2\u62e5\u6709\u8be5\u4f01\u4e1a",this._isSelf&&(this._buyButton.visible=!1,this._sureButton.visible=!1,this._transferButton.setPosition(.5*fgui.GRoot.inst.width-this._transferButton.width-20,this.frame.y+this.frame.height-this._transferButton.height-26),this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26))):this._isSelf&&this.changeEventStatus(!0)},e.prototype.changeEventStatus=function(t){this._buyButton.visible=t,this._sureButton.visible=!t},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseTransferClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(4)},e}(fgui.Window);i.GameTradeInvestCompanyWindow=I;var R=function(t){function e(e,i,n){var o=t.call(this)||this;return o._skillList=[],o.onSubmitResult=null,o._isSelf=e,o._business=i,o._skillList=n,fgui.UIObjectFactory.setExtension("ui://Game/IncidentTradeDataView",L),o}return o(e,t),e.prototype.onInit=function(){if(1==this._business.type){this.contentPane=fgui.UIPackage.createObject("Game","IncidentSmallHouseComponent").asCom;var t=this.contentPane.getChild("n1").asCom;t.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=t.getChild("n1").asLabel}else{this.contentPane=fgui.UIPackage.createObject("Game","IncidentTadeBigHouseComponent").asCom;var e=this.contentPane.getChild("n1").asCom;e.getChild("n0").asGraph.color=cc.color(179,77,255),this._nameLab=e.getChild("n1").asLabel}this.contentPane.getController("isMySelf").selectedIndex=this._isSelf?1:0;var i=this.contentPane.getChild("n4").asButton;this._buyButton=i;var n=this.contentPane.getChild("n5").asButton;this._transferButton=n;var o=this.contentPane.getChild("n6").asButton;this._abondonButton=o;var s=this.contentPane.getChild("n8").asButton;this._sureButton=s;var r=this.contentPane.getChild("n9").asButton,l=this.contentPane.getChild("n1").asCom;l.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=l.getChild("n1").asLabel,this._pricecLab=this.contentPane.getChild("n2").asLabel,this._historyPricecLab=this.contentPane.getChild("n3").asLabel,this._dataView=this.contentPane.getChild("n7").asCom;var u=this.frame.getChild("n3").asCom;this._skillView=u,u.visible=!1,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.House,this._business.type),this._isSelf?(this._abondonButton=o,this.closeButton=o):this.closeButton=r,this.center(),this.changeShowUI(),this.setPivot(.5,.5)},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){var t,e,i,n,o,s,a,r,u=this;if(this._buyButton.onClick(this.onChooseBuyClick,this),this._transferButton.onClick(this.onChooseTransferClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),this._sureButton.onClick(this.onChooseSureClick,this),this._pricecLab.text="\u603b\u4ef7  \uffe5"+l.default.thousandBitSeparator(null!==(t=this._business.totalPrice)&&void 0!==t?t:0),this._nameLab.text=this._business.name,this._historyPricecLab.text="\u5386\u53f2\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(e=this._business.minPrice)&&void 0!==e?e:0)+"~"+l.default.thousandBitSeparator(null!==(i=this._business.maxPrice)&&void 0!==i?i:0),this._dataView.setFirstPrice(""+l.default.thousandBitSeparator(null!==(n=this._business.firstPrice)&&void 0!==n?n:0)),this._dataView.setLone(""+l.default.thousandBitSeparator(null!==(o=this._business.loan)&&void 0!==o?o:0)),this._dataView.setMonthRepay(""+l.default.thousandBitSeparator(null!==(s=this._business.monthRepay)&&void 0!==s?s:0)),this._dataView.setMonthIncome(""+l.default.thousandBitSeparator(null!==(a=this._business.monthIncome)&&void 0!==a?a:0)),this._dataView.setMonthCashFlow(""+l.default.thousandBitSeparator(null!==(r=this._business.monthCashFlow)&&void 0!==r?r:0)),this._dataView.setYearIncomeRate(""+this._business.yearIncomeRate),this._dataView.setType(2),this._business.skillType>0&&null==this._skillList.find(function(t){return t.type===u._business.skillType}))return this._skillView.visible=!0,this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u623f\u5730\u4ea7\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",void(this._isSelf&&(this._buyButton.visible=!1,this._sureButton.visible=!1,this._transferButton.setPosition(.5*fgui.GRoot.inst.width-this._transferButton.width-20,this.frame.y+this.frame.height-this._transferButton.height-26),this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26)));this._isSelf&&this.changeEventStatus(!0)},e.prototype.changeEventStatus=function(t){this._buyButton.visible=t,this._sureButton.visible=!t},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseTransferClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(4)},e}(fgui.Window);i.GameTradeInvestHouseWindow=R;var L=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._child_firstPrice=this.getChild("n4").asLabel,this._child_loan=this.getChild("n5").asLabel,this._child_monthRepay=this.getChild("n6").asLabel,this._child_monthIncome=this.getChild("n11").asLabel,this._child_monthCashFlow=this.getChild("n12").asLabel,this._child_yearIncomeRate=this.getChild("n13").asLabel,this._child_monthName=this.getChild("n8").asLabel},e.prototype.setFirstPrice=function(t){this._child_firstPrice.text=t},e.prototype.setLone=function(t){this._child_loan.text=t},e.prototype.setMonthRepay=function(t){this._child_monthRepay.text=t},e.prototype.setMonthIncome=function(t){this._child_monthIncome.text=t},e.prototype.setMonthCashFlow=function(t){this._child_monthCashFlow.text=t},e.prototype.setYearIncomeRate=function(t){this._child_yearIncomeRate.text=t},e.prototype.setType=function(t){this._child_monthName.text=1==t?"\u6708\u6536\u5165":"\u6708\u79df\u91d1"},e}(fgui.GComponent);i.GameTradeInvestChildInfoView=L;var G=function(t){function e(e,i,n){var o=t.call(this)||this;return o._skillList=[],o.onSubmitResult=null,o._isSelf=e,o._equity=i,o._skillList=n,o}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentStockEquityComponent").asCom;var t=this.contentPane.getChild("n4").asButton;this._buyButton=t;var e=this.contentPane.getChild("n5").asButton;this._transferButton=e;var i=this.contentPane.getChild("n6").asButton;this._abondonButton=i;var n=this.contentPane.getChild("n8").asButton;this._sureButton=n;var o=this.contentPane.getChild("n9").asButton;this.contentPane.getController("isMySelf").selectedIndex=this._isSelf?1:0;var s=this.contentPane.getChild("n1").asCom;s.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=s.getChild("n1").asLabel,this._pricecLab=this.contentPane.getChild("n2").asLabel,this._descLab=this.contentPane.getChild("n4").asLabel,this._skillView=this.frame.getChild("n3").asCom,this._infoView=this.contentPane.getChild("n7").asCom,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Equity,this._equity.type),this._isSelf?this.closeButton=i:this.closeButton=o,this.center(),this.changeShowUI(),this.setPivot(.5,.5)},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){var t,e,i=this;if(this._buyButton.onClick(this.onChooseBuyClick,this),this._transferButton.onClick(this.onChooseTransferClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),this._sureButton.onClick(this.onChooseSureClick,this),this._pricecLab.text="10%\u80a1\u6743\u4ef7  \uffe5"+l.default.thousandBitSeparator(null!==(t=this._equity.eachPrice)&&void 0!==t?t:0),this._nameLab.text=this._equity.name,this._infoView.getChild("n4").asLabel.text=10*this._equity.maxEach+"%",this._infoView.getChild("n5").asLabel.text="\uffe5"+l.default.thousandBitSeparator(null!==(e=this._equity.eachMonthCashFlow)&&void 0!==e?e:0),this._infoView.getChild("n6").asLabel.text=this._equity.yearIncomeRate,this._equity.skillType>0&&null==this._skillList.find(function(t){return t.type===i._equity.skillType}))return this._skillView.visible=!0,this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u4f01\u4e1a\u7ecf\u8425\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this._buyButton.visible=!1,this._sureButton.visible=!1,this._transferButton.setPosition(.5*fgui.GRoot.inst.width-this._transferButton.width-20,this.frame.y+this.frame.height-this._transferButton.height-26),void this._abondonButton.setPosition(.5*fgui.GRoot.inst.width+20,this.frame.y+this.frame.height-this._abondonButton.height-26);this.changeEventStatus(!0)},e.prototype.changeEventStatus=function(t){this._buyButton.visible=t,this._sureButton.visible=!t},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseTransferClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(4)},e}(fgui.Window);i.GameTradeStockEquityWindow=G;var B=function(t){function e(e,i){var n=t.call(this)||this;return n.onSubmitResult=null,n._isSelf=e,n._speculate=i,n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentSpeculateComponent").asCom;var t=this.contentPane.getChild("n4").asButton;this._buyButton=t;var e=this.contentPane.getChild("n6").asButton;this._abondonButton=e;var i=this.contentPane.getChild("n7").asButton;this._cancelButton=i,this.contentPane.getController("isMySelf").selectedIndex=this._isSelf?1:0;var n=this.contentPane.getChild("n1").asCom;n.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=n.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n2").asLabel,this.closeButton=this._isSelf?e:i,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Speculate,-1),this.center(),this.changeShowUI(),this.setPivot(.5,.5)},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){this._buyButton.onClick(this.onChooseBuyClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),this._nameLab.text=this._speculate.name,this._descLab.text=this._speculate.depict},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e}(fgui.Window);i.GameTradeSpeculateWindow=B;var x,P=function(t){function e(e,i,n){var o=t.call(this)||this;return o.onSubmitResult=null,o._futures=e,o._isSelf=n,o._assetFuturesList=i,o}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentFuturesComponent").asCom,this._controller=this.contentPane.getController("isMySelf");var t=this.contentPane.getChild("n4").asButton;this._longButton=t;var e=this.contentPane.getChild("n5").asButton;this._bearishButton=e;var i=this.contentPane.getChild("n6").asButton;this._abondonButton=i;var n=this.contentPane.getChild("n8").asButton;this._clearButton=n;var o=this.contentPane.getChild("n9").asButton;this._exitButton=o,this._infoView=this.contentPane.getChild("n7").asCom;var s=this.contentPane.getChild("n1").asCom;s.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=s.getChild("n1").asLabel,this._pricecLab=this.contentPane.getChild("n2").asLabel,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Funtures,-1),this.center(),this.changeShowUI(),this.setPivot(.5,.5),this._isSelf?(this._controller.selectedIndex=1,this.closeButton=this._abondonButton):this._assetFuturesList.length>0?(this._controller.selectedIndex=0,this.closeButton=this._abondonButton):(this._controller.selectedIndex=2,this.closeButton=this._exitButton)},e.prototype.onShown=function(){var t,e,i;this._pricecLab.text="\u4eca\u65e5\u70b9\u6570 \uffe5"+l.default.thousandBitSeparator(null!==(t=this._futures.todayPrice)&&void 0!==t?t:0),this._nameLab.text=this._futures.name,this._infoView.getChild("n2").text="\uffe5"+l.default.thousandBitSeparator(null!==(e=this._futures.price)&&void 0!==e?e:0)+"/\u624b",this._infoView.getChild("n3").text="\uffe5"+l.default.thousandBitSeparator(null!==(i=this._futures.floatPrice)&&void 0!==i?i:0)+"/\u624b"},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){this._longButton.onClick(this.onChooseLongClick,this),this._bearishButton.onClick(this.onChooseBearishClick,this),this._clearButton.onClick(this.onChooseClearClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this)},e.prototype.onChooseLongClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseBearishClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onChooseClearClick=function(){this.onSubmitResult&&this.onSubmitResult(3)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(4)},e}(fgui.Window);i.GameTradeFuturesWindow=P,function(t){t[t.biddingPrepare=1]="biddingPrepare",t[t.biddingBuy=2]="biddingBuy"}(x=i.IncidentServiceMode||(i.IncidentServiceMode={}));var T=function(t){function e(e,i,n){var o=t.call(this)||this;return o.lastTime=15,o.onSubmitResult=null,o._article=i,o._mode=n,o._auctionName=e,o}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentFixationBidding").asCom;var t=this.contentPane.getChild("n4").asButton;this._buyButton=t;var e=this.contentPane.getChild("n5").asButton;this._biddingButton=e;var i=this.contentPane.getChild("n6").asButton;this._abondonButton=i;var n=this.contentPane.getChild("n1").asCom;n.getChild("n0").asGraph.color=cc.color(173,152,255),this._pricecLab=n.getChild("n1").asLabel,this._descLab=this.contentPane.getChild("n2").asLabel;var o=this.contentPane.getChild("n7").asCom;this._noteSkillView=o.getChild("n1").asCom,this._noteSkillView.visible=!1,this._noteSignView=o.getChild("n0").asCom,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Article,this._article.type),this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.changeStyle(),this.startTime()},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeShowUI=function(){var t,e,i,n,o,s;this._abondonButton.onClick(this.onChooseAbandonClick,this),this._buyButton.onClick(this.onChooseBuyClick,this),this._biddingButton.onClick(this.onChooseBiddinglick,this),1==this._article.type?(this.frame.text="\u9ec4\u91d1\u6295\u8d44",this._pricecLab.text=this._article.name+" \xa5"+(null!==(e=l.default.thousandBitSeparator(null!==(t=this._article.price)&&void 0!==t?t:0))&&void 0!==e?e:0)+"/\u6839"):2==this._article.type?(this.frame.text="\u90ae\u7968\u6295\u8d44",this._pricecLab.text=this._article.name+" \xa5"+(null!==(n=l.default.thousandBitSeparator(null!==(i=this._article.price)&&void 0!==i?i:0))&&void 0!==n?n:0)+"/\u5f20"):3==this._article.type&&(this.frame.text="\u53e4\u8463\u6295\u8d44",this._pricecLab.text=this._article.name+" \xa5"+(null!==(s=l.default.thousandBitSeparator(null!==(o=this._article.price)&&void 0!==o?o:0))&&void 0!==s?s:0)+"/\u4ef6"),this._descLab.text=this._article.depict,this._noteSignView.getChild("n1").asLabel.text="\u73a9\u5bb6\u201c"+this._auctionName+"\u201d\u9009\u62e9\u8f6c\u8ba9\u8be5\u673a\u4f1a"},e.prototype.startTime=function(){if(this._mode!=x.biddingBuy){u.default.log("\u5f00\u59cb\u5012\u8ba1\u65f6");var t=this;s.TimerUtil.instance.start(this.lastTime,function(e){t._abondonButton.title="\u653e\u5f03"+e+"s"},function(){})}},e.prototype.endTime=function(){this._mode!=x.biddingBuy&&(u.default.log("\u505c\u6b62\u5012\u8ba1\u65f6"),s.TimerUtil.instance.stop(),this.hide())},e.prototype.changeStyle=function(){this._mode==x.biddingPrepare?(this._noteSignView.visible=!0,this._biddingButton.visible=!0,this._buyButton.visible=!1):this._mode==x.biddingBuy&&(this._noteSignView.visible=!1,this._biddingButton.visible=!1,this._buyButton.visible=!0)},e.prototype.onChooseAbandonClick=function(){this.endTime(),this.onSubmitResult&&this.onSubmitResult(0)},e.prototype.onChooseBiddinglick=function(){this.endTime(),this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseBuyClick=function(){this.endTime(),this.onSubmitResult&&this.onSubmitResult(2)},e}(fgui.Window);i.GameTradeFixationBiddingWindow=T;var U=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s._skillList=[],s.lastTime=15,s.onSubmitResult=null,s._equity=i,s._skillList=n,s._mode=o,s._auctionName=e,s}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentStockEquityBidding").asCom;var t=this.contentPane.getChild("n4").asButton;this._buyButton=t;var e=this.contentPane.getChild("n5").asButton;this._biddingButton=e;var i=this.contentPane.getChild("n6").asButton;this._abondonButton=i;var n=this.contentPane.getChild("n1").asCom;n.getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=n.getChild("n1").asLabel,this._pricecLab=this.contentPane.getChild("n2").asLabel,this._infoView=this.contentPane.getChild("n7").asCom,this._skillView=this.frame.getChild("n3").asCom;var o=this.contentPane.getChild("n8").asCom;this._noteSkillView=o.getChild("n1").asCom,this._noteSignView=o.getChild("n0").asCom,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Equity,this._equity.type),this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.changeStyle(),this.startTime()},e.prototype.changeShowUI=function(){var t,e;this._abondonButton.onClick(this.onChooseAbandonClick,this),this._buyButton.onClick(this.onChooseBuyClick,this),this._biddingButton.onClick(this.onChooseBiddinglick,this),this._pricecLab.text="10%\u80a1\u6743\u4ef7  \uffe5"+l.default.thousandBitSeparator(null!==(t=this._equity.eachPrice)&&void 0!==t?t:0),this._nameLab.text=this._equity.name,this._infoView.getChild("n4").asLabel.text=10*this._equity.maxEach+"%",this._infoView.getChild("n5").asLabel.text="\uffe5"+l.default.thousandBitSeparator(null!==(e=this._equity.eachMonthCashFlow)&&void 0!==e?e:0),this._infoView.getChild("n6").asLabel.text=this._equity.yearIncomeRate,this._noteSignView.getChild("n1").asLabel.text="\u73a9\u5bb6\u201c"+this._auctionName+"\u201d\u9009\u62e9\u8f6c\u8ba9\u8be5\u673a\u4f1a"},e.prototype.startTime=function(){if(this._mode!=x.biddingBuy){var t=this;s.TimerUtil.instance.start(this.lastTime,function(e){t._abondonButton.title="\u653e\u5f03"+e+"s"},function(){t.hide()})}},e.prototype.endTime=function(){this._mode!=x.biddingBuy&&(u.default.log("\u505c\u6b62\u5012\u8ba1\u65f6"),s.TimerUtil.instance.stop())},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeStyle=function(){var t=this,e=!1;this._equity.skillType>0&&(e=null==this._skillList.find(function(e){return e.type===t._equity.skillType})),this._mode==x.biddingPrepare?(this._biddingButton.visible=!0,this._buyButton.visible=!1,this._skillView.visible=!1,this._noteSignView.visible=!0,this._noteSkillView.visible=e,this._noteSkillView.getChild("n1").asLabel.text="\u5b66\u4e60\u4f01\u4e1a\u7ecf\u8425\u6280\u80fd\u624d\u53ef\u8d2d\u4e70"):this._mode==x.biddingBuy&&(this._biddingButton.visible=!1,this._buyButton.visible=!0,this._noteSignView.visible=!1,this._noteSkillView.visible=!1,this._skillView.visible=e,this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u4f01\u4e1a\u7ecf\u8425\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this.changeEventStatus(!e))},e.prototype.changeEventStatus=function(t){this._buyButton.visible=t,t||this._abondonButton.setPosition(.5*(fgui.GRoot.inst.width-this._abondonButton.width),this.frame.y+this.frame.height-this._abondonButton.height-36)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(0),this.endTime()},e.prototype.onChooseBiddinglick=function(){this.onSubmitResult&&this.onSubmitResult(1),this.endTime()},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(2),this.endTime()},e}(fgui.Window);i.GameTradeStockEquityBiddingWindow=U;var A=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s._skillList=[],s.lastTime=15,s.onSubmitResult=null,s._business=i,s._skillList=n,s._mode=o,s._auctionName=e,fgui.UIObjectFactory.setExtension("ui://Game/IncidentTradeDataView",L),s}return o(e,t),e.prototype.onInit=function(){var t;1==this._business.type?(this.contentPane=fgui.UIPackage.createObject("Game","IncidentSmallHouseBidding").asCom,(t=this.contentPane.getChild("n1").asCom).getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=t.getChild("n1").asLabel):(this.contentPane=fgui.UIPackage.createObject("Game","IncidentTadeBigHouseBidding").asCom,(t=this.contentPane.getChild("n1").asCom).getChild("n0").asGraph.color=cc.color(179,77,255),this._nameLab=t.getChild("n1").asLabel);var e=this.contentPane.getChild("n4").asButton;this._buyButton=e;var i=this.contentPane.getChild("n5").asButton;this._biddingButton=i;var n=this.contentPane.getChild("n6").asButton;this._abondonButton=n,this._pricecLab=this.contentPane.getChild("n2").asLabel,this._historyPricecLab=this.contentPane.getChild("n3").asLabel,this._dataView=this.contentPane.getChild("n7").asCom,this._skillView=this.frame.getChild("n3").asCom;var o=this.contentPane.getChild("n8").asCom;this._noteSkillView=o.getChild("n1").asCom,this._noteSignView=o.getChild("n0").asCom,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.House,this._business.type),this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.changeStyle(),this.startTime()},e.prototype.changeShowUI=function(){var t,e,i,n,o,s,a,r;this._buyButton.onClick(this.onChooseBuyClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),this._biddingButton.onClick(this.onChooseBiddinglick,this),this._pricecLab.text="\u603b\u4ef7  \uffe5"+l.default.thousandBitSeparator(null!==(t=this._business.totalPrice)&&void 0!==t?t:0),this._nameLab.text=this._business.name,this._historyPricecLab.text="\u5386\u53f2\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(e=this._business.minPrice)&&void 0!==e?e:0)+"~"+l.default.thousandBitSeparator(null!==(i=this._business.maxPrice)&&void 0!==i?i:0),this._dataView.setFirstPrice(""+l.default.thousandBitSeparator(null!==(n=this._business.firstPrice)&&void 0!==n?n:0)),this._dataView.setLone(""+l.default.thousandBitSeparator(null!==(o=this._business.loan)&&void 0!==o?o:0)),this._dataView.setMonthRepay(""+l.default.thousandBitSeparator(null!==(s=this._business.monthRepay)&&void 0!==s?s:0)),this._dataView.setMonthIncome(""+l.default.thousandBitSeparator(null!==(a=this._business.monthIncome)&&void 0!==a?a:0)),this._dataView.setMonthCashFlow(""+l.default.thousandBitSeparator(null!==(r=this._business.monthCashFlow)&&void 0!==r?r:0)),this._dataView.setYearIncomeRate(""+this._business.yearIncomeRate),this._dataView.setType(2),this._noteSignView.getChild("n1").asLabel.text="\u73a9\u5bb6\u201c"+this._auctionName+"\u201d\u9009\u62e9\u8f6c\u8ba9\u8be5\u673a\u4f1a"},e.prototype.startTime=function(){if(this._mode!=x.biddingBuy){var t=this;s.TimerUtil.instance.start(this.lastTime,function(e){t._abondonButton.title="\u653e\u5f03"+e+"s"},function(){t.hide()})}},e.prototype.endTime=function(){this._mode!=x.biddingBuy&&(u.default.log("\u505c\u6b62\u5012\u8ba1\u65f6"),s.TimerUtil.instance.stop())},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeStyle=function(){var t=this,e=!1;this._business.skillType>0&&(e=null==this._skillList.find(function(e){return e.type===t._business.skillType})),this._mode==x.biddingPrepare?(this._biddingButton.visible=!0,this._buyButton.visible=!1,this._skillView.visible=!1,this._noteSignView.visible=!0,this._noteSkillView.visible=e,this._noteSkillView.getChild("n1").asLabel.text="\u5b66\u4e60\u623f\u5730\u4ea7\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70"):this._mode==x.biddingBuy&&(this._biddingButton.visible=!1,this._buyButton.visible=!0,this._noteSignView.visible=!1,this._noteSkillView.visible=!1,this._skillView.visible=e,this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u623f\u5730\u4ea7\u6295\u8d44\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this.changeEventStatus(!e))},e.prototype.changeEventStatus=function(t){this._buyButton.visible=t,t||this._abondonButton.setPosition(.5*(fgui.GRoot.inst.width-this._abondonButton.width),this.frame.y+this.frame.height-this._abondonButton.height-36)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(0),this.endTime()},e.prototype.onChooseBiddinglick=function(){this.onSubmitResult&&this.onSubmitResult(1),this.endTime()},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(2),this.endTime()},e}(fgui.Window);i.GameTradeInvestHouseBiddingWindow=A;var E,O=function(t){function e(e,i,n,o,s){var a=t.call(this)||this;return a._skillList=[],a._companyList=[],a.lastTime=15,a.onSubmitResult=null,a._business=i,a._skillList=n,a._companyList=o,a._mode=s,a._auctionName=e,fgui.UIObjectFactory.setExtension("ui://Game/IncidentTradeDataView",L),a}return o(e,t),e.prototype.onInit=function(){var t;1==this._business.type?(this.contentPane=fgui.UIPackage.createObject("Game","IncidentSmallCompanyBidding").asCom,(t=this.contentPane.getChild("n1").asCom).getChild("n0").asGraph.color=cc.color(173,152,255),this._nameLab=t.getChild("n1").asLabel):(this.contentPane=fgui.UIPackage.createObject("Game","IncidentTadeBigCompanyBidding").asCom,(t=this.contentPane.getChild("n1").asCom).getChild("n0").asGraph.color=cc.color(179,77,255),this._nameLab=t.getChild("n1").asLabel);var e=this.contentPane.getChild("n4").asButton;this._buyButton=e;var i=this.contentPane.getChild("n5").asButton;this._biddingButton=i;var n=this.contentPane.getChild("n6").asButton;this._abondonButton=n,this._pricecLab=this.contentPane.getChild("n2").asLabel,this._dataView=this.contentPane.getChild("n7").asCom,this._skillView=this.frame.getChild("n3").asCom;var o=this.contentPane.getChild("n8").asCom;this._noteSkillView=o.getChild("n1").asCom,this._noteSignView=o.getChild("n0").asCom,this.frame.getChild("n2").asCom.getChild("n0").asLoader.texture=a.GameResourceUtil.incidentChance(a.GameIncidentChance.Company,this._business.smallType),this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.changeStyle(),this.startTime()},e.prototype.changeShowUI=function(){var t,e,i,n,o;this._buyButton.onClick(this.onChooseBuyClick,this),this._abondonButton.onClick(this.onChooseAbandonClick,this),this._biddingButton.onClick(this.onChooseBiddinglick,this),this._pricecLab.text="\u603b\u4ef7  \uffe5"+l.default.thousandBitSeparator(null!==(t=this._business.totalPrice)&&void 0!==t?t:0),this._nameLab.text=this._business.name,this._dataView.setFirstPrice(""+l.default.thousandBitSeparator(null!==(e=this._business.firstPrice)&&void 0!==e?e:0)),this._dataView.setLone(""+this._business.loan),this._dataView.setMonthRepay(""+l.default.thousandBitSeparator(null!==(i=this._business.monthRepay)&&void 0!==i?i:0)),this._dataView.setMonthIncome(""+l.default.thousandBitSeparator(null!==(n=this._business.monthIncome)&&void 0!==n?n:0)),this._dataView.setMonthCashFlow(""+l.default.thousandBitSeparator(null!==(o=this._business.monthCashFlow)&&void 0!==o?o:0)),this._dataView.setYearIncomeRate(""+this._business.yearIncomeRate),this._dataView.setType(2),this._noteSignView.getChild("n1").asLabel.text="\u73a9\u5bb6\u201c"+this._auctionName+"\u201d\u9009\u62e9\u8f6c\u8ba9\u8be5\u673a\u4f1a"},e.prototype.startTime=function(){if(this._mode!=x.biddingBuy){var t=this;s.TimerUtil.instance.start(this.lastTime,function(e){t._abondonButton.title="\u653e\u5f03"+e+"s"},function(){t.hide()})}},e.prototype.endTime=function(){this._mode!=x.biddingBuy&&(u.default.log("\u505c\u6b62\u5012\u8ba1\u65f6"),s.TimerUtil.instance.stop())},e.prototype.onShown=function(){},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.changeStyle=function(){var t=this,e=!1;this._business.skillType>0&&(e=null==this._skillList.find(function(e){return e.type===t._business.skillType})),this._mode==x.biddingPrepare?(this._biddingButton.visible=!0,this._buyButton.visible=!1,this._skillView.visible=!1,this._noteSignView.visible=!0,this._noteSkillView.visible=e,this._noteSkillView.getChild("n1").asLabel.text="\u5b66\u4e60\u4f01\u4e1a\u7ecf\u8425\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this._companyList.find(function(e){return e.smallType===t._business.smallType})&&(this._noteSkillView.visible=!0,this._noteSkillView.getChild("n1").asLabel.text="\u4f60\u5df2\u62e5\u6709\u8be5\u4f01\u4e1a")):this._mode==x.biddingBuy&&(this._biddingButton.visible=!1,this._buyButton.visible=!0,this._noteSignView.visible=!1,this._noteSkillView.visible=!1,this._skillView.visible=e,this._skillView.getChild("n1").asLabel.text="\u5b66\u4e60\u4f01\u4e1a\u7ecf\u8425\u6280\u80fd\u624d\u53ef\u8d2d\u4e70",this.changeEventStatus(!e),this._companyList.find(function(e){return e.smallType===t._business.smallType})&&(this._buyButton.visible=!1,this._skillView.visible=!0,this._skillView.getChild("n1").asLabel.text="\u4f60\u5df2\u62e5\u6709\u8be5\u4f01\u4e1a",this._abondonButton.setPosition(.5*(fgui.GRoot.inst.width-this._abondonButton.width),this.frame.y+this.frame.height-this._abondonButton.height-36)))},e.prototype.changeEventStatus=function(t){this._buyButton.visible=t,t||this._abondonButton.setPosition(.5*(fgui.GRoot.inst.width-this._abondonButton.width),this.frame.y+this.frame.height-this._abondonButton.height-36)},e.prototype.onChooseAbandonClick=function(){this.onSubmitResult&&this.onSubmitResult(0),this.endTime()},e.prototype.onChooseBiddinglick=function(){this.onSubmitResult&&this.onSubmitResult(1),this.endTime()},e.prototype.onChooseBuyClick=function(){this.onSubmitResult&&this.onSubmitResult(2),this.endTime()},e}(fgui.Window);i.GameTradeInvestCompanyBiddingWindow=O,function(t){t[t.risk=0]="risk",t[t.Gold=1]="Gold",t[t.Stamp=2]="Stamp",t[t.equity=3]="equity"}(E=i.InvestActionType||(i.InvestActionType={}));var M=function(t){function e(e,i,n,o){var s=t.call(this)||this;return s.currentUnit=function(){var t=10;return s._actionType==E.Gold?t=1:s._actionType==E.risk?t=1e4:s._actionType==E.equity?t=10:s._actionType==E.Stamp&&(t=1),t},s.onSubmitResult=null,s._actionType=e,s._maxCount=i,s._unitPrice=o,s._minCount=n,fgui.UIObjectFactory.setExtension("ui://Basic/GameKeyBoardWindow",h.GameKeyboard),s}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentInvestActionComponent").asCom,this.makeFullScreen(),this._keyboardController=this.contentPane.getController("KeyBoard"),this._keyboard=this.contentPane.getChild("keyboard");var t=this.frame.getChild("n1").asButton;this._sureButton=t;var e=this.frame.getChild("n2").asButton;this._abondonButton=e;var i=this.frame.getChild("n9").asButton;this._addButton=i;var n=this.frame.getChild("n8").asButton;this._decreaseButton=n,this._inputButton=this.frame.getChild("inputButton").asButton,this._inputButton.titleColor=cc.color(0,0,0,1),this._nameLab=this.frame.getChild("frame").asCom.getChild("title").asLabel,this._descLab=this.frame.getChild("n3").asLabel,this._abondonButton.onClick(this.onChooseAbandonClick,this),this._sureButton.onClick(this.onChooseSureClick,this),this._addButton.onClick(this.onChooseAddClick,this),this._decreaseButton.onClick(this.onChooseDecreaseClick,this),this._inputButton.onClick(this.onChooseInputClick,this),this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.handleKeyboard()},e.prototype.changeShowUI=function(){var t,e;switch(this._actionType){case E.risk:this._addButton.title="10000",this._decreaseButton.title="10000",this._descLab.text="\u8bf7\u9009\u62e9\u8d2d\u4e70\u91d1\u989d",this._nameLab.text="\u98ce\u9669\u6295\u8d44";break;case E.Gold:this._addButton.title="1",this._decreaseButton.title="1",this._descLab.text="\u4ef7\u683c "+l.default.thousandBitSeparator(null!==(t=this._unitPrice)&&void 0!==t?t:0)+"/\u6839",this._nameLab.text="\u9ec4\u91d1\u6295\u8d44",this._inputButton.title=""+this._minCount;break;case E.Stamp:this._addButton.title="1",this._decreaseButton.title="1",this._descLab.text="\u4ef7\u683c "+l.default.thousandBitSeparator(null!==(e=this._unitPrice)&&void 0!==e?e:0)+"/\u5f20",this._nameLab.text="\u90ae\u7968\u6295\u8d44";break;case E.equity:this._addButton.title="10%",this._decreaseButton.title="10%",this._descLab.text="\u6700\u9ad8\u53ef\u5165"+this._maxCount+"%",this._nameLab.text="\u5165\u80a1"}},e.prototype.doShowAnimation=function(){},e.prototype.handleKeyboard=function(){var t=this;this._keyboard.onSubmitResult=function(e){10==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u5220\u9664"),t.updateTotal(e)):11==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u6536\u8d77\u952e\u76d8"),t.hideKeyboard()):(console.log("\u3010\u8f93\u5165\u7ed3\u679c\u3011:",e),t.updateTotal(e))}},e.prototype.updateTotal=function(t){var e=d.GameUtils.checBoardNumber(t,this._inputButton.title),i=Number(e);if(!isNaN(i)){var n=this.currentUnit();if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",i),u.default.log("\u5f53\u524d\u5355\u4f4d:",n),isNaN(i))this._inputButton.title="0";else{var o=i;if(this._actionType==E.Gold)o<=this._minCount?this._inputButton.title=""+this._minCount:o>this._maxCount?this._inputButton.title=""+this._maxCount:this._inputButton.title=""+o;else if(this._actionType==E.equity)this._inputButton.title=""+(o<=this._maxCount?o:this._maxCount);else{var s=o>c.default.confMaxInputNumber?c.default.confMaxInputNumber:o;this._inputButton.title=""+s}}}},e.prototype.onChooseAbandonClick=function(){this.hideKeyboard(),this.onSubmitResult&&this.onSubmitResult(2,0)},e.prototype.onChooseSureClick=function(){var t=Number(this._inputButton.title);if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),isNaN(t)||t<=0)return r.default.show("\u8bf7\u8f93\u5165\u91d1\u989d");if(this._actionType==E.equity){var e=Math.floor(t/10);if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u6743\u4fee\u6b63\u6570\u91cf:",e),e<=0)return this._inputButton.title="0",r.default.show("\u8bf7\u8f93\u5165\u4efd\u6570");var i=Number((10*e).toFixed());u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u6743\u4fee\u6b63\u6570\u91cf:",i),this._inputButton.title=(10*e).toFixed(),this.onSubmitResult&&this.onSubmitResult(1,i)}else this.onSubmitResult&&this.onSubmitResult(1,t)},e.prototype.onChooseAddClick=function(){var t=Number(this._inputButton.title),e=this.currentUnit();if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),u.default.log("\u5f53\u524d\u5355\u4f4d:",e),isNaN(t))this._inputButton.title=""+e;else{var i=t+e;if(this._actionType==E.Gold||this._actionType==E.equity)this._inputButton.title=""+(i<=this._maxCount?i:this._maxCount);else{var n=i>c.default.confMaxInputNumber?c.default.confMaxInputNumber:i;this._inputButton.title=""+n}}},e.prototype.onChooseDecreaseClick=function(){var t=Number(this._inputButton.title),e=this.currentUnit();if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),u.default.log("\u5f53\u524d\u5355\u4f4d:",e),isNaN(t))this._inputButton.title="0";else{var i=t-e,n=i<=0?0:i;u.default.log("\u5f53\u524d\u6570\u503c:",n),this._actionType==E.Gold?this._inputButton.title=""+(n<=this._minCount?this._minCount:n):this._inputButton.title=""+n}},e.prototype.onChooseInputClick=function(){this.showKeyboard()},e.prototype.showKeyboard=function(){if(1!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=1;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,fgui.GRoot.inst.height),fgui.GTween.to2(0,fgui.GRoot.inst.height,0,t,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e.prototype.hideKeyboard=function(){if(0!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=0;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,t),fgui.GTween.to2(0,t,0,fgui.GRoot.inst.height,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e}(fgui.Window);i.GameTradeInvestActionWindow=M;var F=function(t){function e(e,i){var n=t.call(this)||this;return n._dataArray=[],n.onSubmitResult=null,n._futures=e,n._dataArray=i,fgui.UIObjectFactory.setExtension("ui://Game/IncidentExponentBearishCell",j),n}return o(e,t),e.prototype.onInit=function(){var t;this.contentPane=fgui.UIPackage.createObject("Game","IncidentExponentActionComponent").asCom;var e=this.contentPane.getChild("n1").asButton;this._sureButton=e;var i=this.contentPane.getChild("n2").asButton;this._backButton=i,this._list=this.contentPane.getChild("n4").asList,this._priceLab=this.contentPane.getChild("n3").asLabel,this.closeButton=i,this.center(),this.setPivot(.5,.5),this.changeShowUI(),this._priceLab.text="\u5f53\u524d\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(t=this._futures.todayPrice)&&void 0!==t?t:0)},e.prototype.changeShowUI=function(){this._sureButton.onClick(this.onChooseSureClick,this),this._backButton.onClick(this.onChooseBackClick,this),this._list.setVirtual(),this._list.itemRenderer=this.renderListItem.bind(this),this._list.numItems=this._dataArray.length},e.prototype.renderListItem=function(t,e){var i,n,o=e,s=this._dataArray[t];o.setCheck(s.isSelected),o.setMode(1==s.operate),o.setPrice("\uffe5"+l.default.thousandBitSeparator(null!==(i=s.todayPrice)&&void 0!==i?i:0)+"\u65f6\u8d2d\u5165"),o.setCurrentPrice("\uffe5"+l.default.thousandBitSeparator(null!==(n=s.price)&&void 0!==n?n:0)+"/"+s.count+"\u624b"),this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=this._list.childIndexToItemIndex(e),n=t,o=this._dataArray[i];o.isSelected=!o.isSelected,n.setCheck(o.isSelected)},e.prototype.onChooseSureClick=function(){for(var t=[],e=0,i=this._dataArray;e<i.length;e++){var n=i[e];if(1==n.isSelected&&n.count>0){var o={id:n.id,count:n.count};t.push(o)}}null!=t&&0!=t.length&&this.onSubmitResult&&this.onSubmitResult(1,t)},e.prototype.onChooseBackClick=function(){this.onSubmitResult&&this.onSubmitResult(2,null)},e}(fgui.Window);i.GameTradeExponentActionWindow=F;var j=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._nameText=this.getChild("n4").asLabel,this._priceText=this.getChild("n5").asLabel,this._currentPriceText=this.getChild("n6").asLabel,this._modeController=this.getController("mode"),this._checkController=this.getController("isSelect")},e.prototype.setPrice=function(t){this._priceText.text=t},e.prototype.setCurrentPrice=function(t){this._currentPriceText.text=t},e.prototype.setCheck=function(t){this._checkController.selectedIndex=t?1:0},e.prototype.setMode=function(t){this._modeController.selectedIndex=t?1:0},e}(fgui.GButton);i.IncidentExponentBearishCell=j;var V=function(t){function e(e,i){var n=t.call(this)||this;return n._suitArray=[],n.onSubmitResult=null,n._userInfo=c.default.userInfo,n._futuresType=1,n._futures=e,n._futuresType=i,fgui.UIObjectFactory.setExtension("ui://Game/IncidentStockNumCell",W),fgui.UIObjectFactory.setExtension("ui://Basic/GameKeyBoardWindow",h.GameKeyboard),n.initData(),n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentStockBuyComponent").asCom,this.makeFullScreen(),this._keyboardController=this.contentPane.getController("KeyBoard"),this._keyboard=this.contentPane.getChild("keyboard");var t=this.frame.getChild("n1").asButton;this._sureButton=t;var e=this.frame.getChild("n2").asButton;this._backButton=e,this._list=this.frame.getChild("n8").asList,this._inputButton=this.frame.getChild("inputButton").asButton,this._inputButton.titleColor=cc.color(0,0,0,1),this._totalLab=this.frame.getChild("n3").asLabel,this.frame.getChild("n9").asLabel.text="\u624b",this.center(),this.setPivot(.5,.5),this.changeShowUI(),t.onClick(this.onSureButtonClick,this),e.onClick(this.onBackButtonClick,this),this._inputButton.onClick(this.onChooseInputClick,this),this.frame.getChild("frame").asCom.getChild("title").asLabel.text="\u80a1\u6307\u671f\u8d27",f.default.on(m.RoomEventConstant.EMIT_BankLoan,this.refreshData,this)},e.prototype.refreshData=function(){var t;console.log("\u5237\u65b0\u80a1\u6307\u671f\u8d27\u6570\u636e");var e=this._futures.price,i=Math.floor((null!==(t=this._userInfo.assetCash)&&void 0!==t?t:0)/e),n=i>=0?i:0,o=Number(Math.floor(.3*n).toFixed()),s=Number(Math.floor(n/2).toFixed()),a=Number(n.toFixed());this._suitArray[0].stockNumber=o,this._suitArray[0].total=o*e,this._suitArray[1].stockNumber=s,this._suitArray[1].total=s*e,this._suitArray[2].stockNumber=a,this._suitArray[2].total=a*e,this._list.refreshVirtualList();for(var r=0,u=this._suitArray;r<u.length;r++){var c=u[r];1==c.isSelected&&(this._inputButton.title=""+c.stockNumber,this._totalLab.text="\u603b\u4ef7 \uffe5"+l.default.thousandBitSeparator(c.total))}},e.prototype.initData=function(){var t,e=this._futures.price,i=Math.floor((null!==(t=this._userInfo.assetCash)&&void 0!==t?t:0)/e),n=i>=0?i:0,o=Number(Math.floor(.3*n).toFixed()),s=Number(Math.floor(n/2).toFixed()),a=Number(n.toFixed()),r={number:30,stockNumber:o,total:o*e,isSelected:!1},l={number:50,stockNumber:s,total:s*e,isSelected:!1},u={number:100,stockNumber:a,total:a*e,isSelected:!1};this._suitArray.push(r),this._suitArray.push(l),this._suitArray.push(u)},e.prototype.changeShowUI=function(){this._list.setVirtual(),this._list.itemRenderer=this.renderListItem.bind(this),this._list.numItems=3,this.updateTotal(0),this.handleKeyboard()},e.prototype.handleKeyboard=function(){var t=this;this._keyboard.onSubmitResult=function(e){10==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u5220\u9664"),t.updateTotal(e)):11==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u6536\u8d77\u952e\u76d8"),t.hideKeyboard()):(console.log("\u3010\u8f93\u5165\u7ed3\u679c\u3011:",e),t.updateTotal(e))}},e.prototype.updateTotal=function(t){var e=d.GameUtils.checBoardNumber(t,this._inputButton.title),i=Number(e);if(!isNaN(i)){var n=i>c.default.confMaxInputNumber?c.default.confMaxInputNumber:i,o=this._futures.price;this._totalLab.text="\u603b\u4ef7 \xa5"+l.default.thousandBitSeparator(n*o),this._inputButton.title=""+n,this._suitArray.forEach(function(t){t.isSelected=!1}),this._list.refreshVirtualList()}},e.prototype.renderListItem=function(t,e){var i=e,n=this._suitArray[t];i.setCheck(n.isSelected);var o=n.number+"%";0==t?i.setNumber(o):1==t?i.setNumber(o):2==t&&i.setNumber(o),this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.doShowAnimation=function(){},e.prototype.onHide=function(){this.hideKeyboard()},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=this._list.childIndexToItemIndex(e);this._suitArray.forEach(function(t){t.isSelected=!1});var n=this._suitArray[i];n.isSelected=!0,this._inputButton.title=""+n.stockNumber,this._totalLab.text="\u603b\u4ef7 \uffe5"+l.default.thousandBitSeparator(n.total),this._list.refreshVirtualList()},e.prototype.onSureButtonClick=function(){for(var t=0,e=0,i=this._suitArray;e<i.length;e++){var n=i[e];1==n.isSelected&&(t=n.stockNumber)}var o=Number(this._inputButton.title);if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",o),!isNaN(o)){var s=t>0?t:o;0!=s?(this.hideKeyboard(),this.onSubmitResult(1,s)):r.default.show("\u8bf7\u8f93\u5165\u6570\u91cf")}},e.prototype.onBackButtonClick=function(){this.hideKeyboard(),this.onSubmitResult(2,0)},e.prototype.onChooseInputClick=function(){this.showKeyboard()},e.prototype.showKeyboard=function(){if(1!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=1;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,fgui.GRoot.inst.height),fgui.GTween.to2(0,fgui.GRoot.inst.height,0,t,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e.prototype.hideKeyboard=function(){if(0!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=0;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,t),fgui.GTween.to2(0,t,0,fgui.GRoot.inst.height,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e}(fgui.Window);i.GameTradeFutureActionWindow=V;var D=function(t){function e(e,i){var n=t.call(this)||this;n._suitArray=[],n._stockArray=[],n._stock=null,n.onSubmitResult=null,fgui.UIObjectFactory.setExtension("ui://Game/IncidentStockNumCell",W),fgui.UIObjectFactory.setExtension("ui://Game/IncidentStockItemCell",N),n.initData(),u.default.log("stock",e),n._stock=e;for(var o=[],s=0,a=i.assetStockList;s<a.length;s++){var r=a[s];r.stockType==e.stockType&&o.push(r)}return n._stockArray=o,n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentStockSaleComponent").asCom;var t=this.contentPane.getChild("n1").asButton;this._sureButton=t;var e=this.contentPane.getChild("n2").asButton;this._backButton=e,this._itemButton=this.contentPane.getChild("n10"),this._itemButton.setCheck(!0),this._list=this.contentPane.getChild("n6").asList,this.center(),this.setPivot(.5,.5),this.changeShowUI(),t.onClick(this.onSureButtonClick,this),e.onClick(this.onBackButtonClick,this)},e.prototype.initData=function(){this._suitArray.push({number:30,stockNumber:0,total:0,isSelected:!1}),this._suitArray.push({number:50,stockNumber:0,total:0,isSelected:!1}),this._suitArray.push({number:100,stockNumber:0,total:0,isSelected:!1})},e.prototype.changeShowUI=function(){var t,e;this._list.setVirtual(),this._list.itemRenderer=this.renderListItem.bind(this),this._list.numItems=this._suitArray.length,this.frame.text=this._stock.name;var i=this._stockArray[this._stockArray.length-1];this._itemButton.setNumber(l.default.thousandBitSeparator(null!==(t=i.count)&&void 0!==t?t:0)+"\u80a1"),this._itemButton.setPrice("\uffe5"+l.default.thousandBitSeparator(null!==(e=i.price)&&void 0!==e?e:0)+"\u6bcf\u80a1\u8d2d\u5165")},e.prototype.renderListItem=function(t,e){var i=e,n=this._suitArray[t];i.setCheck(n.isSelected);var o=n.number+"%";0==t?i.setNumber(o):1==t?i.setNumber(o):2==t&&i.setNumber(o),this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=this._list.childIndexToItemIndex(e);this._suitArray.forEach(function(t){t.isSelected=!1}),this._suitArray[i].isSelected=!0,this._list.refreshVirtualList()},e.prototype.onSureButtonClick=function(){for(var t=0,e=0,i=this._suitArray;e<i.length;e++){var n=i[e];1==n.isSelected&&(t=n.number)}if(0!=t){var o=0,s=this._stockArray[this._stockArray.length-1].count;if(u.default.log("hadNumber:",s),30==t?o=100*Math.floor(.003*s):50==t?o=100*Math.floor(.005*s):100==t&&(o=s),0==o)return r.default.show("\u51fa\u552e\u6570\u91cf\u5fc5\u987b\u662f100\u7684\u6574\u6570\u500d");if(u.default.log("current:",o),o%100==0){var a=o;u.default.log("buyCount:"+a+",current:"+o),this.onSubmitResult(1,a)}else r.default.show("\u51fa\u552e\u6570\u91cf\u5fc5\u987b\u662f100\u7684\u6574\u6570\u500d")}else r.default.show("\u51fa\u552e\u6570\u91cf\u5fc5\u987b\u662f100\u7684\u6574\u6570\u500d")},e.prototype.onBackButtonClick=function(){this.onSubmitResult(2,0)},e}(fgui.Window);i.GameTradeStockSaleActionWindow=D;var N=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._priceText=this.getChild("n5").asLabel,this._numberText=this.getChild("n6").asLabel,this._select_priceText=this.getChild("n8").asLabel,this._select_numberText=this.getChild("n9").asLabel,this._checkController=this.getController("isSelect")},e.prototype.setPrice=function(t){this._priceText.text=t,this._select_priceText.text=t},e.prototype.setNumber=function(t){this._numberText.text=t,this._select_numberText.text=t},e.prototype.setCheck=function(t){this._checkController.selectedIndex=t?1:0},e}(fgui.GButton);i.IncidentStockItemCell=N;var W=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._numberText=this.getChild("n2").asLabel,this._checkController=this.getController("isSelect")},e.prototype.setNumber=function(t){this._numberText.text=t},e.prototype.setCheck=function(t){this._checkController.selectedIndex=t?1:0},e}(fgui.GButton);i.IncidentStockNumCell=W;var H=function(t){function e(e){var i=t.call(this)||this;return i._suitArray=[],i._stock=null,i._userInfo=c.default.userInfo,i.onSubmitResult=null,i._stock=e,fgui.UIObjectFactory.setExtension("ui://Game/IncidentStockNumCell",W),fgui.UIObjectFactory.setExtension("ui://Basic/GameKeyBoardWindow",h.GameKeyboard),i.initData(),i}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentStockBuyComponent").asCom,this.makeFullScreen(),this._keyboardController=this.contentPane.getController("KeyBoard"),this._keyboard=this.contentPane.getChild("keyboard");var t=this.frame.getChild("n1").asButton;this._sureButton=t;var e=this.frame.getChild("n2").asButton;this._backButton=e,this._list=this.frame.getChild("n8").asList,this._inputButton=this.frame.getChild("inputButton").asButton,this._inputButton.titleColor=cc.color(0,0,0,1),this._totalLab=this.frame.getChild("n3").asLabel,this.center(),this.setPivot(.5,.5),this.changeShowUI(),t.onClick(this.onSureButtonClick,this),e.onClick(this.onBackButtonClick,this),this._inputButton.onClick(this.onChooseInputClick,this),this.frame.getChild("frame").asCom.getChild("title").asLabel.text=this._stock.name,f.default.on(m.RoomEventConstant.EMIT_BankLoan,this.refreshData,this)},e.prototype.refreshData=function(){var t;console.log("\u5237\u65b0\u80a1\u7968\u6570\u636e");var e=this._stock.price,i=Math.floor((null!==(t=this._userInfo.assetCash)&&void 0!==t?t:0)/e),n=i>=0?i:0,o=100*Number(Math.floor(.3*n/100).toFixed()),s=100*Number(Math.floor(.5*n/100).toFixed()),a=100*Number(Math.floor(1*n/100).toFixed());this._suitArray[0].stockNumber=o,this._suitArray[0].total=o*e,this._suitArray[1].stockNumber=s,this._suitArray[1].total=s*e,this._suitArray[2].stockNumber=a,this._suitArray[2].total=a*e,this._list.refreshVirtualList();for(var r=0,u=this._suitArray;r<u.length;r++){var c=u[r];1==c.isSelected&&(this._inputButton.title=""+c.stockNumber,this._totalLab.text="\u603b\u4ef7 \uffe5"+l.default.thousandBitSeparator(c.total))}},e.prototype.initData=function(){var t,e=this._stock.price,i=Math.floor((null!==(t=this._userInfo.assetCash)&&void 0!==t?t:0)/e),n=i>=0?i:0,o=100*Number(Math.floor(.3*n/100).toFixed()),s=100*Number(Math.floor(.5*n/100).toFixed()),a=100*Number(Math.floor(1*n/100).toFixed()),r={number:30,stockNumber:o,total:o*e,isSelected:!1},l={number:50,stockNumber:s,total:s*e,isSelected:!1},u={number:100,stockNumber:a,total:a*e,isSelected:!1};this._suitArray.push(r),this._suitArray.push(l),this._suitArray.push(u)},e.prototype.changeShowUI=function(){this._list.setVirtual(),this._list.itemRenderer=this.renderListItem.bind(this),this._list.numItems=3,this.updateTotal(0),this.handleKeyboard()},e.prototype.handleKeyboard=function(){var t=this;this._keyboard.onSubmitResult=function(e){10==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u5220\u9664"),t.updateTotal(e)):11==e?(console.log("\u3010\u8f93\u5165\u64cd\u4f5c\u3011:\u6536\u8d77\u952e\u76d8"),t.hideKeyboard()):(console.log("\u3010\u8f93\u5165\u7ed3\u679c\u3011:",e),t.updateTotal(e))}},e.prototype.updateTotal=function(t){var e=d.GameUtils.checBoardNumber(t,this._inputButton.title),i=Number(e);if(!isNaN(i)){var n=i>c.default.confMaxInputNumber?c.default.confMaxInputNumber:i,o=this._stock.price;this._totalLab.text="\u603b\u4ef7 \xa5"+l.default.thousandBitSeparator(n*o),this._inputButton.title=""+n,this._suitArray.forEach(function(t){t.isSelected=!1}),this._list.refreshVirtualList()}},e.prototype.renderListItem=function(t,e){var i=e,n=this._suitArray[t];i.setCheck(n.isSelected);var o=n.number+"%";0==t?i.setNumber(o):1==t?i.setNumber(o):2==t&&i.setNumber(o),this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.doShowAnimation=function(){},e.prototype.onHide=function(){this.hideKeyboard()},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=this._list.childIndexToItemIndex(e);this._suitArray.forEach(function(t){t.isSelected=!1});var n=this._suitArray[i];n.isSelected=!0,this._inputButton.title=""+n.stockNumber,this._totalLab.text="\u603b\u4ef7 \uffe5"+l.default.thousandBitSeparator(n.total),this._list.refreshVirtualList()},e.prototype.onSureButtonClick=function(){for(var t=0,e=0,i=this._suitArray;e<i.length;e++){var n=i[e];1==n.isSelected&&(t=n.stockNumber)}var o=Number(this._inputButton.title);if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",o),!isNaN(o)){var s=t>0?t:o;if(0==s)return r.default.show("\u4e70\u5165\u6570\u91cf\u5fc5\u987b\u662f100\u7684\u6574\u6570\u500d");if(s%100==0){var a=s/100*100;u.default.log("buyCount:"+a+",current:"+s),this.hideKeyboard(),this.onSubmitResult&&this.onSubmitResult(1,a)}else r.default.show("\u4e70\u5165\u6570\u91cf\u5fc5\u987b\u662f100\u7684\u6574\u6570\u500d")}},e.prototype.onBackButtonClick=function(){this.hideKeyboard(),this.onSubmitResult&&this.onSubmitResult(2,0)},e.prototype.onChooseInputClick=function(){this.showKeyboard()},e.prototype.showKeyboard=function(){if(1!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=1;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,fgui.GRoot.inst.height),fgui.GTween.to2(0,fgui.GRoot.inst.height,0,t,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e.prototype.hideKeyboard=function(){if(0!=this._keyboardController.selectedIndex){this._keyboardController.selectedIndex=0;var t=fgui.GRoot.inst.height-this._keyboard.height;this._keyboard.setPosition(0,t),fgui.GTween.to2(0,t,0,fgui.GRoot.inst.height,.27).setTarget(this._keyboard,this._keyboard.setPosition).setEase(fgui.EaseType.QuadOut)}},e}(fgui.Window);i.GameTradeStockBuyActionWindow=H;var z=function(t){function e(e,i){var n=t.call(this)||this;return n._assetArray=[],n.onSubmitResult=null,n._assetType=i,n._assetArray=e,fgui.UIObjectFactory.setExtension("ui://Game/IncidentAssetSaleCell",q),n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentAssetSaleActionComponent").asCom;var t=this.contentPane.getChild("n1").asButton;this._saleButton=t;var e=this.contentPane.getChild("n2").asButton;this._backButton=e,this._list=this.contentPane.getChild("n3").asList,this.center(),this.setPivot(.5,.5),this.changeShowUI()},e.prototype.changeShowUI=function(){this._list.setVirtual(),this._list.itemRenderer=this.renderListItem.bind(this),this._list.numItems=this._assetArray.length,this._backButton.onClick(this.onBackButtonClick,this),this._saleButton.onClick(this.onSaleButtonClick,this)},e.prototype.renderListItem=function(t,e){var i,n,o=e;if(1==this._assetType){var s=this._assetArray[t];o.setName(s.name),o.setPrice("\u4e70\u5165\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(i=s.totalPrice)&&void 0!==i?i:0)),o.setCheck(s.isSelected)}else if(2==this._assetType){var a=this._assetArray[t];o.setName(a.name),o.setPrice("\u4e70\u5165\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(n=a.totalPrice)&&void 0!==n?n:0)),o.setCheck(a.isSelected)}this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onClickItem=function(t){var e=t,i=this._list.getChildIndex(t),n=this._list.childIndexToItemIndex(i);if(1==this._assetType){var o=this._assetArray[n];o.isSelected=!o.isSelected,e.setCheck(o.isSelected)}else if(2==this._assetType){var s=this._assetArray[n];s.isSelected=!s.isSelected,e.setCheck(s.isSelected)}},e.prototype.onSaleButtonClick=function(){for(var t=[],e=0,i=this._assetArray;e<i.length;e++){var n=i[e];if(1==this._assetType)(o=n).isSelected&&t.push(o.id);else if(2==this._assetType){var o;(o=n).isSelected&&t.push(o.id)}}0!=t.length?this.onSubmitResult&&this.onSubmitResult(1,t):r.default.show("\u8bf7\u9009\u62e9\u9700\u8981\u51fa\u552e\u7684\u8d44\u4ea7")},e.prototype.onBackButtonClick=function(){this.onSubmitResult&&this.onSubmitResult(2,null)},e}(fgui.Window);i.GameTradeAssetSaleActionWindow=z;var q=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._nameText=this.getChild("n6").asLabel,this._priceText=this.getChild("n5").asLabel,this._checkController=this.getController("isSelect")},e.prototype.setPrice=function(t){this._priceText.text=t},e.prototype.setName=function(t){this._nameText.text=t},e.prototype.setCheck=function(t){this._checkController.selectedIndex=t?1:0},e}(fgui.GButton);i.IncidentAssetSaleCell=q;var K=function(t){function e(e,i){var n=t.call(this)||this;return n._assetArray=[],n.onSubmitResult=null,n._assetType=i,n._assetArray=e,fgui.UIObjectFactory.setExtension("ui://Game/IncidentAssetSaleAssetCell",Z),n}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentAssetSaleActionOtherComponent").asCom;var t=this.contentPane.getChild("n1").asButton;this._saleButton=t;var e=this.contentPane.getChild("n2").asButton;this._backButton=e,this._list=this.contentPane.getChild("n3").asList,this.center(),this.setPivot(.5,.5),this.changeShowUI()},e.prototype.changeShowUI=function(){this._list.setVirtual(),this._list.itemRenderer=this.renderListItem.bind(this),this._list.numItems=this._assetArray.length,this._backButton.onClick(this.onBackButtonClick,this),this._saleButton.onClick(this.onSaleButtonClick,this)},e.prototype.renderListItem=function(t,e){var i,n,o=this,s=e;if(1==this._assetType){var a=this._assetArray[t];s.setPrice("\u4e70\u5165\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(i=a.eachPrice)&&void 0!==i?i:0)),s.setCheck(a.isSelected),s.setMaxCount(a.count),s.setName(a.name)}else if(2==this._assetType){var r=this._assetArray[t];s.setName(r.name),s.setPrice("\u4e70\u5165\u4ef7\u683c \uffe5"+l.default.thousandBitSeparator(null!==(n=r.price)&&void 0!==n?n:0)),s.setCheck(r.isSelected),s.setMaxCount(r.count)}s.onChangeResult=function(e){1==o._assetType?o._assetArray[t].selectCount=e:2==o._assetType&&(o._assetArray[t].selectCount=e)},s.onChangeItemResult=function(e){1==o._assetType?o._assetArray[t].isSelected=1==e:2==o._assetType&&(o._assetArray[t].isSelected=1==e)}},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=(this._list.childIndexToItemIndex(e),t);if(1==this._assetType){var n=this._assetArray[e];n.isSelected=!n.isSelected,i.setCheck(n.isSelected)}else if(2==this._assetType){var o=this._assetArray[e];o.isSelected=!o.isSelected,i.setCheck(o.isSelected)}},e.prototype.onSaleButtonClick=function(){for(var t=[],e=0,i=this._assetArray;e<i.length;e++){var n=i[e];if(1==this._assetType){if((l=n).isSelected&&l.selectCount>0){var o={id:l.id,count:l.selectCount};t.push(o)}}else 2==this._assetType&&(l=n).isSelected&&l.selectCount>0&&(o={id:l.id,count:l.selectCount},t.push(o))}if(0!=t.length){for(var s=0,a=this._assetArray;s<a.length;s++)if(n=a[s],1==this._assetType)(l=n).isSelected=!1;else if(2==this._assetType){var l;(l=n).isSelected=!1}this.onSubmitResult&&this.onSubmitResult(1,t)}else r.default.show("\u8bf7\u9009\u62e9\u9700\u8981\u51fa\u552e\u7684\u8d44\u4ea7")},e.prototype.onBackButtonClick=function(){this.onSubmitResult&&this.onSubmitResult(2,null)},e}(fgui.Window);i.GameTradeAssetSaleOtherActionWindow=K;var Z=function(t){function e(){var e=t.call(this)||this;return e.onChangeResult=null,e.onChangeItemResult=null,e}return o(e,t),e.prototype.onConstruct=function(){this._hadCountText=this.getChild("n7").asLabel,this._checkController=this.getController("isSelect"),this._numField=this.getChild("n13").asLabel,this._addButton=this.getChild("n12").asButton,this._decreaseButton=this.getChild("n11").asButton,this._addButton.onClick(this.onChooseAddClick,this),this._decreaseButton.onClick(this.onChooseDecreaseClick,this),this._contentButton=this.getChild("assetContent").asButton,this._nameText=this._contentButton.getChild("n6").asLabel,this._priceText=this._contentButton.getChild("n5").asLabel,this._contentButton.onClick(this.onChooseItemClick,this)},e.prototype.setPrice=function(t){this._priceText.text=t},e.prototype.setName=function(t){this._nameText.text=t},e.prototype.setCheck=function(t){this._checkController.selectedIndex=t?1:0},e.prototype.setMaxCount=function(t){this._maxCount=t,this._hadCountText.text="\u6301\u6709\u6570\u91cf\uff1a"+t},e.prototype.onChooseItemClick=function(){console.log("\u70b9\u51fb\u4e86:",this._contentButton.getController("isSelect").selectedIndex),0==this._contentButton.getController("isSelect").selectedIndex?this._contentButton.getController("isSelect").selectedIndex=1:this._contentButton.getController("isSelect").selectedIndex=0,this.onChangeItemResult&&this.onChangeItemResult(this._contentButton.getController("isSelect").selectedIndex)},e.prototype.onChooseAddClick=function(){var t=Number(this._numField.text);if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),isNaN(t))this._numField.text="0";else{var e=t+1;this._numField.text=""+(e>this._maxCount?this._maxCount:e)}var i=Number(this._numField.text);this.onChangeResult&&this.onChangeResult(i)},e.prototype.onChooseDecreaseClick=function(){var t=Number(this._numField.text);if(u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),u.default.log("\u5f53\u524d\u5355\u4f4d:",1),isNaN(t))this._numField.text="0";else{var e=t-1;this._numField.text=""+(e<=0?0:e)}var i=Number(this._numField.text);this.onChangeResult&&this.onChangeResult(i)},e}(fgui.GComponent);i.IncidentAssetSaleOtherCell=Z;var J=function(t){function e(e){var i=t.call(this)||this;return i.onSubmitResult=null,i._needAsset=e,i}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentLoanComponent").asCom;var t=this.contentPane.getChild("n1").asButton;this._sureButton=t;var e=this.contentPane.getChild("n2").asButton;this._abondonButton=e,this._contentLab=this.contentPane.getChild("n3").asLabel,this.center(),this.setPivot(.5,.5),this.changeShowUI()},e.prototype.changeShowUI=function(){var t;this._sureButton.onClick(this.onSureButtonClick,this),this._abondonButton.onceClick(this.onBackButtonClick,this),this._contentLab.text="\u73b0\u91d1\u4e0d\u8db3[color=#FF4A3D](-\uffe5"+l.default.thousandBitSeparator(null!==(t=this._needAsset)&&void 0!==t?t:0)+")[/color]"},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onBackButtonClick=function(){this.onSubmitResult&&this.onSubmitResult(0)},e.prototype.onSureButtonClick=function(){this.hide(),this.onSubmitResult&&this.onSubmitResult(1)},e}(fgui.Window);i.GameTradetLoanActionWindow=J;var Y=function(t){function e(){var e=t.call(this)||this;return e.onSubmitResult=null,e}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentBlueTransferComponent").asCom;var t=this.contentPane.getChild("n2").asButton;this._sureButton=t;var e=this.contentPane.getChild("n1").asButton;this._cancelButton=e,this.center(),this.setPivot(.5,.5),this.changeShowUI()},e.prototype.changeShowUI=function(){this._sureButton.onClick(this.onSureButtonClick,this),this._cancelButton.onClick(this.onBackButtonClick,this)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onBackButtonClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e.prototype.onSureButtonClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e}(fgui.Window);i.GameTradeTransferActionWindow=Y;var Q=function(t){function e(e){var i=t.call(this)||this;return i._unit=2e3,i.initial_amount=1e4,i.timer=void 0,i.lastTime=15,i.onSubmitResult=null,i.initial_amount=e,i}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","IncidentBlueBiddingComponent").asCom;var t=this.frame.getChild("n4").asButton;this._cancelButton=t;var e=this.frame.getChild("n3").asButton;this._sureButton=e;var i=this.frame.getChild("n7").asButton;this._addButton=i;var n=this.frame.getChild("n8").asButton;this._decreaseButton=n,this._inputField=this.frame.getChild("n6").asTextField,this._inputField.text=""+this.initial_amount,this.center(),this.setPivot(.5,.5),this.changeShowUI(),this.startTime()},e.prototype.changeShowUI=function(){this._sureButton.onClick(this.onSureButtonClick,this),this._cancelButton.onClick(this.onAbandonButtonClick,this),this._addButton.onClick(this.onChooseAddClick,this),this._decreaseButton.onClick(this.onChooseDecreaseClick,this)},e.prototype.startTime=function(){var t=this;console.log("\u5f00\u542f\u5b9a\u65f6\u5668"),this.start(this.lastTime,function(e){console.log("\u5f00\u59cb\u5012\u8ba1\u65f6:",e),t._cancelButton.title="\u653e\u5f03"+e+"s"},function(){console.log("\u505c\u6b62\u5b9a\u65f6\u5668"),t.hide()})},e.prototype.start=function(t,e,i){var n=this,o=t;n.timer&&(u.default.log("\u9500\u6bc1\u5b9a\u65f6\u5668"),n.stop()),this.timer=setInterval(function(){if(--o<=0)return n.stop(),void(i&&i());e&&e(o)},1e3)},e.prototype.stop=function(){this.timer&&clearInterval(this.timer)},e.prototype.endTime=function(){u.default.log("\u505c\u6b62\u5012\u8ba1\u65f6"),this.stop()},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},e.prototype.onAbandonButtonClick=function(){this.endTime(),this.onSubmitResult&&this.onSubmitResult(2,null)},e.prototype.onSureButtonClick=function(){var t=Number(this._inputField.text);u.default.log("\u7528\u6237\u8f93\u5165\u7684\u80a1\u7968\u6570\u91cf:",t),isNaN(t)||t<1e4||(this.endTime(),this.onSubmitResult&&this.onSubmitResult(1,t))},e.prototype.onChooseAddClick=function(){var t=Number(this._inputField.text),e=this._unit,i=this.initial_amount;if(isNaN(t)){var n=i+e;this._inputField.text=""+n}else n=t+e,this._inputField.text=""+n},e.prototype.onChooseDecreaseClick=function(){var t=Number(this._inputField.text),e=this._unit,i=this.initial_amount;if(isNaN(t))this._inputField.text=""+i;else{var n=t-e;this._inputField.text=""+(n<=i?i:n)}},e}(fgui.Window);i.GameTradeBiddingActionWindow=Q,cc._RF.pop()},{"../../Common/GameResourceUtil":"GameResourceUtil","../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Common/Util":"Util","../../Constant/RoomEventConstant":"RoomEventConstant","../../Cores/EventManager":"EventManager","../../Utils/MathUtil":"MathUtil","../Common/GameKeyboard":"GameKeyboard","../Common/Toast":"Toast"}],GameIncident:[function(t,e,i){"use strict";cc._RF.push(e,"6eda63+Q1xIcrDM+mxsT3Pk","GameIncident"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameIncidentService=void 0;var n=t("../../Common/GameResourceUtil"),o=t("../../Utils/AudioPlayer"),s=t("./Toast"),a=t("../../Common/Global"),r=t("../Windows/GameIncidentsWindow"),l=t("../../Common/GameServerUtil"),u=t("../../Common/GameUtils"),c=t("../../Constant/TrusteeshipEnum"),h=t("../../Constant/ChancelTypeConstant"),d=t("../../Common/LogUtil"),f=function(){function t(){}return t.handleSifterResult=function(t,e,i,r){var l=a.default.gameDiceVo,u=a.default.gameUserid==a.default.gameDiceVo.sender;7==l.mapType?(u&&s.default.show("\u6708\u5e95\u7ed3\u7b97"),u&&o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.RoundSettle),!1),u&&r&&r(u,!0,l.mapType)):1==l.isClearing?0==a.default.userInfo.status&&(s.default.show("\u6708\u5e95\u7ed3\u7b97"),o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.RoundSettle),!1),r&&r(u,!0,l.mapType)):r&&r(u,!1,l.mapType),1==l.mapType?u&&this.tradeSelectChance(t,i):2==l.mapType?this.marketNewsProcess(u,l.object,t,i):3==l.mapType?this.episodeProcess(u,l.object,t,e,i):4==l.mapType?this.createChildProcess(u,l.object,t,i):5==l.mapType?this.promotionProcess(u,l.object,t,i):6==l.mapType?this.skillProcess(u,l.object,t,e,i):7==l.mapType?i&&i(!1):8==l.mapType&&this.unemploymentProcess(u,l.object,t,i)},t.skillProcess=function(e,i,s,u,h){e&&o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Skill_other),!1);var f=this,m=i.skill,p=!1;e&&(p=a.default.userInfo.skillList.findIndex(function(t){return t.type===m.type})>-1);var _=new r.GameSkillWindow(m,p,e);_.show(),_.onSubmitResult=function(t){if(0==a.default.roomInfo.status&&0==a.default.userInfo.status)if(0==t){if(!f.checkAccountAsset(6,-1,m.price,null,u))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");_&&_.hide(),l.GameServerUtil.fetchGameSoleSkillBuy()}else 1==t&&(_&&_.hide(),l.GameServerUtil.fetchGameSoleAbandon());else _&&_.hide()},t.windowList.push(_),s(e,c.TrusteeshipEnum.skillBuy,_),h&&h(!1)},t.promotionProcess=function(e,i,s,u){e&&1==i.isRaises&&o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Raises),!1);var h=1==i.isRaises,d=new r.GameRaiseWindow(h,i.depict,e);d.show(),d.onSubmitResult=function(){0==a.default.roomInfo.status&&0==a.default.userInfo.status?l.GameServerUtil.fetchGameSoleAbandon():u&&u(!0)},t.windowList.push(d),s(e,c.TrusteeshipEnum.raises,d)},t.createChildProcess=function(e,i,s,u){e&&1==i.isChildren&&o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Child),!1);var h=new r.GameChildWindow(1!=i.isChildren,e);h.show(),h.onSubmitResult=function(t){h.hide(),1==t&&(0==a.default.roomInfo.status&&0==a.default.userInfo.status?l.GameServerUtil.fetchGameSoleAbandon():u&&u(!0))},t.windowList.push(h),s(e,c.TrusteeshipEnum.children,h)},t.unemploymentProcess=function(e,i,s,u){e&&o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Lose),!1);var h=new r.GameUnemploymentWindow(e,i.depict);h.show(),h.onSubmitResult=function(t){h.hide(),1==t&&(0==a.default.roomInfo.status&&0==a.default.userInfo.status?l.GameServerUtil.fetchGameSoleAbandon():u&&u(!0))},t.windowList.push(h),s(e,c.TrusteeshipEnum.loseCause,h)},t.episodeProcess=function(e,i,s,u,h){e&&o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Incident),!1);var f=this,m=i.episode,p=new r.GameEpisodeWindow(m,e);p.show(),p.onSubmitResult=function(t){if(1==t||2==t)if(0==a.default.roomInfo.status&&0==a.default.userInfo.status)if(1==t){if(!(a.default.userInfo.assetCash+a.default.userInfo.mayLoan-m.price>=0))return p.hide(),void l.GameServerUtil.fetchGameLifeIncidentBuy(1);if(!f.checkAccountAsset(3,-1,m.price,null,u))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");p.hide(),l.GameServerUtil.fetchGameLifeIncidentBuy(1)}else 2==t&&(p.hide(),l.GameServerUtil.fetchGameLifeIncidentBuy(2));else p.hide(),h&&h(!0);else 3==t&&(p.hide(),console.log("\u4e0d\u662f\u6211\u7684\u56de\u5408\u64cd\u4f5c"))},t.windowList.push(p),s(e,c.TrusteeshipEnum.lifeIncidentBuy,p)},t.marketNewsProcess=function(e,i,s,h){var d=this;if(1==i.marketType){if(h&&h(!0),3==a.default.userInfo.status)return;o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Incident),!1)}else if(2==i.marketType)o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.GoodNew),!1);else if(3==i.marketType){var f=i.object;1==!!a.default.userInfo.skillList.find(function(t){return t.type===f.skillType})&&f.skillType>0?o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Evade),!1):o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.BadNew),!1)}var m=a.default.userInfo,p=new r.GameMarketNewsWindow(i,e,m);if(p.show(),p.onSubmitResult=function(n){if(p.hide(),1==n);else if(2==n){var o=i.object,c=o.bigType;if(1==c||2==c){var f=u.GameUtils.extractMarketRequestBuy(o,m),_=new r.GameTradeAssetSaleActionWindow(f,c);_.show(),_.onSubmitResult=function(t,n){_.hide(),0==a.default.roomInfo.status&&0==a.default.userInfo.status&&(1==t?1==c?l.GameServerUtil.fetchGameHouseSell(n):2==c&&l.GameServerUtil.fetchGameCompanySell(n):2==t&&d.marketNewsProcess(e,i,s,h))},t.windowList.push(_)}else if(3==c||4==c){f=u.GameUtils.extractMarketRequestBuy(o,m);var g=new r.GameTradeAssetSaleOtherActionWindow(f,c-2);g.show(),g.onSubmitResult=function(t,n){g.hide(),0==a.default.roomInfo.status&&0==a.default.userInfo.status&&(1==t?3==c?l.GameServerUtil.fetchGameEquitySell(n):4==c&&l.GameServerUtil.fetchGameArticleSell(n):2==t&&d.marketNewsProcess(e,i,s,h))},t.windowList.push(g)}}else 3==n&&(0==a.default.roomInfo.status&&0==a.default.userInfo.status?l.GameServerUtil.fetchGameSoleAbandon():h&&h(!0))},t.windowList.push(p),e)s(!0,c.TrusteeshipEnum.marketNew,p);else{if(1==i.marketType&&u.GameUtils.handleMarketRequestBuy(i.object,a.default.userInfo))return void s(!0,c.TrusteeshipEnum.marketNew,p);s(!1,c.TrusteeshipEnum.marketNew,p)}},t.tradeSelectChance=function(e,i){var s=new r.GameTradeWindow;s.show(),s.onSubmitResult=function(t){0==a.default.roomInfo.status&&0==a.default.userInfo.status&&l.GameServerUtil.fetchGameSelectChance(t)},o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Chance),!1),t.windowList.push(s),e(!0,c.TrusteeshipEnum.selectChancel,s),i&&i(!1)},t.tradeStockChance=function(e,i,n,o,s){var u=this,h=a.default.userInfo.assetStockList.find(function(t){return t.stockType===i.stockType}),d=null!=h,f=new r.GameTradeStockWindow(e,i,d,n);f.show(),f.onSubmitResult=function(t){f&&f.hide(),1==t?u.tradeStockBuyEvent(e,i,n,o,s):2==t?u.tradeStockSaleEvent(e,h,i,n,o,s):3==t&&l.GameServerUtil.fetchGameSoleAbandon()},t.windowList.push(f),o(!(!e&&!d),c.TrusteeshipEnum.chancelResult,f)},t.tradeStockSaleEvent=function(e,i,n,o,s,u){var c=this,h=new r.GameTradeStockSaleActionWindow(i,a.default.userInfo);h.show(),h.onSubmitResult=function(t,i){h&&h.hide(),1==t?l.GameServerUtil.fetchGameStockDeal(2,i):2==t&&c.tradeStockChance(e,n,o,s,u)},t.windowList.push(h)},t.tradeStockBuyEvent=function(e,i,n,o,s){var a=this,u=new r.GameTradeStockBuyActionWindow(i);u.show(),u.onSubmitResult=function(t,r){if(1==t){if(!a.checkAccountAsset(1,1,r,i,s))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");u&&u.hide(),l.GameServerUtil.fetchGameStockDeal(1,r)}else 2==t&&(u&&u.hide(),a.tradeStockChance(e,i,n,o,s))},t.windowList.push(u)},t.tradeFuturesChance=function(e,i,n,o){var u=this,h=new r.GameTradeFuturesWindow(i,a.default.userInfo.assetFuturesList,e);h.show(),h.onSubmitResult=function(c){if(1==c||2==c){h&&h.hide();var f=new r.GameTradeFutureActionWindow(i,c);f.show(),f.onSubmitResult=function(t,s){if(1==t){if(!u.checkAccountAsset(1,2,s,i,o))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");f&&f.hide(),l.GameServerUtil.fetchGameFuturesDeal(c,s,null)}else u.tradeFuturesChance(e,i,n,o)},t.windowList.push(f)}else if(4==c)h&&h.hide(),l.GameServerUtil.fetchGameSoleAbandon();else if(3==c)if(a.default.userInfo.assetFuturesList.length>0){h&&h.hide();var m=new r.GameTradeExponentActionWindow(i,a.default.userInfo.assetFuturesList);m.show(),m.onSubmitResult=function(t,s){m&&m.hide(),1==t?l.GameServerUtil.fetchGameFuturesDeal(3,null,s):u.tradeFuturesChance(e,i,n,o)},t.windowList.push(m)}else s.default.show("\u60a8\u6ca1\u6709\u80a1\u6307\u53ef\u5e73\u4ed3")},t.windowList.push(h),e?n(!0,c.TrusteeshipEnum.future,h):a.default.userInfo.assetFuturesList&&a.default.userInfo.assetFuturesList.length>0?n(!0,c.TrusteeshipEnum.future,h):n(!1,c.TrusteeshipEnum.future,h)},t.tradeInvestHoueseChance=function(e,i,n,o,s){var a=this,u=new r.GameTradeInvestHouseWindow(e,i,n);u.show(),u.onSubmitResult=function(t){if(1==t){if(!a.checkAccountAsset(1,3,null,i,s))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");u&&u.hide(),l.GameServerUtil.fetchGameHouseBuy()}else 2==t?(u&&u.hide(),a.showTransferChance(function(){a.tradeInvestHoueseChance(e,i,n,o,s)})):3==t?(u&&u.hide(),l.GameServerUtil.fetchGameSoleAbandon()):4==t&&u&&u.hide()},t.windowList.push(u),o(e,c.TrusteeshipEnum.chancelResult,u)},t.tradeInvestCompanyChance=function(e,i,n,o,s,a){var u=this,h=new r.GameTradeInvestCompanyWindow(e,i,n,o);h.show(),h.onSubmitResult=function(t){if(1==t){if(!u.checkAccountAsset(1,4,null,i,a))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");h&&h.hide(),l.GameServerUtil.fetchGameCompanyBuy()}else 2==t?(h&&h.hide(),u.showTransferChance(function(){u.tradeInvestCompanyChance(e,i,n,o,s,a)})):3==t?(h&&h.hide(),l.GameServerUtil.fetchGameSoleAbandon()):4==t&&h&&h.hide()},t.windowList.push(h),s(e,c.TrusteeshipEnum.chancelResult,h)},t.tradeStockEquityChance=function(e,i,n,o,s){var u=this,h=new r.GameTradeStockEquityWindow(e,i,n);h.show(),h.onSubmitResult=function(c){if(h&&h.hide(),1==c){var f=0,m=a.default.userInfo.assetEquityList.find(function(t){return t.type===i.type});m&&null!=m&&(f=m.count);var p=i.maxEach-f,_=new r.GameTradeInvestActionWindow(r.InvestActionType.equity,10*p,null,null);_.show(),_.onSubmitResult=function(t,a){if(1==t){if(.1*a>p)return;if(!u.checkAccountAsset(1,5,.1*a,i,s))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");_&&_.hide(),l.GameServerUtil.fetchGameEquityBuy(.1*a)}else 2==t&&(_&&_.hide(),u.tradeStockEquityChance(e,i,n,o,s))},t.windowList.push(_)}else 2==c?u.showTransferChance(function(){u.tradeStockEquityChance(e,i,n,o,s)}):3==c&&l.GameServerUtil.fetchGameSoleAbandon()},t.windowList.push(h),o(e,c.TrusteeshipEnum.chancelResult,h)},t.tradeFixationChance=function(e,i,n,o){var s=this,a=new r.GameTradeFixationWindow(e,i);a.show(),a.onSubmitResult=function(u){if(1==u)if(3==i.type){if(!s.checkAccountAsset(1,6,1,i,o))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");a&&a.hide(),l.GameServerUtil.fetchGameArticleBuy(1)}else{a&&a.hide();var c=1==i.type?r.InvestActionType.Gold:r.InvestActionType.Stamp,h=new r.GameTradeInvestActionWindow(c,i.maxBuyCount,i.minBuyCount,i.price);h.show(),h.onSubmitResult=function(t,a){if(1==t){if(!s.checkAccountAsset(1,6,a,i,o))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");h&&h.hide(),l.GameServerUtil.fetchGameArticleBuy(a)}else 2==t&&(h&&h.hide(),s.tradeFixationChance(e,i,n,o))},t.windowList.push(h)}else 2==u?(a&&a.hide(),s.showTransferChance(function(){s.tradeFixationChance(e,i,n,o)})):3==u?(a&&a.hide(),l.GameServerUtil.fetchGameSoleAbandon()):4==u&&a&&a.hide()},t.windowList.push(a),n(e,c.TrusteeshipEnum.chancelResult,a)},t.tradeSpeculateChance=function(e,i,n,o){var s=this,a=new r.GameTradeSpeculateWindow(e,i);a.show(),a.onSubmitResult=function(u){if(a&&a.hide(),1==u){var c=new r.GameTradeInvestActionWindow(r.InvestActionType.risk,0,null,null);c.show(),c.onSubmitResult=function(t,a){if(1==t){if(!s.checkAccountAsset(1,7,a,i,o))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");c&&c.hide(),l.GameServerUtil.fetchGameSpeculateBuy(a)}else 2==t&&(c&&c.hide(),s.tradeSpeculateChance(e,i,n,o))},t.windowList.push(c)}else 2==u&&l.GameServerUtil.fetchGameSoleAbandon()},t.windowList.push(a),n(e,c.TrusteeshipEnum.chancelResult,a)},t.auctionBid=function(e,i,s){var f=this;if(!u.GameUtils.checkBankrupt(a.default.roomInfo,a.default.userInfo)){o.default.playEffect(n.GameSoundUtil.incidentSounds(n.GameSoundMode.Transfer),!1);var m=a.default.roomInfo,p=m.auctionObject.incidentType,_=m.auctionObject,g=a.default.userInfo.skillList,y=m.userInfoList.find(function(t){return t.userId===m.currentUserId}).nickname;if(p===h.ChancelTypeConstant.HOUSE){var C=new r.GameTradeInvestHouseBiddingWindow(y,_,g,r.IncidentServiceMode.biddingPrepare);C.show(),C.onSubmitResult=function(t){C&&C.hide(),0==t?l.GameServerUtil.fetchGameAuctionAbandon():1==t&&f.auctionToBidding(e,s)},t.windowList.push(C),i(c.TrusteeshipEnum.auction,C)}else if(p===h.ChancelTypeConstant.COMPANY){var b=new r.GameTradeInvestCompanyBiddingWindow(y,_,g,a.default.userInfo.assetCompanyList,r.IncidentServiceMode.biddingPrepare);b.show(),b.onSubmitResult=function(t){b&&b.hide(),0==t?l.GameServerUtil.fetchGameAuctionAbandon():1==t&&f.auctionToBidding(e,s)},t.windowList.push(b),i(c.TrusteeshipEnum.auction,b)}else if(p===h.ChancelTypeConstant.EQUITY){var v=new r.GameTradeStockEquityBiddingWindow(y,_,g,r.IncidentServiceMode.biddingPrepare);v.show(),v.onSubmitResult=function(t){v&&v.hide(),0==t?l.GameServerUtil.fetchGameAuctionAbandon():1==t&&f.auctionToBidding(e,s)},t.windowList.push(v),i(c.TrusteeshipEnum.auction,v)}else if(p===h.ChancelTypeConstant.ARTICLE){var w=new r.GameTradeFixationBiddingWindow(y,_,r.IncidentServiceMode.biddingPrepare);w.show(),w.onSubmitResult=function(t){d.default.log("event:"+t),w&&w.hide(),0==t?l.GameServerUtil.fetchGameAuctionAbandon():1==t&&f.auctionToBidding(e,s)},t.windowList.push(w),i(c.TrusteeshipEnum.auction,w)}}},t.auctionBuy=function(e,i){var n=this,o=e.roomInfo,s=o.auctionObject.incidentType,u=o.auctionObject;d.default.log("roomInfo.auctionObject:",u),d.default.log("roomInfo.incidentType:",s);var c=a.default.userInfo.skillList;if(s===h.ChancelTypeConstant.HOUSE){var f=new r.GameTradeInvestHouseBiddingWindow(null,u,c,r.IncidentServiceMode.biddingBuy);f.show(),f.onSubmitResult=function(t){if(0==t)f&&f.hide(),l.GameServerUtil.fetchGameSoleAbandon();else if(2==t){if(!n.checkAccountAsset(1,3,null,u,i))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");f&&f.hide(),l.GameServerUtil.fetchGameHouseBuy()}},t.windowList.push(f)}else if(s==h.ChancelTypeConstant.COMPANY){var m=new r.GameTradeInvestCompanyBiddingWindow(null,u,c,a.default.userInfo.assetCompanyList,r.IncidentServiceMode.biddingBuy);m.show(),m.onSubmitResult=function(t){if(0==t)m&&m.hide(),l.GameServerUtil.fetchGameSoleAbandon();else if(2==t){if(!n.checkAccountAsset(1,4,null,u,i))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");m&&m.hide(),l.GameServerUtil.fetchGameCompanyBuy()}},t.windowList.push(m)}else if(s==h.ChancelTypeConstant.EQUITY){var p=u,_=new r.GameTradeStockEquityBiddingWindow(null,u,c,r.IncidentServiceMode.biddingBuy);_.show(),_.onSubmitResult=function(o){if(_&&_.hide(),0==o)l.GameServerUtil.fetchGameSoleAbandon();else if(2==o){var s=0,u=a.default.userInfo.assetEquityList.find(function(t){return t.type===p.type});u&&null!=u&&(s=u.count);var c=p.maxEach-s,h=new r.GameTradeInvestActionWindow(r.InvestActionType.equity,10*c,null,null);h.show(),h.onSubmitResult=function(t,o){if(1==t){if(.1*o>c)return;if(!n.checkAccountAsset(1,5,.1*o,p,i))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");h&&h.hide(),l.GameServerUtil.fetchGameEquityBuy(.1*o)}else 2==t&&(h&&h.hide(),n.auctionBuy(e,i))},t.windowList.push(h)}},t.windowList.push(_)}else if(s==h.ChancelTypeConstant.ARTICLE){var g=u,y=new r.GameTradeFixationBiddingWindow(null,u,r.IncidentServiceMode.biddingBuy);y.show(),y.onSubmitResult=function(o){if(0==o)y&&y.hide(),l.GameServerUtil.fetchGameSoleAbandon();else if(2==o)if(3==g.type){if(!n.checkAccountAsset(1,6,1,g,i))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");y&&y.hide(),l.GameServerUtil.fetchGameArticleBuy(1)}else{y&&y.hide();var s=1==g.type?r.InvestActionType.Gold:r.InvestActionType.Stamp,a=new r.GameTradeInvestActionWindow(s,g.maxBuyCount,g.minBuyCount,g.price);a.show(),a.onSubmitResult=function(t,o){if(1==t){if(!n.checkAccountAsset(1,6,o,g,i))return void d.default.log("\u8d44\u91d1\u4e0d\u8db3");a&&a.hide(),l.GameServerUtil.fetchGameArticleBuy(o)}else 2==t&&(a&&a.hide(),n.auctionBuy(e,i))},t.windowList.push(a)}},t.windowList.push(y)}},t.auctionToBidding=function(e,i){var n=this,o=new r.GameTradeBiddingActionWindow(e.price);o.show(),o.onSubmitResult=function(t,e){n.checkAccountAsset(9,-1,e,null,i)?(o&&o.hide(),1==t?l.GameServerUtil.fetchGameAuctionBid(e):2==t&&l.GameServerUtil.fetchGameAuctionAbandon()):d.default.log("\u8d44\u91d1\u4e0d\u8db3")},t.windowList.push(o)},t.showTransferChance=function(e){var i=new r.GameTradeTransferActionWindow;i.show(),i.onSubmitResult=function(t){if(1==t)return i&&i.hide(),void l.GameServerUtil.fetchGameAuction();e&&e()},t.windowList.push(i)},t.handleChanceResult=function(t,e,i){var n=a.default.userInfo.skillList,o=a.default.userInfo.assetCompanyList,s=t.sender===a.default.gameUserid;if(!s){if(0!=t.roomInfo.status)return;if(3==a.default.userInfo.status)return}switch(t.incidentType){case 1:var r=t.object;this.tradeStockChance(s,r,n,e,i);break;case 2:var l=t.object;this.tradeFuturesChance(s,l,e,i);break;case 3:var u=t.object;this.tradeInvestHoueseChance(s,u,n,e,i);break;case 4:var c=t.object;this.tradeInvestCompanyChance(s,c,n,o,e,i);break;case 5:var h=t.object;this.tradeStockEquityChance(s,h,n,e,i);break;case 6:var d=t.object;this.tradeFixationChance(s,d,e,i);break;case 7:var f=t.object;this.tradeSpeculateChance(s,f,e,i)}},t.checkAccountAsset=function(e,i,n,o,s){var l=a.default.userInfo;if(null==l)return!0;var u=l.assetCash,c=this.calculateLoanAmount(e,i,n,o);if(3==e&&u+a.default.userInfo.mayLoan-c<0)return!0;var h=!1;if(u>=c&&(h=!0),!h){var d=Math.abs(u-c),f=new r.GameTradetLoanActionWindow(d);f.onSubmitResult=function(t){0==t?f.hide():1==t&&(a.default.expectLoan=d,s&&s())},f.show(),t.windowList.push(f)}return h},t.calculateLoanAmount=function(t,e,i,n){var o=0;if(1==t)if(1==e)o=i*(s=n).price;else if(2==e)o=i*(s=n).price;else if(3==e)o=(s=n).firstPrice;else if(4==e)o=(s=n).firstPrice;else if(5==e)o=i*(s=n).eachPrice;else if(6==e){var s;o=3==(s=n).type?s.price:Number(i)*s.price}else 7==e&&(o=i);else 3==t?o=i:6==t?o=i:9==t&&(o=i);return o},t.windowList=[],t}();i.GameIncidentService=f,cc._RF.pop()},{"../../Common/GameResourceUtil":"GameResourceUtil","../../Common/GameServerUtil":"GameServerUtil","../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Constant/ChancelTypeConstant":"ChancelTypeConstant","../../Constant/TrusteeshipEnum":"TrusteeshipEnum","../../Utils/AudioPlayer":"AudioPlayer","../Windows/GameIncidentsWindow":"GameIncidentsWindow","./Toast":"Toast"}],GameInviteAppView:[function(t,e,i){"use strict";cc._RF.push(e,"f0c55Bfv7ZDraMMah69d++q","GameInviteAppView");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.TeamInviteAppCell=i.GameInviteAppView=void 0;var a=t("../../Common/GameServerUtil"),r=t("../../Common/Global"),l=t("../../Common/LogUtil"),u=t("../Common/Toast"),c=cc._decorator,h=c.ccclass,d=(c.property,function(t){function e(){var e=t.call(this)||this;return e._friends=[],e._pageNum=1,e.onSubmitResult=null,console.log("constructor"),fgui.UIObjectFactory.setExtension("ui://TeamGame/TeamInviteAppCell",f),e}return o(e,t),e.prototype.onInit=function(){console.log("onInit"),this.contentPane=fgui.UIPackage.createObject("TeamGame","TeamInviteAppView").asCom,this.makeFullScreen(),this.center(),this.setPivot(.5,.5),this._chatList=this.contentPane.getChild("n4").asList,this._chatList.setVirtual(),this._chatList.itemRenderer=this.renderListItem.bind(this);var t=this.contentPane.getChild("n2").asButton;t.onClick(this.onCloseClick,this),this.closeButton=t,this.fetchServiceFriendList(),this._chatList.on(fgui.Event.PULL_UP_RELEASE,this.onPullUpToRefresh,this)},e.prototype.renderListItem=function(t,e){var i=this._friends[t],n=e;n.setName(i.nickname),n.setLevel(i.financeGrade),n.setRoleImage(i.faceUrl),n.setInvite(i.isInvite),n.onSubmitResult=function(){4!==r.default.room.players.length?a.GameServerUtil.fetchServiceGameInvite(i.userId,r.default.room.id,function(){console.log("\u9080\u8bf7\u53d1\u9001\u6210\u529f"),i.isInvite=1,n.setInvite(i.isInvite),n.startCountTime()},function(t){u.default.show(null!=t?t:"\u9080\u8bf7\u53d1\u9001\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e")}):u.default.show("\u623f\u95f4\u73a9\u5bb6\u5df2\u6ee1\uff0c\u65e0\u6cd5\u7ee7\u7eed\u9080\u8bf7")},n.onStopTimeResult=function(){i.isInvite=0}},e.prototype.onCloseClick=function(){this.onSubmitResult&&this.onSubmitResult()},e.prototype.onPullUpToRefresh=function(){var t=this._chatList.scrollPane.footer.asCom;if(this.friendInfoObject){if(0==this.friendInfoObject.total)return;if(this.friendInfoObject.total==this._friends.length){t.getController("c1").selectedIndex=2,this._chatList.scrollPane.lockFooter(t.sourceHeight);var e=this;return void setTimeout(function(){e.hideFooter()},3e3)}}t.getController("c1").selectedIndex=1,this._chatList.scrollPane.lockFooter(t.sourceHeight),this._pageNum+=1,this.fetchServiceFriendList()},e.prototype.hideFooter=function(){this._chatList.scrollPane.footer.asCom.getController("c1").selectedIndex=1,this._chatList.scrollPane.lockFooter(0)},e.prototype.fetchServiceFriendList=function(){var t=this,e=this._pageNum,i=this;a.GameServerUtil.fetchServiceFriendList(e,function(n){if(t.hideFooter(),0!=n.length){var o=n,s=o.rows;1==e?i._friends=s:i._friends.concat(s),i._chatList.numItems=t._friends.length,i.friendInfoObject=o}},function(){l.default.log("\u83b7\u53d6\u5feb\u6377\u77ed\u8bed\u5931\u8d25")})},s([h],e)}(fgui.Window));i.GameInviteAppView=d;var f=function(t){function e(){var e=t.call(this)||this;return e._lastTime=60,e.onSubmitResult=null,e.onStopTimeResult=null,e}return o(e,t),e.prototype.onConstruct=function(){this._nameLab=this.getChild("n5").asLabel;var t=this.getChild("n4").asCom;this._faceLoader=t.getChild("n0").asLoader,this._inviteController=this.getController("isSelected"),this._levelController=this.getController("level"),this._timeButton=this.getChild("n6").asButton,this.getChild("n3").onClick(this.onInviteButtonClick,this)},e.prototype.setInvite=function(t){1==t&&1==this._inviteController.selectedIndex||0==t&&0==this._inviteController.selectedIndex||(this._inviteController.selectedIndex=1==t?1:0)},e.prototype.setLevel=function(t){this._levelController.selectedIndex=t},e.prototype.setName=function(t){this._nameLab.text=t},e.prototype.setRoleImage=function(t){this._faceLoader.url=t},e.prototype.onInviteButtonClick=function(){this.onSubmitResult&&this.onSubmitResult()},e.prototype.onDestroy=function(){},e.prototype.onUpdate=function(){},e.prototype.startCountTime=function(){var t=this;console.log("\u5f00\u542f\u8ba1\u65f6\u5668"),t.timer&&clearInterval(t.timer),t.timer=setInterval(function(){t._lastTime>0?t.countTime():t.stopTimer()},1e3)},e.prototype.countTime=function(){this._lastTime--;var t=this._lastTime%60;console.log("\u8ba1\u65f6\u5668-\u79d2\u6570:",t);var e=t>9?""+t:"0"+t;this._timeButton.title=e+"s"},e.prototype.stopTimer=function(){this.timer&&clearInterval(this.timer),this._lastTime=60,this.setInvite(0),this.onStopTimeResult&&this.onStopTimeResult()},e.prototype.onDisable=function(){},e}(fgui.GComponent);i.TeamInviteAppCell=f,cc._RF.pop()},{"../../Common/GameServerUtil":"GameServerUtil","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../Common/Toast":"Toast"}],GameKeyboard:[function(t,e,i){"use strict";cc._RF.push(e,"c5fbfEtiExDBoYBPSKKG9ek","GameKeyboard");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameKeyboard=i.GameKeyboardMode=void 0;var a,r=t("../../Common/LogUtil"),l=t("../../Utils/MathUtil"),u=cc._decorator,c=u.ccclass;u.property,function(t){t[t.board_0=0]="board_0",t[t.board_1=1]="board_1",t[t.board_2=2]="board_2",t[t.board_3=3]="board_3",t[t.board_4=4]="board_4",t[t.board_5=5]="board_5",t[t.board_6=6]="board_6",t[t.board_7=7]="board_7",t[t.board_8=8]="board_8",t[t.board_9=9]="board_9",t[t.board_delete=10]="board_delete",t[t.board_sure=11]="board_sure"}(a=i.GameKeyboardMode||(i.GameKeyboardMode={}));var h=function(t){function e(){var e=t.call(this)||this;return e._inputString="0",e.onSubmitResult=null,e._inputString="0",e}return o(e,t),e.prototype.onConstruct=function(){var t=this.getChild("frame").asCom;this._keyboard_0=t.getChild("n0").asButton,this._keyboard_1=t.getChild("n1").asButton,this._keyboard_2=t.getChild("n2").asButton,this._keyboard_3=t.getChild("n3").asButton,this._keyboard_4=t.getChild("n4").asButton,this._keyboard_5=t.getChild("n5").asButton,this._keyboard_6=t.getChild("n6").asButton,this._keyboard_7=t.getChild("n7").asButton,this._keyboard_8=t.getChild("n8").asButton,this._keyboard_9=t.getChild("n9").asButton,this._keyboard_delete=t.getChild("n10").asButton,this._keyboard_sure=t.getChild("n11").asButton,this._keyboard_0.onClick(this.onChooseClick0,this),this._keyboard_1.onClick(this.onChooseClick1,this),this._keyboard_2.onClick(this.onChooseClick2,this),this._keyboard_3.onClick(this.onChooseClick3,this),this._keyboard_4.onClick(this.onChooseClick4,this),this._keyboard_5.onClick(this.onChooseClick5,this),this._keyboard_6.onClick(this.onChooseClick6,this),this._keyboard_7.onClick(this.onChooseClick7,this),this._keyboard_8.onClick(this.onChooseClick8,this),this._keyboard_9.onClick(this.onChooseClick9,this),this._keyboard_delete.onClick(this.onChooseClick10,this),this._keyboard_sure.onClick(this.onChooseClick11,this)},e.prototype.checkFirstNumber=function(t){var e=l.default.thousandToNumber(this._inputString),i="";if(0==e.length)i=""+t;else if(1==e.length&&"0"===e)i=""+t;else{var n=l.default.thousandToNumber(e)+""+t;r.default.log("\u3010\u81ea\u5b9a\u4e49\u952e\u76d8\u3011\u5f53\u524d\u8f93\u5165\u6570\u5b57:",n),i=l.default.thousandBitSeparator(n)}return i},e.prototype.onChooseClick0=function(){this.onSubmitResult&&this.onSubmitResult(a.board_0)},e.prototype.onChooseClick1=function(){this.onSubmitResult&&this.onSubmitResult(a.board_1)},e.prototype.onChooseClick2=function(){this.onSubmitResult&&this.onSubmitResult(a.board_2)},e.prototype.onChooseClick3=function(){this.onSubmitResult&&this.onSubmitResult(a.board_3)},e.prototype.onChooseClick4=function(){this.onSubmitResult&&this.onSubmitResult(a.board_4)},e.prototype.onChooseClick5=function(){this.onSubmitResult&&this.onSubmitResult(a.board_5)},e.prototype.onChooseClick6=function(){this.onSubmitResult&&this.onSubmitResult(a.board_6)},e.prototype.onChooseClick7=function(){this.onSubmitResult&&this.onSubmitResult(a.board_7)},e.prototype.onChooseClick8=function(){this.onSubmitResult&&this.onSubmitResult(a.board_8)},e.prototype.onChooseClick9=function(){this.onSubmitResult&&this.onSubmitResult(a.board_9)},e.prototype.onChooseClick10=function(){this.onSubmitResult&&this.onSubmitResult(a.board_delete)},e.prototype.onChooseClick11=function(){this.onSubmitResult&&this.onSubmitResult(a.board_sure)},s([c],e)}(fgui.GComponent);i.GameKeyboard=h,cc._RF.pop()},{"../../Common/LogUtil":"LogUtil","../../Utils/MathUtil":"MathUtil"}],GameLoadingWindow:[function(t,e,i){"use strict";cc._RF.push(e,"22c63DpQg1FapJngQJBroLn","GameLoadingWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameLoadingWindow=void 0;var a=cc._decorator,r=a.ccclass,l=(a.property,function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Main","GameLoadingWindow").asCom,this.makeFullScreen(),this.setPivot(.5,.5)},s([r],e)}(fgui.Window));i.GameLoadingWindow=l,cc._RF.pop()},{}],GameOtherUserWindow:[function(t,e,i){"use strict";cc._RF.push(e,"a84adIxPgdHMYx722ZGK2Du","GameOtherUserWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameOtherUserAssetList=void 0;var a=t("../../Common/DataUtil"),r=t("../../Utils/MathUtil"),l=cc._decorator,u=l.ccclass,c=(l.property,function(t){function e(e){var i=t.call(this)||this;return i._listArray=["\u91d1\u878d\u6295\u8d44","\u623f\u4ea7\u6295\u8d44","\u4f01\u4e1a\u6295\u8d44","\u80a1\u6743\u6295\u8d44","\u6536\u85cf\u54c1"],i._userInfo=e,fgui.UIObjectFactory.setExtension("ui://Game/GameOtherUserAssetList",h),fgui.UIPackage.loadPackage("UI/Game",i.onInit.bind(i)),i}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","GameOtherUserWindow").asCom,this.makeFullScreen(),this.showUI(),this._list=this.contentPane.getChild("n28").asList,this._list.removeChildrenToPool(),this.closeButton=this.contentPane.getChild("n2").asButton,this.center(),this.setPivot(.5,.5),this.renderListItem()},e.prototype.renderListItem=function(){for(var t,e,i=this._listArray.length,n=0;n<i;n++){var o=this._listArray[n],s=this._list.addItemFromPool().asCom,a=[];if(0==n){for(var r=null!==(t=this._userInfo.assetStockList)&&void 0!==t?t:[],l=null!==(e=this._userInfo.assetFuturesList)&&void 0!==e?e:[],u=0,c=r;u<c.length;u++){var h=c[u];a.push(h)}for(var d=0,f=l;d<f.length;d++){var m=f[d];a.push(m)}s.refreList(a,0,o)}else 1==n?(a=this._userInfo.assetHouseList,s.refreList(a,1,o)):2==n?(a=this._userInfo.assetCompanyList,s.refreList(a,2,o)):3==n?(a=this._userInfo.assetEquityList,s.refreList(a,3,o)):4==n&&(a=this._userInfo.assetArticleList,s.refreList(a,4,o));this.changeItemSize(s,a)}},e.prototype.changeItemSize=function(t,e){var i=40*(null!=e?e:[]).length;t._list.setSize(t.width-30,i),t._bjView.setSize(t.width-30,i+30),t.setSize(t.width,i+94)},e.prototype.showUI=function(){var t,e,i,n,o,s;this.contentPane.getChild("n3").text=null!==(t=this._userInfo.nickname)&&void 0!==t?t:"\u672a\u8bbe\u7f6e",this.contentPane.getChild("userLoader").asCom.getChild("n0").asLoader.url=this._userInfo.faceUrl,this.contentPane.getChild("n8").text=this._userInfo.roleName,this.contentPane.getChild("n9").text="\uffe5"+(null!==(e=this._userInfo.accordIncome)&&void 0!==e?e:0);var r=this.contentPane.getChild("n13").asImage,l=this.contentPane.getChild("n14").asImage,u=this.contentPane.getChild("n15").asImage;0==this._userInfo.expendChildrenCount?(r.visible=!1,l.visible=!1,u.visible=!1):1==this._userInfo.expendChildrenCount?(r.visible=!0,l.visible=!1,u.visible=!1):2==this._userInfo.expendChildrenCount?(r.visible=!0,l.visible=!0,u.visible=!1):3==this._userInfo.expendChildrenCount&&(r.visible=!0,l.visible=!0,u.visible=!0);var c=(100*this._userInfo.libertyRate).toFixed(1);this.contentPane.getChild("n17").asLabel.text=c+"%",this.contentPane.getChild("n38").asProgress.value=Number(c),this.contentPane.getChild("n18").asLabel.text="\xa5"+a.moneyToWan(null!==(i=this._userInfo.assetCash)&&void 0!==i?i:0),this.contentPane.getChild("n20").asLabel.text="\xa5"+a.moneyToWan(null!==(n=this._userInfo.totalExpend)&&void 0!==n?n:0),this.contentPane.getChild("n22").asLabel.text="\xa5"+a.moneyToWan(null!==(o=this._userInfo.passiveIncome)&&void 0!==o?o:0),this.contentPane.getChild("n24").asLabel.text="\xa5"+a.moneyToWan(null!==(s=this._userInfo.cashFlow)&&void 0!==s?s:0)},s([u],e)}(fgui.Window));i.default=c;var h=function(t){function e(){var e=t.call(this)||this;return e._listArray=[],e._mode=0,e}return o(e,t),e.prototype.onConstruct=function(){this._nameLab=this.getChild("n0").asLabel,this._bjView=this.getChild("n2").asImage,this._list=this.getChild("n1").asList,this._list.removeChildrenToPool()},e.prototype.refreList=function(t,e,i){void 0===t&&(t=[]),this._mode=e,this._listArray=t,this._nameLab.text=i,this.renderListItem()},e.prototype.renderListItem=function(){for(var t,e,i,n,o,s,l,u,c,h,d,f,m,p,_,g,y=this._listArray.length,C=0;C<y;C++){var b=this._listArray[C],v=this._list.addItemFromPool().asCom,w=v.getChild("n0").asLabel,S=v.getChild("n1").asLabel,k=v.getChild("n2").asLabel;0==this._mode?null==b.operate||null==b.operate?(w.text=b.name,S.text="\xa5"+a.moneyToWan(null!==(t=b.totalPrice)&&void 0!==t?t:0),k.text="\xa5"+r.default.thousandBitSeparator(null!==(e=b.price)&&void 0!==e?e:0)+"/\u80a1"):(w.text=b.name,S.text=(null!==(i=b.count)&&void 0!==i?i:0)+"\u624b",k.text="\xa5"+r.default.thousandBitSeparator(null!==(n=b.price)&&void 0!==n?n:0)+"/\u624b"):1==this._mode?(w.text=b.name,S.text=""+a.moneyToWan(null!==(o=b.totalPrice)&&void 0!==o?o:0),k.text="\xa5"+r.default.thousandBitSeparator(null!==(s=b.monthCashFlow)&&void 0!==s?s:0)+"/\u6708"):2==this._mode?(w.text=b.name,S.text=""+a.moneyToWan(null!==(l=b.totalPrice)&&void 0!==l?l:0),k.text="\xa5"+r.default.thousandBitSeparator(null!==(u=b.monthCashFlow)&&void 0!==u?u:0)+"/\u6708"):3==this._mode?(w.text=b.name,S.text=(null!==(c=b.count)&&void 0!==c?c:0)+"0",k.text="\xa5"+r.default.thousandBitSeparator(null!==(h=b.monthCashFlow)&&void 0!==h?h:0)+"/\u6708"):4==this._mode&&(w.text=b.name,S.text=""+(null!==(d=b.count)&&void 0!==d?d:0),k.text="\xa5"+r.default.thousandBitSeparator(null!==(f=b.price)&&void 0!==f?f:0),1==b.type?S.text=(null!==(m=b.count)&&void 0!==m?m:0)+"\u6839":2==b.type?S.text=(null!==(p=b.count)&&void 0!==p?p:0)+"\u679a":3==b.type?S.text=(null!==(_=b.count)&&void 0!==_?_:0)+"\u4ef6":S.text=""+(null!==(g=b.count)&&void 0!==g?g:0))}},e}(fgui.GComponent);i.GameOtherUserAssetList=h,cc._RF.pop()},{"../../Common/DataUtil":"DataUtil","../../Utils/MathUtil":"MathUtil"}],GamePlayer:[function(t,e,i){"use strict";cc._RF.push(e,"4b033THuH1BTYdlkyHEAvKe","GamePlayer");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=(s.ccclass,s.property,function(t){function e(e,i){var n=t.call(this)||this;return n._game_location=0,n._player=e,n._game_location=i,n}return o(e,t),e.prototype.onInit=function(){},e.prototype.step=function(t,e,i,n,o,s){var a=this,r=i.getChild("n"+(0==e?1:e)).localToGlobalRect(0,0,n.width,n.height);cc.tween(this._player).to(.25,{y:this._player.y,x:this._player.x},{easing:"sineOut"}).to(.25,{y:r.y-50,x:r.x-10},{easing:"sineIn"}).call(function(){if(a._player.setPosition(r.x-10,r.y-50),28==e?(e=0,a.changeGameRoleLocation(a._player,28)):a.changeGameRoleLocation(a._player,e),o(t),t<=0)return s(),void(a._game_location=e);a.step(t-=1,e+1,i,n,o,s),a._game_location=e+1}).start()},e.prototype.changeGameRoleLocation=function(t,e){var i=0;1==e||6==e||8==e||11==e||13==e||15==e||19==e||22==e||25==e||27==e?i=1:5==e||7==e||9==e||12==e||14==e||18==e||20==e||24==e||26==e||28==e?i=0:2!=e&&3!=e&&4!=e&&16!=e&&17!=e&&23!=e||(i=1),t.flip=i},e.prototype.changePlayerLocation=function(t,e,i,n){var o=t,s=e.getChild("n"+o).localToGlobalRect(0,0,i.width,i.height);this._player.setPosition(s.x-10,s.y-50),28==t?this.changeGameRoleLocation(this._player,28):this.changeGameRoleLocation(this._player,o),this._game_location=o,n()},e}(fgui.GComponent));i.default=a,cc._RF.pop()},{}],GameResourceUtil:[function(t,e,i){"use strict";cc._RF.push(e,"1baf90KESpExI+W3JKb+ePk","GameResourceUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameSoundUtil=i.GameSoundMode=i.GameIncidentMarket=i.GameIncidentChance=i.GameIncidentResource=i.GameResourceUtil=void 0;var n,o,s,a=function(){function t(){}return t.incidentOther=function(e,i){void 0===i&&(i=1);var o="";switch(e){case n.Skill:o="game_skill_"+i;break;case n.Child:o="game_child";break;case n.Lose:o="game_lose";break;case n.Raises:o="game_raises";break;case n.Episode:o=13==i||40==i?"game_episode_13_40":20==i||28==i?"game_episode_20_28":"game_episode_"+i}return t.imageList.find(function(t){return t.name===o})},t.incidentChance=function(e,i){void 0===i&&(i=1);var n="";switch(e){case o.Stock:n="game_chance_stock_"+i;break;case o.Funtures:n="game_chance_futures";break;case o.House:n="game_chance_house_"+i;break;case o.Company:n="game_chance_company_"+i;break;case o.Equity:n="game_chance_equity_"+i;break;case o.Article:n="game_chance_article_"+i;break;case o.Speculate:n="game_chance_speculate"}return t.imageList.find(function(t){return t.name===n})},t.incidentMarket=function(e,i){void 0===i&&(i=1);var n="";switch(e){case s.BadNews:n="game_badnews_"+i;break;case s.GoodsNews:n="game_goodnews_"+i;break;case s.RequestBuy:n="game_request_equity_"+i}return t.imageList.find(function(t){return t.name===n})},t.loadResources=function(){cc.resources.loadDir("images",cc.SpriteFrame,function(e,i){t.imageList=i})},t.imageList=[],t}();i.GameResourceUtil=a,function(t){t[t.Skill=0]="Skill",t[t.Child=1]="Child",t[t.Lose=2]="Lose",t[t.Raises=3]="Raises",t[t.Episode=4]="Episode"}(n=i.GameIncidentResource||(i.GameIncidentResource={})),function(t){t[t.Stock=0]="Stock",t[t.Funtures=1]="Funtures",t[t.House=2]="House",t[t.Company=3]="Company",t[t.Equity=4]="Equity",t[t.Article=5]="Article",t[t.Speculate=6]="Speculate"}(o=i.GameIncidentChance||(i.GameIncidentChance={})),function(t){t[t.BadNews=0]="BadNews",t[t.GoodsNews=1]="GoodsNews",t[t.RequestBuy=2]="RequestBuy"}(s=i.GameIncidentMarket||(i.GameIncidentMarket={})),function(t){t.Broke="sound_game_broke",t.Chance="sound_game_chance",t.Child="sound_game_child",t.Click="sound_game_click",t.Drop="sound_game_drop",t.End="sound_game_end",t.Evade="sound_game_evade",t.GoodNew="sound_game_goodnews",t.Incident="sound_game_incident",t.Move="sound_game_move",t.MyRound="sound_game_myround",t.Playing="sound_game_playing",t.Raises="sound_game_raises",t.RoundSettle="sound_game_roundSettle",t.Skill_other="sound_game_skillOther",t.Lose="sound_game_bc",t.Win="sound_game_winAccount",t.BadNew="sound_game_loss",t.Transfer="sound_transfer_prepare",t.Remaining_Time="sound_game_time"}(i.GameSoundMode||(i.GameSoundMode={}));var r=function(){function t(){}return t.loadResources=function(){cc.resources.loadDir("music",cc.AudioClip,function(e,i){t.soundList=i})},t.incidentSounds=function(e){return t.soundList.find(function(t){return t.name===e})},t.soundList=[],t}();i.GameSoundUtil=r,cc._RF.pop()},{}],GameResultWindow:[function(t,e,i){"use strict";cc._RF.push(e,"62df64l6N1AUL3yI0F9I0pN","GameResultWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameResultRankRows=i.GameResultRankList=i.GameResultEndWindow=i.GameResultBrokeEndWindow=i.GameResultBrokeWindow=i.GameResultWinWindow=i.GameResultWindow=void 0;var a=t("../../Common/Global"),r=cc._decorator,l=r.ccclass,u=(r.property,function(t){function e(e,i,n,o){var s=t.call(this)||this;s._userInfo=null,s._roomInfo=null,s._rankingUserArray=null,s._resultWinWindow=null,s._resultEndWindow=null,s._resultBrokeWindow=null,s._resultBrokeEndWindow=null,s._index=0,s.onSubmitResult=null,s._userInfo=e,s._roomInfo=i,s._index=n;var a=[];return 3!=n&&o.forEach(function(t,e){var n=i.userInfoList.find(function(e){return e.userId===t});n.rankIndex=e+1,a.push(n)}),s._rankingUserArray=a,fgui.UIPackage.loadPackage("UI/Game",s.onInit.bind(s)),s}return o(e,t),e.prototype.onInit=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameResultWin",c),fgui.UIObjectFactory.setExtension("ui://Game/GameResultEnd",f),fgui.UIObjectFactory.setExtension("ui://Game/GameResultBroke",h),fgui.UIObjectFactory.setExtension("ui://Game/GameResultBrokeEnd",d),this.contentPane=fgui.UIPackage.createObject("Game","GameResultWindow").asCom,this._resultController=this.contentPane.getController("c1"),this._resultController.selectedIndex=this._index,this._resultWinWindow=this.contentPane.getChild("n0"),this._resultEndWindow=this.contentPane.getChild("n1"),this._resultBrokeEndWindow=this.contentPane.getChild("n2"),this._resultBrokeWindow=this.contentPane.getChild("n3"),this.center(),this._resultWinWindow.onSubmitResult=this.onSubmitResult,this._resultEndWindow.onSubmitResult=this.onSubmitResult,this._resultBrokeEndWindow.onSubmitResult=this.onSubmitResult,this._resultBrokeWindow.onSubmitResult=this.onSubmitResult,this.setPivot(.5,.5),0==this._index?this._resultWinWindow.setData(this._userInfo,this._rankingUserArray):1==this._index?this._resultEndWindow.setData(this._userInfo,this._rankingUserArray):2==this._index?this._resultBrokeEndWindow.setData(this._userInfo,this._rankingUserArray):this._resultBrokeWindow.setData(this._userInfo,this._rankingUserArray)},e.prototype.doShowAnimation=function(){this.setScale(.5,.5),fgui.GTween.to2(.5,.5,1,1,.2).setTarget(this,this.setScale).setEase(fgui.EaseType.QuadOut).onComplete(this.onShown,this)},s([l],e)}(fgui.Window));i.GameResultWindow=u;var c=function(t){function e(){var e=t.call(this)||this;return e._userInfo=null,e._rankingUserArray=null,e._rankList=null,e._winAnimation=null,e.onSubmitResult=null,fgui.UIObjectFactory.setExtension("ui://Game/GameResultRankList",m),e}return o(e,t),e.prototype.setData=function(t,e){this._userInfo=t,this._rankingUserArray=e,this.changeShowUI()},e.prototype.onConstruct=function(){var t=this.getChild("n2").asCom;this._rankLab=t.getChild("n1").asLabel,this._userLoader=t.getChild("n0").asCom.getChild("n0").asLoader,this._awardLab=this.getChild("n9").asLabel,this._awardNumLab=this.getChild("n10").asLabel,this._rankList=this.getChild("n12").asCom,this._winAnimation=this.getChild("n14").asMovieClip,this.getChild("n3").asButton.onClick(this.onChooseRankClick,this),this.getChild("n4").asButton.onClick(this.onChooseSureClick,this),this.getChild("n5").asButton.onClick(this.onChooseExitClick,this);var e=this;this._rankList.onChangeResult=function(t){e.onSubmitResult(3,t)},this._winAnimation.visible=!0,this._winAnimation.setPlaySettings(0,-1,1,-1,function(){e._winAnimation.visible=!1}),this._winAnimation.playing=!0},e.prototype.changeShowUI=function(){var t=this;if(null!=this._rankingUserArray){this._rankList.changeList(this._rankingUserArray),this._userLoader.url=this._userInfo.faceUrl,this._awardLab.text="\u5df2\u83b7\u5f97"+a.default.award.first+"\u4e2a\u77e5\u8bc6\u70b9\u5956\u52b1",this._awardNumLab.text="x"+a.default.award.first;var e=this._rankingUserArray.findIndex(function(e){return e.userId==t._userInfo.userId});this._rankLab.text="\u7b2c"+(e+1)+"\u540d"}},e.prototype.onChooseExitClick=function(){this.onSubmitResult&&this.onSubmitResult(0)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseRankClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e}(fgui.GComponent);i.GameResultWinWindow=c;var h=function(t){function e(){var e=t.call(this)||this;return e._userInfo=null,e._rankingUserArray=null,e._rankList=null,e.onSubmitResult=null,e}return o(e,t),e.prototype.setData=function(t,e){this._userInfo=t,this._rankingUserArray=e,this.changeShowUI()},e.prototype.onConstruct=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameResultRankList",m);var t=this.getChild("n14").asCom;this._rankLab=t.getChild("n1").asLabel,this._rankLab.visible=!1,t.getChild("n2").asLabel.visible=!1,this._userLoader=t.getChild("n0").asCom.getChild("n0").asLoader,this._rankList=this.getChild("n12").asCom,this.getChild("n3").asButton.onClick(this.onChooseRankClick,this),this.getChild("n4").asButton.onClick(this.onChooseSureClick,this),this.getChild("n5").asButton.onClick(this.onChooseExitClick,this);var e=this;this._rankList.onChangeResult=function(t){e.onSubmitResult(3,t)}},e.prototype.changeShowUI=function(){var t=this;if(null!=this._rankingUserArray){this._rankList.changeList(this._rankingUserArray),this._userLoader.url=this._userInfo.faceUrl;var e=this._rankingUserArray.findIndex(function(e){return e.userId==t._userInfo.userId});this._rankLab.text="\u7b2c"+(e+1)+"\u540d"}},e.prototype.onChooseExitClick=function(){this.onSubmitResult&&this.onSubmitResult(0)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseRankClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e}(fgui.GComponent);i.GameResultBrokeWindow=h;var d=function(t){function e(){var e=t.call(this)||this;return e._userInfo=null,e._rankingUserArray=null,e._rankList=null,e.onSubmitResult=null,e}return o(e,t),e.prototype.setData=function(t,e){this._userInfo=t,this._rankingUserArray=e,this.changeShowUI()},e.prototype.onConstruct=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameResultRankList",m);var t=this.getChild("n14").asCom;this._rankLab=t.getChild("n1").asLabel,this._userLoader=t.getChild("n0").asCom.getChild("n0").asLoader,this._rankList=this.getChild("n12").asCom,this.getChild("n3").asButton.onClick(this.onChooseRankClick,this),this.getChild("n4").asButton.onClick(this.onChooseSureClick,this),this.getChild("n5").asButton.onClick(this.onChooseExitClick,this);var e=this;this._rankList.onChangeResult=function(t){e.onSubmitResult(3,t)}},e.prototype.changeShowUI=function(){var t=this;if(null!=this._rankingUserArray){this._rankList.changeList(this._rankingUserArray),this._userLoader.url=this._userInfo.faceUrl;var e=this._rankingUserArray.findIndex(function(e){return e.userId==t._userInfo.userId});this._rankLab.text="\u7b2c"+(e+1)+"\u540d"}},e.prototype.onChooseExitClick=function(){this.onSubmitResult&&this.onSubmitResult(0)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseRankClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e}(fgui.GComponent);i.GameResultBrokeEndWindow=d;var f=function(t){function e(){var e=t.call(this)||this;return e._userInfo=null,e._rankingUserArray=null,e._rankList=null,e.onSubmitResult=null,e}return o(e,t),e.prototype.setData=function(t,e){this._userInfo=t,this._rankingUserArray=e,this.changeShowUI()},e.prototype.onConstruct=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameResultRankList",m);var t=this.getChild("n6").asCom;this._rankLab=t.getChild("n1").asLabel,this._userLoader=t.getChild("n0").asCom.getChild("n0").asLoader,this._rankList=this.getChild("n13").asCom,this.getChild("n3").asButton.onClick(this.onChooseRankClick,this),this.getChild("n1").asButton.onClick(this.onChooseSureClick,this),this.getChild("n2").asButton.onClick(this.onChooseExitClick,this);var e=this;this._rankList.onChangeResult=function(t){e.onSubmitResult(3,t)}},e.prototype.changeShowUI=function(){var t=this;if(null!=this._rankingUserArray){this._rankList.changeList(this._rankingUserArray),this._userLoader.url=this._userInfo.faceUrl;var e=this._rankingUserArray.findIndex(function(e){return e.userId==t._userInfo.userId});this._rankLab.text="\u7b2c"+(e+1)+"\u540d"}},e.prototype.onChooseExitClick=function(){this.onSubmitResult&&this.onSubmitResult(0)},e.prototype.onChooseSureClick=function(){this.onSubmitResult&&this.onSubmitResult(1)},e.prototype.onChooseRankClick=function(){this.onSubmitResult&&this.onSubmitResult(2)},e}(fgui.GComponent);i.GameResultEndWindow=f;var m=function(t){function e(){var e=t.call(this)||this;return e.onChangeResult=null,e._playerList=[],fgui.UIObjectFactory.setExtension("ui://Game/GameResultRankRows",p),e}return o(e,t),e.prototype.onConstruct=function(){this._list=this.getChild("n2").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.changeList=function(t){this._playerList=t,this._list.numItems=this._playerList.length},e.prototype.renderListItem=function(t,e){var i=this,n=this._playerList[t],o=e;o.onChangeResult=function(){i.onChangeResult&&i.onChangeResult(n)},o.setRankText("game_result_rank_"+(t+1)+"@3x"),o.setName(n.nickname),o.setUserLoader(n.faceUrl),o.setRoleText(n.roleName)},e}(fgui.GComponent);i.GameResultRankList=m;var p=function(t){function e(){var e=t.call(this)||this;return e.onChangeResult=null,e}return o(e,t),e.prototype.onConstruct=function(){var t=this;this._rankLoader=this.getChild("n0").asLoader,this._userLoader=this.getChild("n5").asCom.getChild("n0").asLoader,this._nameText=this.getChild("n2").asLabel,this._roleText=this.getChild("n3").asLabel,this.getChild("n4").asButton.onClick(function(){t.onChangeResult&&t.onChangeResult()},this)},e.prototype.setRankText=function(t){this._rankLoader.url=fgui.UIPackage.getItemURL("Game",t)},e.prototype.setName=function(t){this._nameText.text=t},e.prototype.setRoleText=function(t){this._roleText.text=t},e.prototype.setUserLoader=function(t){this._userLoader.url=t},e}(fgui.GComponent);i.GameResultRankRows=p,cc._RF.pop()},{"../../Common/Global":"Global"}],GameRoleItem:[function(t,e,i){"use strict";cc._RF.push(e,"ca7981dF9FBdrGntzPDkGA2","GameRoleItem");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../Common/Global"),r=cc._decorator,l=r.ccclass,u=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._playerInfo=null,e.onSubmitResult=null,e}return o(e,t),e.prototype.onInit=function(t){this._com=t;var e=t.getChild("n16").asCom;this._face_loader=e.getChild("n0").asLoader,this._freedom_rate=t.getChild("n9").asLabel,this._role_name=t.getChild("n12").asLabel,this._role_type=t.getChild("n10").asLabel,this._role_round=t.getChild("n15").asImage,this._chooseController=t.getController("CurrentRound"),this._chooseController.selectedIndex=6,this._myRound_controller=t.getController("isMyRound"),this._level_controller=t.getController("level"),this._blueBar=t.getChild("n27").asProgress,this._pinkBar=t.getChild("n28").asProgress,this._yellowBar=t.getChild("n29").asProgress,this._redBar=t.getChild("n30").asProgress,this._freedom_name=t.getChild("n48").asLabel,this._freedom_rank=t.getChild("n47").asLabel,this._freedom_rank.visible=!0,this._com.onClick(this.onChooseUserClick,this)},e.prototype.onChooseUserClick=function(){this.onSubmitResult&&this.onSubmitResult(this._userId)},e.prototype.updateUI=function(t,e){this._role_type.text=t.roleName,this._face_loader.url=t.faceUrl,this._role_name.text=t.nickname,this._role_round.visible=!0,this._level_controller.selectedIndex=t.financeGrade,this._userId=t.userId,this.updateLibertyRate(t,e)},e.prototype.updateLibertyRate=function(t,e){var i,n=Math.floor(100*(null!==(i=t.libertyRate)&&void 0!==i?i:0));switch(this._freedom_rate.text=n.toFixed()+"%",e){case 0:this._blueBar.value=n;break;case 1:this._pinkBar.value=n;break;case 2:this._yellowBar.value=n;break;case 3:this._redBar.value=n}try{if(n>=100){this._freedom_name.text=t.nickname;var o=a.default.gameVoData.rankingList;if(console.log("\u6392\u884c\u699c\uff1a",o),null==o||null==o)return;var s=o.findIndex(function(e){return e===t.userId});s&&(console.log("\u6392\u884c\u699c\uff1a\u6392\u540d\u7d22\u5f15",s),this._freedom_rank.text="\u7b2c"+(s+1)+"\u540d")}}catch(r){}},e.prototype.setCurrentPlayer=function(t,e){this._chooseController.selectedIndex=t?1:0,this._myRound_controller.selectedIndex=e?1:0},e.prototype.setCurrentPlayerStatus=function(t,e){this._chooseController.selectedIndex=t,this._myRound_controller.selectedIndex=1==t&&e?1:0},s([l],e)}(cc.Component));i.default=u,cc._RF.pop()},{"../../Common/Global":"Global"}],GameRole:[function(t,e,i){"use strict";cc._RF.push(e,"5cd61jF11hN6IjWQVDgYyCj","GameRole"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameRole=void 0;i.GameRole=function(){},cc._RF.pop()},{}],GameRule:[function(t,e,i){"use strict";cc._RF.push(e,"56bd9t4/B1PIYRwepNdk7aq","GameRule");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../Common/LogUtil"),r=t("../../Config/Config"),l=t("../Scenes/Main"),u=cc._decorator,c=u.ccclass,h=(u.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){fgui.UIPackage.loadPackage("UI/GameRule",this.onUILoaded.bind(this))},e.prototype.onUILoaded=function(){this._view=fgui.UIPackage.createObject("GameRule","EntranceRule").asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this._view.getChild("n1").onClick(this.onChooseBackClick,this);var t=this._view.getChild("n8").asCom,e=this._view.getChild("n9").asCom,i=this._view.getChild("n10").asCom,n=this._view.getChild("n11").asCom;this.loadResource(t,r.default.game_rule_desc,0),this.loadResource(e,r.default.game_rule_flow,1),this.loadResource(i,r.default.game_rule_question,2),this.loadResource(n,r.default.game_rule_rule,3)},e.prototype.loadResource=function(t,e,i){var n=t.getChild("n"+i).asList;for(n.removeChildrenToPool(),i=0;i<1;i++){var o=n.addItemFromPool().asCom.getChild("n1").asLoader;cc.assetManager.loadRemote(e,{cacheEnabled:!0},function(t,e){if(null==t)return a.default.log("asset.url:",e.url),void(o.url=e.url);a.default.log("error:",t)})}},e.prototype.onChooseBackClick=function(){this.addComponent(l.default),this.destroy()},e.prototype.onDestroy=function(){this._view.dispose()},s([c],e)}(cc.Component));i.default=h,cc._RF.pop()},{"../../Common/LogUtil":"LogUtil","../../Config/Config":"Config","../Scenes/Main":"Main"}],GameServerUtil:[function(t,e,i){"use strict";cc._RF.push(e,"37a96tHGblKp4qUIfrmoU5r","GameServerUtil");var n=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{l(n.next(t))}catch(e){s(e)}}function r(t){try{l(n.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,r)}l((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.GameServerUtil=void 0;var s=t("../Constant/RequestCmdEnum"),a=t("../Common/Global"),r=t("./Http"),l=t("../Config/Config"),u=t("./LogUtil"),c=t("../Model/room/UserInfo"),h=function(){function t(){}return t.fetchOwnerOnLine=function(t){u.default.log("\u623f\u4e3b\u4e0a\u7ebf");var e={cmd:s.RequestCmdEnum.ownerOnline};this.sendToGameSvr(e,3,t)},t.fetchGameStart=function(t,e,i,n){u.default.log("\u5f00\u59cb\u6e38\u620f");var o={cmd:s.RequestCmdEnum.start,data:{type:e,userList:t,bizRoomId:i,gradeType:a.default.game_mode.gradeType}};this.sendToGameSvr(o,3,n)},t.fetchGameRoomInfo=function(){u.default.log("\u83b7\u53d6\u623f\u95f4\u4fe1\u606f");var t={cmd:s.RequestCmdEnum.roomInfo};this.sendToGameSvr(t)},t.fetchGameSoleAbandon=function(){u.default.log("\u653e\u5f03");var t={cmd:s.RequestCmdEnum.abandon};this.sendToGameSvr(t)},t.fetchGameSoleSkillBuy=function(){u.default.log("\u5b66\u4e60\u6280\u80fd");var t={cmd:s.RequestCmdEnum.skillBuy};this.sendToGameSvr(t)},t.fetchGameLifeIncidentBuy=function(t){u.default.log("\u751f\u6d3b\u5c0f\u63d2\u66f2\u652f\u4ed8");var e={cmd:s.RequestCmdEnum.lifeIncidentBuy,data:{type:t}};this.sendToGameSvr(e)},t.fetchGameSelectChance=function(t){var e={cmd:s.RequestCmdEnum.selectChancel,data:{type:t}};this.sendToGameSvr(e)},t.fetchGameStockDeal=function(t,e){u.default.log("\u80a1\u7968 ");var i={cmd:s.RequestCmdEnum.stockDeal,data:{type:t,count:e}};this.sendToGameSvr(i)},t.fetchGameHouseBuy=function(){u.default.log("\u623f\u4ea7\u8d2d\u4e70");var t={cmd:s.RequestCmdEnum.houseBuy};this.sendToGameSvr(t)},t.fetchGameFuturesDeal=function(t,e,i){u.default.log("\u80a1\u6307\u671f\u8d27 ");var n={cmd:s.RequestCmdEnum.futuresDeal,data:{count:e,type:t,idCountParams:i}};this.sendToGameSvr(n)},t.fetchGameCompanyBuy=function(){u.default.log("\u4f01\u4e1a\u8d2d\u4e70");var t={cmd:s.RequestCmdEnum.companyBuy};this.sendToGameSvr(t)},t.fetchGameArticleBuy=function(t){u.default.log("\u7269\u54c1\u8d2d\u4e70");var e={cmd:s.RequestCmdEnum.articleBuy,data:{count:t}};this.sendToGameSvr(e)},t.fetchGameEquityBuy=function(t){u.default.log("\u80a1\u6743\u8d2d\u4e70");var e={cmd:s.RequestCmdEnum.equityBuy,data:{count:t}};this.sendToGameSvr(e)},t.fetchGameSpeculateBuy=function(t){u.default.log("\u6295\u673a\u8d2d\u4e70");var e={cmd:s.RequestCmdEnum.speculateBuy,data:{money:t}};this.sendToGameSvr(e)},t.fetchGameAuctionBid=function(t){u.default.log("\u62cd\u5356\u51fa\u4ef7");var e={cmd:s.RequestCmdEnum.auctionBid,data:{price:t}};this.sendToGameSvr(e)},t.fetchGameAuction=function(){u.default.log("\u53d1\u8d77\u62cd\u5356");var t={cmd:s.RequestCmdEnum.auction};this.sendToGameSvr(t)},t.fetchGameAuctionAbandon=function(){u.default.log("\u62cd\u5356\u653e\u5f03");var t={cmd:s.RequestCmdEnum.auctionAbandon};this.sendToGameSvr(t)},t.fetchGameHouseSell=function(t){u.default.log("\u623f\u4ea7\u552e\u5356");var e={cmd:s.RequestCmdEnum.houseSell,data:{idList:t}};this.sendToGameSvr(e)},t.fetchGameCompanySell=function(t){u.default.log("\u4f01\u4e1a\u552e\u5356");var e={cmd:s.RequestCmdEnum.companySell,data:{idList:t}};this.sendToGameSvr(e)},t.fetchGameEquitySell=function(t){u.default.log("\u80a1\u6743\u552e\u5356");var e={cmd:s.RequestCmdEnum.equitySell,data:{idCountList:t}};this.sendToGameSvr(e)},t.fetchGameArticleSell=function(t){u.default.log("\u7269\u54c1\u552e\u5356");var e={cmd:s.RequestCmdEnum.articleSell,data:{idCountList:t}};this.sendToGameSvr(e)},t.fetchGameBankLoan=function(t,e,i,n,o,a,r){void 0===e&&(e=null),u.default.log("\u8d37\u6b3e");var l={cmd:s.RequestCmdEnum.bankLoan,data:{money:e,type:t,isLoanMyHouse:i,isLoanCar:n,isLoanCreditCard:o,houseIdList:a,companyIdList:r}};this.sendToGameSvr(l)},t.fetchGameDice=function(){var t={cmd:s.RequestCmdEnum.dice};this.sendToGameSvr(t)},t.sendToGameSvr=function(e,i,n){void 0===i&&(i=1);var o=i,s=JSON.stringify(e);u.default.log("\u8bf7\u6c42\u53c2\u6570:",s),a.default.room.sendToServer(s),a.default.room.onSendToServerFailed(function(i){console.log("\u53d1\u9001\u5931\u8d25\uff1a",JSON.stringify(i)),o>=3?n&&n(!1):(o++,u.default.log("\u53d1\u9001\u5b9e\u65f6\u670d\u52a1\u5668\u6d88\u606f\u5931\u8d25\uff0c\u5f00\u542f\u91cd\u8fde:"+o),setTimeout(function(){t.sendToGameSvr(e,o)},2e3))})},t.fetchServiceGameLogin=function(){return n(this,void 0,void 0,function(){var t,e,i;return o(this,function(){return t=l.RunEnvironment.hadEnvironment(),e=void 0,i=void 0,0==a.default.loginMode?(e={type:l.RunEnvironment.environment},i=t.service_url+l.default.url_gamePlayer_gameLogin):(e={type:l.RunEnvironment.environment,userId:a.default.app_user_id},i=t.service_url+l.default.url_gamePlayer_test_gameLogin),[2,new Promise(function(t,n){var o;r.default.post(i,e,{headers:{"Content-Type":"application/json",Authorization:null!==(o=a.default.token)&&void 0!==o?o:""}}).then(function(e){var i,o,s=e.data;if(200==s.status){var r=e.data,l=new c.UserInfo;l.nickname=r.data.nickname,l.faceUrl=r.data.faceUrl,l.userId=r.data.userId,l.openId=""+a.default.app_user_id,a.default.userInfo=l,a.default.userLevel=r.data.financeGrade,a.default.confExpireTime=r.data.confExpireTime,a.default.confAuctionExpireTime=r.data.confAuctionExpireTime,a.default.confMaxAge=r.data.confMaxAge,a.default.confInitAge=r.data.confInitAge,a.default.grade1Award=r.data.grade1Award,a.default.grade2Award=r.data.grade2Award,a.default.grade3Award=r.data.grade3Award,a.default.confSelectRoleTime=null!==(i=r.data.confSelectRoleTime)&&void 0!==i?i:30,a.default.confMaxPlayer=null!==(o=r.data.confMaxPlayer)&&void 0!==o?o:2,1==a.default.loginMode&&(a.default.token=r.data.token),t(r.data)}else n(s.msg)}).catch(function(t){u.default.log("error"+t),n(t)})})]})})},t.fetchServiceStart=function(t,e){return n(this,void 0,Promise,function(){return o(this,function(){return[2,new Promise(function(i,n){var o,s={gameRoomId:e,userIdList:t,gradeType:a.default.game_mode.gradeType,type:a.default.game_mode.roomType};r.default.post(l.RunEnvironment.hadEnvironment().service_url+l.default.url_gamePlayer_start,s,{headers:{"Content-Type":"application/json",Authorization:null!==(o=a.default.token)&&void 0!==o?o:""}}).then(function(t){var e=t.data;if(200==e.status){var o=t.data;u.default.log("nickname:"+o.data.bizRoomId),i(o.data.bizRoomId)}else n&&n(e.msg)}).catch(function(t){n&&n("\u7f51\u7edc\u670d\u52a1\u5f02\u5e38"),u.default.log("error"+t)})})]})})},t.fetchServiceUserInfo=function(t,e,i,n){r.default.post(l.RunEnvironment.hadEnvironment().service_url+e,t,{headers:{"Content-Type":"application/json",Authorization:a.default.token?a.default.token:""}}).then(function(t){var e=t.data;if(200==e.status){var o=t.data;u.default.log("nickname:"+o.data.nickname+",id:"+o.data.id),i&&i(o.data)}else n&&n(e.msg)}).catch(function(t){u.default.log("error"+t),n&&n(t)})},t.fetchServiceRoleList=function(t,e){r.default.post(l.RunEnvironment.hadEnvironment().service_url+l.default.url_role_list,{},{headers:{"Content-Type":"application/json",Authorization:a.default.token}}).then(function(i){var n=i.data;n.data?t&&t(n.data):e&&e(n.msg)}).catch(function(t){u.default.log("error"+t),e&&e(t)})},t.fetchServiceCareer=function(t,e,i,n){var o={roomId:t,userId:e};u.default.log("\u83b7\u53d6\u751f\u6daf\u8be6\u60c5\uff1a",o),r.default.post(l.RunEnvironment.hadEnvironment().service_url+l.default.url_gameIndex_gameCareerDetail,o,{headers:{"Content-Type":"application/json",Authorization:a.default.token}}).then(function(t){var e=t.data;200==e.status?i&&i(e.data):n&&n(e.msg)}).catch(function(t){u.default.log("error"+t),n&&n(t)})},t.fetchServiceMessageList=function(t,e){r.default.post(l.RunEnvironment.hadEnvironment().service_url+l.default.url_gamePlayer_messageList,{},{headers:{"Content-Type":"application/json",Authorization:a.default.token}}).then(function(i){var n=i.data;n.data?t&&t(n.data):e&&e(n.msg)}).catch(function(t){u.default.log("error"+t),e&&e(t)})},t.fetchServiceFriendList=function(t,e,i){var n={pageNum:t,pageSize:30};r.default.post(l.RunEnvironment.hadEnvironment().service_url+l.default.url_gamePlayer_friendList,n,{headers:{"Content-Type":"application/json",Authorization:a.default.token}}).then(function(t){var n=t.data;if(200==n.status){var o=t.data;o.data?e&&e(o.data):i&&i(o.msg)}else i&&i(n.msg)}).catch(function(t){u.default.log("error"+t),i&&i(t)})},t.fetchServiceGameInvite=function(t,e,i,n){var o={userId:t,gameRoomId:e};r.default.post(l.RunEnvironment.hadEnvironment().service_url+l.default.url_gamePlayer_gameInvite,o,{headers:{"Content-Type":"application/json",Authorization:a.default.token}}).then(function(t){var e=t.data;200==e.status?i&&i(null):n&&n(e.msg)}).catch(function(t){u.default.log("error"+t),n&&n("\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e")})},t}();i.GameServerUtil=h,cc._RF.pop()},{"../Common/Global":"Global","../Config/Config":"Config","../Constant/RequestCmdEnum":"RequestCmdEnum","../Model/room/UserInfo":"UserInfo","./Http":"Http","./LogUtil":"LogUtil"}],GameStatement:[function(t,e,i){"use strict";cc._RF.push(e,"a722duRag5C8adLBP3NMvsG","GameStatement");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.refactorOtherLoanAsset=i.refactorOtherAsset=i.refactorExpandAsset=i.refactorCreateAsset=i.sumLoanAsset=i.sumAsset=i.GameLiabilitiesResultView=i.GameLiabilitiesLoanItemView=i.GameLiabilitiesLoanView=i.GameLiabilitiesItemView=i.GameLiabilitiesListExpendView=i.GameLiabilitiesListCreateView=i.GameLiabilitiesListView=i.GameLiabilitiesAssetView=i.GameLiabilitiesView=i.GameAssetResultView=i.GameAssetExpendView=i.GameAssetListView=i.GameAssetIncomeView=i.GameAssetView=i.GameStatementWindow=void 0;var s=t("../../Common/Global"),a=t("../../Utils/MathUtil"),r=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onInit=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameAssetView",l),fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesView",f),fgui.UIObjectFactory.setExtension("ui://Game/GameAssetResultView",d),fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesResultView",v),this.contentPane=fgui.UIPackage.createObject("Game","GameStatementWindow").asCom,this.makeFullScreen(),this.center(),this._assetView=this.contentPane.getChild("n6").asCom,this._liabilitiesView=this.contentPane.getChild("n7").asCom,this._assetResultView=this.contentPane.getChild("n8").asCom,this._liabilitiesResultView=this.contentPane.getChild("n9").asCom,this.closeButton=this.contentPane.getChild("n4"),this.refreshData()},e.prototype.closeEventHandler=function(){this.hide()},e.prototype.refreshData=function(){var t;this._assetView.setUserInfoData(),this._liabilitiesView.setUserInfoData(),this._assetResultView.setAmount(""+a.default.thousandBitSeparator(null!==(t=s.default.userInfo.cashFlow)&&void 0!==t?t:0));var e=w()-S();this._liabilitiesResultView.setAmount(""+a.default.thousandBitSeparator(null!=e?e:0))},e}(fgui.Window);i.GameStatementWindow=r;var l=function(t){function e(){var e=t.call(this)||this;return fgui.UIObjectFactory.setExtension("ui://Game/GameAssetIncomeView",u),fgui.UIObjectFactory.setExtension("ui://Game/GameAssetExpendView",h),e}return o(e,t),e.prototype.onConstruct=function(){this._assetIncomeView=this.getChild("n1").asCom,this._assetExpendView=this.getChild("n2").asCom},e.prototype.setUserInfoData=function(){this._assetIncomeView.setUserInfoData(),this._assetExpendView.setUserInfoData()},e}(fgui.GComponent);i.GameAssetView=l;var u=function(t){function e(){var e=t.call(this)||this;return fgui.UIObjectFactory.setExtension("ui://Game/GameAssetListView",c),e}return o(e,t),e.prototype.onConstruct=function(){this._totalIncome=this.getChild("n3").asLabel,this._initiativeIncome=this.getChild("n5").asLabel,this._salaryIncome=this.getChild("n7").asLabel,this._pastTimeIncome=this.getChild("n9").asLabel,this._passiveIncome=this.getChild("n12").asLabel,this._viewList=this.getChild("n13").asList,this._viewList.itemRenderer=this.renderListItem.bind(this),this._viewList.setVirtual()},e.prototype.setUserInfoData=function(){var t,e,i,n,o,r=s.default.userInfo;this._totalIncome.text="\u603b\u6536\u5165\uff1a"+a.default.thousandBitSeparator(null!==(t=r.totalIncome)&&void 0!==t?t:0),this._initiativeIncome.text=""+a.default.thousandBitSeparator(null!==(e=r.accordIncome)&&void 0!==e?e:0),this._salaryIncome.text=""+a.default.thousandBitSeparator(null!==(i=r.incomeSalary)&&void 0!==i?i:0),this._pastTimeIncome.text=""+a.default.thousandBitSeparator(null!==(n=r.incomeTimePart)&&void 0!==n?n:0),this._passiveIncome.text=""+a.default.thousandBitSeparator(null!==(o=r.passiveIncome)&&void 0!==o?o:0),this._viewList.numItems=4},e.prototype.renderListItem=function(t,e){var i=e,n=[],o=s.default.userInfo;0==t?(i.setName("\u80a1\u7968/\u57fa\u91d1/REITS\u5206\u7ea2"),n=o.assetStockList):1==t?(i.setName("\u6295\u8d44\u623f\u51c0\u79df\u91d1"),n=o.assetHouseList):2==t?(i.setName("\u4f01\u4e1a\u51c0\u6536\u5165"),n=o.assetCompanyList):3==t&&(i.setName("\u80a1\u6743\u5206\u7ea2"),n=o.assetEquityList),this.changeItemSize(i,n),i.changeList(n)},e.prototype.changeItemSize=function(t,e){var i=40*(null!=e?e:[]).length;t.setSize(t.width,i+38),t._list.setSize(t.width,i),t._bjGraph.setSize(t.width,i+18)},e}(fgui.GComponent);i.GameAssetIncomeView=u;var c=function(t){function e(){var e=t.call(this)||this;return e._dataArray=null,e}return o(e,t),e.prototype.onConstruct=function(){this._bjGraph=this.getChild("n0").asGraph,this._titleLab=this.getChild("n2").asLabel,this._list=this.getChild("n3").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.setName=function(t){this._titleLab.text=t},e.prototype.changeList=function(t){this._dataArray=t,this._list.numItems=this._dataArray.length},e.prototype.renderListItem=function(t,e){var i,n,o=this._dataArray[t];e.getChild("n0").asLabel.text=null!==(i=o.name)&&void 0!==i?i:0,e.getChild("n1").asLabel.text=""+a.default.thousandBitSeparator(null!==(n=o.monthCashFlow)&&void 0!==n?n:0)},e}(fgui.GComponent);i.GameAssetListView=c;var h=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._totalExpend=this.getChild("n3").asLabel,this._insuranceExpend=this.getChild("n5").asLabel,this._carExpend=this.getChild("n11").asLabel,this._lifeExpend=this.getChild("n7").asLabel,this._bankExpend=this.getChild("n13").asLabel,this._childExpend=this.getChild("n9").asLabel,this._creditExpend=this.getChild("n15").asLabel,this._rentExpend=this.getChild("n17").asLabel,this._childTipsExpend=this.getChild("n35").asLabel},e.prototype.setUserInfoData=function(){var t,e,i,n,o,r,l,u,c=s.default.userInfo;this._totalExpend.text="\u603b\u652f\u51fa\uff1a"+a.default.thousandBitSeparator(null!==(t=c.totalExpend)&&void 0!==t?t:0),this._insuranceExpend.text=""+a.default.thousandBitSeparator(null!==(e=c.expendInsure)&&void 0!==e?e:0),this._carExpend.text=""+a.default.thousandBitSeparator(null!==(i=c.expendCar)&&void 0!==i?i:0),this._lifeExpend.text=""+a.default.thousandBitSeparator(null!==(n=c.expendLife)&&void 0!==n?n:0),this._bankExpend.text=""+a.default.thousandBitSeparator(null!==(o=c.expendBankInterest)&&void 0!==o?o:0),this._childExpend.text=c.expendChildren+"*"+c.expendChildrenCount,this._creditExpend.text=""+a.default.thousandBitSeparator(null!==(r=c.expendCreditCard)&&void 0!==r?r:0),this._rentExpend.text=""+a.default.thousandBitSeparator(null!==(l=c.expendMyHouse)&&void 0!==l?l:0),this._childTipsExpend.text="Tip\uff1a\u5f00\u59cb\u6e38\u620f\u65f6\u5c0f\u5b69\u4e2a\u6570\u4e3a0\uff0c\u6bcf\u4e2a\u5b69\u5b50\u6708\u652f\u51fa"+a.default.thousandBitSeparator(null!==(u=c.expendChildren)&&void 0!==u?u:0)+"\u3002"},e}(fgui.GComponent);i.GameAssetExpendView=h;var d=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._totalAmount=this.getChild("n3").asLabel},e.prototype.setAmount=function(t){this._totalAmount.text=t},e}(fgui.GComponent);i.GameAssetResultView=d;var f=function(t){function e(){var e=t.call(this)||this;return fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesAssetView",m),fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesLoanView",C),e}return o(e,t),e.prototype.onConstruct=function(){this._assetView=this.getChild("n1").asCom,this._loanView=this.getChild("n2").asCom},e.prototype.setUserInfoData=function(){this._assetView.setUserInfoData(),this._loanView.setUserInfoData()},e}(fgui.GComponent);i.GameLiabilitiesView=f;var m=function(t){function e(){var e=t.call(this)||this;return fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesListView",p),fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesListExpendView",g),fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesListCreateView",_),e}return o(e,t),e.prototype.onConstruct=function(){this._totalLab=this.getChild("n3").asLabel,this._viewList=this.getChild("n4").asList,this._viewList.removeChildrenToPool(),this.createList()},e.prototype.setUserInfoData=function(){var t=w();this._totalLab.text="\u603b\u8d44\u4ea7\uff1a"+a.default.thousandBitSeparator(null!=t?t:0)},e.prototype.createList=function(){for(var t=R(),e=I(),i=k(),n=0;n<3;n++)if(0==n){var o=this._viewList.addItemFromPool("ui://Game/GameLiabilitiesListView").asCom,s=t[0].child,a=42*s.length+38;o.setSize(o.width,a+38),o._list.setSize(o.width,a),o.changeList(s)}else if(1==n){var r=i,l=(o=this._viewList.addItemFromPool("ui://Game/GameLiabilitiesListCreateView").asCom,i[0]),u=i[1],c=i[2],h=i[3];a=96+42*l.child.length+42*u.child.length+48+42*h.child.length+42*c.child.length+38,o.setSize(o.width,a+38),o._list.setSize(o.width,a),o.changeList(r)}else if(2==n){o=this._viewList.addItemFromPool("ui://Game/GameLiabilitiesListExpendView").asCom;var d=e,f=e[0],m=e[1];a=96+42*f.child.length+42*m.child.length,o.setSize(o.width,a+38),o._list.setSize(o.width,a),o.changeList(d)}},e}(fgui.GComponent);i.GameLiabilitiesAssetView=m;var p=function(t){function e(){var e=t.call(this)||this;return e._dataArray=[],e}return o(e,t),e.prototype.onConstruct=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesItemView",y),this._list=this.getChild("n1").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.renderListItem=function(t,e){var i=e,n=this._dataArray;this.changeItemSize(i,n),i.changeList(n)},e.prototype.changeList=function(t){this._dataArray=t,this._list.numItems=1},e.prototype.changeItemSize=function(t,e){var i=42*(null!=e?e:[]).length;t.setSize(t.width,i+38),t._list.setSize(t.width,i),t._bjGraph.setSize(t.width,i)},e}(fgui.GComponent);i.GameLiabilitiesListView=p;var _=function(t){function e(){var e=t.call(this)||this;return e._dataArray=[],e}return o(e,t),e.prototype.onConstruct=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesItemView",y),this._list=this.getChild("n1").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.renderListItem=function(t,e){var i=e,n=[];0==t?(i.setName("\u57fa\u91d1/\u80a1\u7968/Reits","\u6570\u91cf","\u603b\u4ef7"),n=this._dataArray[0].child):1==t?(i.setName("\u623f\u5730\u4ea7","\u9996\u4ed8","\u603b\u4ef7"),n=this._dataArray[1].child):2==t?(i.setName("\u80a1\u6743","\u80a1\u6743\u6bd4\u4f8b","\u603b\u4ef7"),n=this._dataArray[3].child):3==t&&(i.setName("\u4f01\u4e1a","\u9996\u4ed8","\u603b\u4ef7"),n=this._dataArray[2].child),this.changeItemSize(i,n),i.changeList(n)},e.prototype.changeList=function(t){this._dataArray=t,this._list.numItems=4},e.prototype.changeItemSize=function(t,e){var i=42*(null!=e?e:[]).length;t.setSize(t.width,i+38),t._list.setSize(t.width,i),t._bjGraph.setSize(t.width,i)},e}(fgui.GComponent);i.GameLiabilitiesListCreateView=_;var g=function(t){function e(){var e=t.call(this)||this;return e._dataArray=[],e}return o(e,t),e.prototype.onConstruct=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesItemView",y),this._list=this.getChild("n1").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.renderListItem=function(t,e){var i=e,n=[];0==t?(i.setName("\u623f\u5730\u4ea7","\u9996\u4ed8","\u603b\u4ef7"),n=this._dataArray[0].child):1==t&&(i.setName("\u6c7d\u8f66","\u9996\u4ed8","\u603b\u4ef7"),n=this._dataArray[1].child),this.changeItemSize(i,n),i.changeList(n)},e.prototype.changeList=function(t){this._dataArray=t,this._list.numItems=2},e.prototype.changeItemSize=function(t,e){var i=42*(null!=e?e:[]).length;t.setSize(t.width,i+38),t._list.setSize(t.width,i),t._bjGraph.setSize(t.width,i)},e}(fgui.GComponent);i.GameLiabilitiesListExpendView=g;var y=function(t){function e(){var e=t.call(this)||this;return e._dataArray=null,e}return o(e,t),e.prototype.onConstruct=function(){this._bjGraph=this.getChild("n1").asImage,this._paramsLab1=this.getChild("n2").asLabel,this._paramsLab2=this.getChild("n3").asLabel,this._paramsLab3=this.getChild("n4").asLabel,this._list=this.getChild("n5").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.setName=function(t,e,i){this._paramsLab1.text=t,this._paramsLab2.text=e,this._paramsLab3.text=i},e.prototype.changeList=function(t){this._dataArray=t,this._list.numItems=t.length},e.prototype.renderListItem=function(t,e){var i,n,o,s=this._dataArray[t];e.getChild("n1").asLabel.text=null!==(i=s.name)&&void 0!==i?i:"",e.getChild("n2").asLabel.text=a.default.thousandBitSeparator(null!==(n=s.number)&&void 0!==n?n:""),e.getChild("n3").asLabel.text=""+a.default.thousandBitSeparator(null!==(o=s.amount)&&void 0!==o?o:"")},e}(fgui.GComponent);i.GameLiabilitiesItemView=y;var C=function(t){function e(){var e=t.call(this)||this;return e._assetArray=[],fgui.UIObjectFactory.setExtension("ui://Game/GameLiabilitiesLoanItemView",b),e}return o(e,t),e.prototype.onConstruct=function(){this._totalLoan=this.getChild("n3").asLabel,this._myHouse=this.getChild("n9").asLabel,this._myHouse_month=this.getChild("n10").asLabel,this._carLoan=this.getChild("n12").asLabel,this._carLoan_month=this.getChild("n13").asLabel,this._bankLoan=this.getChild("n15").asLabel,this._bankLoan_month=this.getChild("n16").asLabel,this._creditLoan=this.getChild("n18").asLabel,this._creditLoan_month=this.getChild("n19").asLabel,this._loan_list=this.getChild("n20").asList,this._loan_list.removeChildrenToPool()},e.prototype.createList=function(){for(var t=L(),e=0;e<2;e++){var i=this._loan_list.addItemFromPool("ui://Game/GameLiabilitiesLoanItemView").asCom;if(0==e){var n=t[0];i.setName(n.name);var o=45*(s=n.child).length;i.setSize(i.width,o+45),i._list.setSize(i.width,o),i._bjGGraph.setSize(i.width,o),i.changeList(s)}else if(1==e){var s,a=t[1];i.setName(a.name),o=45*(s=a.child).length,i.setSize(i.width,o+45),i._list.setSize(i.width,o),i._bjGGraph.setSize(i.width,o),i.changeList(s)}}},e.prototype.setUserInfoData=function(){var t,e,i,n,o,r,l,u,c=S();this._totalLoan.text="\u603b\u8d1f\u503a\uff1a"+a.default.thousandBitSeparator(null!=c?c:0);var h=s.default.userInfo;h.loanMyHouse&&h.loanMyHouse>0?(this._myHouse.text=""+a.default.thousandBitSeparator(null!==(t=h.loanMyHouse)&&void 0!==t?t:0),this._myHouse_month.text=""+a.default.thousandBitSeparator(null!==(e=h.expendMyHouse)&&void 0!==e?e:0)):(this._myHouse.text="0",this._myHouse_month.text="0"),h.loanCar&&h.loanCar>0?(this._carLoan.text=""+a.default.thousandBitSeparator(null!==(i=h.loanCar)&&void 0!==i?i:0),this._carLoan_month.text=""+a.default.thousandBitSeparator(null!==(n=h.expendCar)&&void 0!==n?n:0)):(this._carLoan.text="0",this._carLoan_month.text="0"),h.loanBank&&h.loanBank>0?(this._bankLoan.text=""+a.default.thousandBitSeparator(null!==(o=h.loanBank)&&void 0!==o?o:0),this._bankLoan_month.text=""+a.default.thousandBitSeparator(null!==(r=h.expendBankInterest)&&void 0!==r?r:0)):(this._bankLoan.text="0",this._bankLoan_month.text="0"),h.loanCreditCard&&h.loanCreditCard>0?(this._creditLoan.text=""+a.default.thousandBitSeparator(null!==(l=h.loanCreditCard)&&void 0!==l?l:0),this._creditLoan_month.text=""+a.default.thousandBitSeparator(null!==(u=h.expendCreditCard)&&void 0!==u?u:0)):(this._creditLoan.text="0",this._creditLoan_month.text="0"),this.createList()},e}(fgui.GComponent);i.GameLiabilitiesLoanView=C;var b=function(t){function e(){var e=t.call(this)||this;return e._dataArray=null,e}return o(e,t),e.prototype.onConstruct=function(){this._titleLab=this.getChild("title").asLabel,this._bjGGraph=this.getChild("n0").asGraph,this._list=this.getChild("n1").asList,this._list.itemRenderer=this.renderListItem.bind(this),this._list.setVirtual()},e.prototype.setName=function(t){this._titleLab.text=t},e.prototype.changeList=function(t){this._dataArray=t,this._list.numItems=t.length},e.prototype.renderListItem=function(t,e){var i,n,o,s=this._dataArray[t];e.getChild("n1").asLabel.text=null!==(i=s.name)&&void 0!==i?i:"",e.getChild("n2").asLabel.text=""+a.default.thousandBitSeparator(null!==(n=s.loan)&&void 0!==n?n:0),e.getChild("n3").asLabel.text=""+a.default.thousandBitSeparator(null!==(o=s.amount)&&void 0!==o?o:0)},e}(fgui.GComponent);i.GameLiabilitiesLoanItemView=b;var v=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._totalAmount=this.getChild("n3").asLabel},e.prototype.setAmount=function(t){this._totalAmount.text=t},e}(fgui.GComponent);function w(){for(var t=s.default.userInfo,e=t.assetCash?t.assetCash:0,i=0,n=t.assetArticleList;i<n.length;i++)e+=(p=n[i]).price*p.count;for(var o=0,a=t.assetFuturesList;o<a.length;o++)e+=(p=a[o]).price*p.count;for(var r=0,l=t.assetStockList;r<l.length;r++)e+=(p=l[r]).totalPrice;for(var u=0,c=t.assetHouseList;u<c.length;u++)e+=(p=c[u]).totalPrice;for(var h=0,d=t.assetEquityList;h<d.length;h++)e+=(p=d[h]).eachPrice*p.count;for(var f=0,m=t.assetCompanyList;f<m.length;f++){var p;e+=(p=m[f]).totalPrice}return t.myHouseTotalPrice&&(e+=t.myHouseTotalPrice),t.carTotalPrice&&(e+=t.carTotalPrice),e}function S(){for(var t=s.default.userInfo,e=0,i=0,n=t.assetHouseList;i<n.length;i++)e+=n[i].loan;for(var o=0,a=t.assetCompanyList;o<a.length;o++)e+=a[o].loan;return t.loanMyHouse&&(e+=t.loanMyHouse),t.loanCar&&(e+=t.loanCar),t.loanBank&&(e+=t.loanBank),t.loanCreditCard&&(e+=t.loanCreditCard),e}function k(){for(var t,e,i,n,o,a,r,l,u,c,h,d=s.default.userInfo,f=[],m=0,p=d.assetStockList;m<p.length;m++){var _=p[m],g=new B,y=_.price*(null!==(t=_.count)&&void 0!==t?t:0);g.amount=parseInt(""+y),g.number=""+(null!==(e=_.count)&&void 0!==e?e:0),g.name=null!==(i=_.name)&&void 0!==i?i:"",f.push(g)}var C=new G;C.name1="\u57fa\u91d1/\u80a1\u7968/Reits",C.name2="\u6570\u91cf",C.name3="\u603b\u4ef7",C.child=f;for(var b=[],v=0,w=d.assetHouseList;v<w.length;v++)(_=w[v]).name&&_.name.length>0&&((g=new B).amount=null!==(n=_.totalPrice)&&void 0!==n?n:0,g.number=""+(null!==(o=_.firstPrice)&&void 0!==o?o:0),g.name=null!==(a=_.name)&&void 0!==a?a:"",b.push(g));var S=new G;S.name1="\u623f\u5730\u4ea7",S.name2="\u9996\u4ed8",S.name3="\u603b\u4ef7",S.child=b;for(var k=[],I=0,R=d.assetEquityList;I<R.length;I++)_=R[I],g=new B,y=_.eachPrice*(null!==(r=_.count)&&void 0!==r?r:0),g.amount=y,g.number=10*_.count+"%",g.name=null!==(l=_.name)&&void 0!==l?l:"",k.push(g);var L=new G;L.name1="\u80a1\u6743",L.name2="\u80a1\u6743\u6bd4\u4f8b",L.name3="\u603b\u4ef7",L.child=k;for(var x=[],P=0,T=d.assetCompanyList;P<T.length;P++)_=T[P],(g=new B).amount=null!==(u=_.totalPrice)&&void 0!==u?u:0,g.number=""+(null!==(c=_.firstPrice)&&void 0!==c?c:0),g.name=null!==(h=_.name)&&void 0!==h?h:"",x.push(g);var U=new G;return U.name1="\u4f01\u4e1a",U.name2="\u9996\u4ed8",U.name3="\u603b\u4ef7",U.child=x,[C,S,L,U]}function I(){var t,e,i,n,o,a,r=s.default.userInfo,l=[];if(r.myHouseName&&r.myHouseName.length>0){var u=new B;u.amount=null!==(t=r.myHouseTotalPrice)&&void 0!==t?t:0,u.number=""+(null!==(e=r.myHouseFirstPrice)&&void 0!==e?e:0),u.name=null!==(i=r.myHouseName)&&void 0!==i?i:"",l.push(u)}var c=new G;c.name1="\u623f\u5730\u4ea7",c.name2="\u9996\u4ed8",c.name3="\u603b\u4ef7",c.child=l;var h=[];if(r.carName&&r.carName.length>0){var d=new B;d.number=""+(null!==(n=r.carFirstPrice)&&void 0!==n?n:0),d.amount=null!==(o=r.carTotalPrice)&&void 0!==o?o:0,d.name=null!==(a=r.carName)&&void 0!==a?a:"",h.push(d)}var f=new G;return f.name1="\u6c7d\u8f66",f.name2="\u9996\u4ed8",f.name3="\u603b\u4ef7",f.child=h,[c,f]}function R(){var t,e,i,n,o,a=s.default.userInfo,r=[],l=new B;l.amount=a.assetCash,l.number="",l.name="[img]"+fgui.UIPackage.getItemURL("Game","game_liabilites_code@3x")+"[/img] \u73b0\u91d1",r.push(l);for(var u=0,c=a.assetArticleList;u<c.length;u++){var h=c[u],d=new B,f=h.price*(null!==(t=h.count)&&void 0!==t?t:0);d.amount=f,d.number=""+(null!==(e=h.count)&&void 0!==e?e:0),d.name=null!==(i=h.name)&&void 0!==i?i:"",r.push(d)}for(var m=0,p=a.assetFuturesList;m<p.length;m++){h=p[m],d=new B,f=h.price*(null!==(n=h.count)&&void 0!==n?n:0),d.amount=f;var _=1==h.operate?"\u505a\u591a":"\u505a\u7a7a";d.number=h.count+"/"+_,d.name=null!==(o=h.name)&&void 0!==o?o:"",r.push(d)}var g=new G;return g.name1="\u540d\u79f0",g.name2="\u6570\u91cf",g.name3="\u603b\u4ef7",g.child=r,[g]}function L(){for(var t,e,i,n,o=s.default.userInfo,a=[],r=0,l=o.assetHouseList;r<l.length;r++){var u=l[r],c=new P;u.loan&&u.loan>0&&(c.amount=u.monthRepay,c.loan=null!==(t=u.loan)&&void 0!==t?t:0,c.name=null!==(e=u.name)&&void 0!==e?e:"",a.push(c))}var h=new x;h.name="\u6295\u8d44\u623f\u8d37\u6b3e",h.child=a;for(var d=[],f=0,m=o.assetCompanyList;f<m.length;f++)u=m[f],c=new P,u.loan&&u.loan>0&&(c.amount=u.monthRepay,c.loan=null!==(i=u.loan)&&void 0!==i?i:0,c.name=null!==(n=u.name)&&void 0!==n?n:"",d.push(c));var p=new x;return p.name="\u4f01\u4e1a\u8d37\u6b3e",p.child=d,[h,p]}i.GameLiabilitiesResultView=v,i.sumAsset=w,i.sumLoanAsset=S,i.refactorCreateAsset=k,i.refactorExpandAsset=I,i.refactorOtherAsset=R,i.refactorOtherLoanAsset=L;var G=function(){},B=function(){},x=function(){},P=function(){};cc._RF.pop()},{"../../Common/Global":"Global","../../Utils/MathUtil":"MathUtil"}],GameTasks:[function(t,e,i){"use strict";cc._RF.push(e,"331b6TrXXpDqqiBW5fLXYAj","GameTasks"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameTasks=void 0;i.GameTasks=function(){},cc._RF.pop()},{}],GameTrusteeship:[function(t,e,i){"use strict";cc._RF.push(e,"9bd05tG0+JIoJsi14THKfma","GameTrusteeship"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameTrusteeship=void 0;var n=t("../../Common/GameServerUtil"),o=t("../../Common/GameUtils"),s=t("../../Common/Global"),a=t("../../Constant/TrusteeshipEnum"),r=function(){function t(){}return t.automateProcess=function(t,e,i){if(i&&i.hide(),e==a.TrusteeshipEnum.dice)t&&n.GameServerUtil.fetchGameDice();else if(e==a.TrusteeshipEnum.selectChancel)t&&n.GameServerUtil.fetchGameSelectChance(1);else if(e==a.TrusteeshipEnum.chancelResult)if(t)console.log("\u81ea\u5df1\u7684\u56de\u5408\uff0c\u53ef\u4ee5\u653e\u5f03"),n.GameServerUtil.fetchGameSoleAbandon();else try{var o=s.default.gameVoData;if(console.log("\u673a\u4f1a\u7c7b\u578b\uff1a",o.incidentType),1==o.incidentType){var r=o.object;null!=s.default.userInfo.assetStockList.find(function(t){return t.stockType===r.stockType})?(console.log("\u62e5\u6709\u8be5\u8d44\u4ea7\uff0c\u53ef\u4ee5\u653e\u5f03"),n.GameServerUtil.fetchGameSoleAbandon()):console.log("\u6ca1\u6709\u8be5\u8d44\u4ea7\uff0c\u8df3\u8fc7")}}catch(f){console.log("\u673a\u4f1a\u6258\u7ba1\u6267\u884c\u51fa\u73b0\u5f02\u5e38:"+f)}else if(e==a.TrusteeshipEnum.marketNew){if(2!=(h=s.default.gameDiceVo).mapType)return;var l=h.object,u=l.marketType;if(2==u||3==u)t&&n.GameServerUtil.fetchGameSoleAbandon();else{var c=l.object;this.autoMarketByRequestBuy(t,c)}}else if(e==a.TrusteeshipEnum.skillBuy)t&&n.GameServerUtil.fetchGameSoleAbandon();else if(e==a.TrusteeshipEnum.children)t&&n.GameServerUtil.fetchGameSoleAbandon();else if(e==a.TrusteeshipEnum.lifeIncidentBuy){if(!t)return;var h;if(3!=(h=s.default.gameDiceVo).mapType)return;var d=h.object.episode;s.default.userInfo.assetCash-d.price>=0?(n.GameServerUtil.fetchGameLifeIncidentBuy(1),console.log("\u3010\u6258\u7ba1\u6a21\u5f0f\u3011\uff1a\u73b0\u91d1\u5145\u8db3\uff0c\u73b0\u91d1\u652f\u4ed8")):1==d.isCredit?(console.log("\u3010\u6258\u7ba1\u6a21\u5f0f\u3011\uff1a\u4fe1\u7528\u5361\u652f\u4ed8"),n.GameServerUtil.fetchGameLifeIncidentBuy(2)):(console.log("\u3010\u6258\u7ba1\u6a21\u5f0f\u3011\uff1a\u73b0\u91d1\u4e0d\u8db3\uff0c\u73b0\u91d1\u652f\u4ed8"),n.GameServerUtil.fetchGameLifeIncidentBuy(1))}else e==a.TrusteeshipEnum.raises?t&&n.GameServerUtil.fetchGameSoleAbandon():e==a.TrusteeshipEnum.loseCause?t&&n.GameServerUtil.fetchGameSoleAbandon():e==a.TrusteeshipEnum.auction?n.GameServerUtil.fetchGameAuctionAbandon():e==a.TrusteeshipEnum.future&&(t?n.GameServerUtil.fetchGameSoleAbandon():s.default.userInfo.assetFuturesList&&s.default.userInfo.assetFuturesList.length>0&&n.GameServerUtil.fetchGameSoleAbandon())},t.autoMarketByRequestBuy=function(t,e){if(o.GameUtils.handleMarketRequestBuy(e,s.default.userInfo))return this.autoMarketRequestBuyToArticle(e);if(!t)return console.log("\u4e0d\u662f\u6211\u7684\u56de\u5408\uff0c\u8df3\u51fa\u4e8b\u4ef6");for(var i=!1,a=0,r=s.default.roomInfo.userInfoList;a<r.length;a++){var l=r[a];if(0!=l.status)break;var u=o.GameUtils.handleMarketRequestBuy(e,l);if(s.default.userInfo.userId!==l.userId&&u){console.log("\u73a9\u5bb6"+l.nickname+"\u62e5\u6709\u8be5\u6c42\u8d2d\u8d44\u4ea7\uff0c\u8df3\u51fa\u5faa\u73af\u5224\u65ad\u903b\u8f91"),i=!0;break}}i?console.log("\u6709\u73a9\u5bb6\u90fd\u62e5\u6709\u8be5\u6c42\u8d2d\u8d44\u4ea7\uff0c\u7531\u8be5\u73a9\u5bb6\u6267\u884c\u6c42\u8d2d\u903b\u8f91"):(console.log("\u5176\u4ed6\u73a9\u5bb6\u90fd\u672a\u62e5\u6709\u8be5\u6c42\u8d2d\u8d44\u4ea7\uff0c\u6267\u884c\u653e\u5f03\u903b\u8f91"),n.GameServerUtil.fetchGameSoleAbandon())},t.autoMarketRequestBuyToArticle=function(t){if(4!=t.bigType)return n.GameServerUtil.fetchGameSoleAbandon();for(var e=[],i=0,o=t.smallTypeList;i<o.length;i++)for(var a=o[i],r=0,l=s.default.userInfo.assetArticleList;r<l.length;r++){var u=l[r];if(u.type==a&&3==u.type){var c={id:u.id,count:u.count};e.push(c)}}e.length>0?n.GameServerUtil.fetchGameArticleSell(e):n.GameServerUtil.fetchGameSoleAbandon()},t}();i.GameTrusteeship=r,cc._RF.pop()},{"../../Common/GameServerUtil":"GameServerUtil","../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Constant/TrusteeshipEnum":"TrusteeshipEnum"}],GameUtils:[function(t,e,i){"use strict";cc._RF.push(e,"44708c2mOJLB7F/fr71SR+x","GameUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameUtils=void 0;var n=t("base64-js"),o=t("./Global"),s=t("./LogUtil"),a=t("pako"),r=function(){function t(){}return t.getCurrentTime=function(){return(new Date).getTime()/1e3},t.dateStr=function(){var t=new Date;return t.getMinutes()+"\u5206"+t.getSeconds()+"\u79d2"},t.isHaveSkill=function(t,e){return 0==e||t.skillList.map(function(t){return t.type}).some(function(t){return t===e})},t.transformNum=function(t){var e=null;switch(t){case 1:e="\u4e00";break;case 2:e="\u4e8c";break;case 3:e="\u4e09";break;case 4:e="\u56db";break;case 5:e="\u4e94";break;case 6:e="\u516d";break;case 7:e="\u4e03";break;case 8:e="\u516b";break;case 9:e="\u4e5d";break;case 10:e="\u5341"}return e},t.handleUserInfoList=function(e){for(var i=e,n=[],o=0;o<i.length;o++){var s=i[o],a=t.fetchCustomProfile(s.customPlayerProperties),r={playerId:s.playerId,openId:a.id,roleId:a.roleId};n.push(r)}return n},t.handleUserIdList=function(e){for(var i=e,n=[],o=0;o<i.length;o++){var s=i[o],a=t.fetchCustomProfile(s.customPlayerProperties);n.push(a.id)}return n},t.checkBankrupt=function(t,e){var i;return(i=3==t.userInfoList.find(function(t){return t.userId===e.userId}).status)&&(s.default.log("\u662f\u5426\u7834\u4ea7->\u7528\u6237\uff1a",e.userId),s.default.log("\u662f\u5426\u7834\u4ea7\uff1a",i)),i},t.checkLiberty=function(t,e){var i,n=t.find(function(t){return t===e});return(i=null!=n&&null!=n)&&(s.default.log("\u662f\u5426\u8d22\u5bcc\u81ea\u7531->\u96c6\u5408\uff1a",t),s.default.log("\u662f\u5426\u8d22\u5bcc\u81ea\u7531->\u7528\u6237\uff1a",e),s.default.log("\u662f\u5426\u8d22\u5bcc\u81ea\u7531\uff1a",i)),i},t.handleMarketRequestBuy=function(t,e){for(var i=t,n=[],o=0,s=i.smallTypeList;o<s.length;o++){var a=s[o];if(1==i.bigType)for(var r=0,l=e.assetHouseList;r<l.length;r++){var u=l[r];u.type==a&&n.push(u)}else if(2==i.bigType)for(var c=0,h=e.assetCompanyList;c<h.length;c++){var d=h[c];d.smallType==a&&n.push(d)}else if(3==i.bigType)for(var f=0,m=e.assetEquityList;f<m.length;f++){var p=m[f];p.type==a&&n.push(p)}else if(4==i.bigType)for(var _=0,g=e.assetArticleList;_<g.length;_++){var y=g[_];y.type==a&&n.push(y)}}return n.length>0},t.prepareUserDatas=function(e,i){var n=e,o=JSON.parse(i.customRoomProperties),s=[];if(o.players)for(var a=0,r=o.players;a<r.length;a++){var l=r[a],u=t.fetchCustomProfile(l);s.push(u)}else for(var c=0,h=i.players;c<h.length;c++)l=h[c],u=t.fetchCustomProfile(l.customPlayerProperties),s.push(u);return n.forEach(function(t){var e=s.find(function(e){return e.openId==t.userId});e&&(t.faceUrl=e.faceUrl,t.nickname=e.nickname,t.openId=e.id,t.financeGrade=e.level)}),n},t.extractMarketRequestBuy=function(t,e){for(var i=t,n=[],o=0,a=i.smallTypeList;o<a.length;o++){var r=a[o];if(1==i.bigType)for(var l=0,u=e.assetHouseList;l<u.length;l++){var c=u[l];c.type==r&&n.push(c)}else if(2==i.bigType)for(var h=0,d=e.assetCompanyList;h<d.length;h++){var f=d[h];f.smallType==r&&n.push(f)}else if(3==i.bigType)for(var m=0,p=e.assetEquityList;m<p.length;m++){var _=p[m];_.type==r&&n.push(_)}else if(4==i.bigType)for(var g=0,y=e.assetArticleList;g<y.length;g++){var C=y[g];C.type==r&&n.push(C)}}return s.default.log("\u5f85\u51fa\u552e\u8d44\u4ea7:",n),n},t.synchronousRoomInfo=function(t,e){var i=t.status,n=t.boutCount,a=t.age,r=t.currentUserId,l=t.isDice,u=t.eventEndTime;i&&(s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u6e38\u620f\u72b6\u6001\u53d8\u5316-",i),e.status=i),n&&(s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u56de\u5408\u6570\u53d8\u5316-",n),e.boutCount=n),a&&(s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u5e74\u9f84\u53d8\u5316-",a),e.age=a),r&&(s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u5f53\u524d\u56de\u5408\u7528\u6237-",r),e.currentUserId=r),u?(s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u5f53\u524d\u56de\u5408\u7528\u6237\u5f00\u59cb\u65f6\u95f4",u),e.eventEndTime=u):e.eventEndTime=null,null!=l?(s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u662f\u5426\u9700\u8981\u6447\u9ab0\u5b50-",l),e.isDice=l):e.isDice=null;var c=t.userInfoList,h=e.userInfoList,d=[],f=this;return c.forEach(function(t){var e=h.find(function(e){return e.userId===t.userId});if(e){var i=e.userId===o.default.gameUserid;(e=f.synchronousUserInfo(t,e,i)).assetStockList=f.synchronousStockAsset(t,e,i),e.assetHouseList=f.synchronousHouseAsset(t,e,i),e.assetCompanyList=f.synchronousCompanyAsset(t,e,i),e.assetEquityList=f.synchronousEquityAsset(t,e,i),e.assetFuturesList=f.synchronousFuturesAsset(t,e,i),e.assetArticleList=f.synchronousArticleAsset(t,e,i),e.skillList=f.synchronousSkillList(t,e,i),d.push(e)}else s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u589e\u672c\u5730\u73a9\u5bb6\u8d44\u6599",t),d.push(t)}),e.userInfoList=d,t.auctionObject?(e.auctionObject=t.auctionObject,e.auctionUserId=t.auctionUserId,e.auctionBidUserId=t.auctionBidUserId,e.auctionPrice=t.auctionPrice):(e.auctionObject=null,e.auctionUserId=null,e.auctionBidUserId=null,e.auctionPrice=null),e},t.synchronousStockAsset=function(t,e,i){var n=[];return t.assetStockList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u7968\u8d44\u4ea7\u53d8\u52a8=============");var a=e.assetStockList.find(function(e){return e.stockType===t.stockType});null==a?(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u4e70\u5165\u80a1\u7968\u8d44\u4ea7",t.name),n.push(t)):(null!=t.count&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u7968\u8d44\u4ea7\u6570\u91cf\u53d8\u52a8",t.count),a.count=t.count),null!=t.monthCashFlow&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u7968\u8d44\u4ea7\u73b0\u91d1\u6d41\u53d8\u52a8",t.monthCashFlow),a.monthCashFlow=t.monthCashFlow),null!=t.totalPrice&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u7968\u8d44\u4ea7\u603b\u4ef7\u53d8\u52a8",t.totalPrice),a.totalPrice=t.totalPrice),n.push(a))}),n},t.synchronousHouseAsset=function(t,e,i){var n=[];return t.assetHouseList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u623f\u4ea7\u8d44\u4ea7\u53d8\u52a8=============");var a=e.assetHouseList.find(function(e){return e.id===t.id});null==a?(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u4e70\u5165\u623f\u4ea7\u8d44\u4ea7",t.name),n.push(t)):(t.isSelected=!1,null!=t.loan&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u623f\u4ea7\u8d44\u8d37\u6b3e\u53d8\u52a8",t.monthRepay),a.loan=t.loan),null!=t.monthRepay&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u623f\u4ea7\u8d44\u4ea7\u6708\u4f9b\u53d8\u52a8",t.monthRepay),a.monthRepay=t.monthRepay),null!=t.monthIncome&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u623f\u4ea7\u8d44\u4ea7\u6708\u6536\u5165\u53d8\u52a8",t.monthIncome),a.monthIncome=t.monthIncome),null!=t.monthCashFlow&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u623f\u4ea7\u8d44\u4ea7\u73b0\u91d1\u6d41\u53d8\u52a8",t.monthCashFlow),a.monthCashFlow=t.monthCashFlow),n.push(a))}),n},t.synchronousCompanyAsset=function(t,e,i){var n=[];return t.assetCompanyList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u4f01\u4e1a\u8d44\u4ea7\u53d8\u52a8=============");var a=e.assetCompanyList.find(function(e){return e.id===t.id});null==a?(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u4e70\u5165\u4f01\u4e1a\u8d44\u4ea7",t.name),n.push(t)):(t.isSelected=!1,null!=t.loan&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u4f01\u4e1a\u8d44\u8d37\u6b3e\u53d8\u52a8",t.monthRepay),a.loan=t.loan),null!=t.monthRepay&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u4f01\u4e1a\u8d44\u4ea7\u6708\u4f9b\u53d8\u52a8",t.monthRepay),a.monthRepay=t.monthRepay),null!=t.monthIncome&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u4f01\u4e1a\u8d44\u4ea7\u6708\u6536\u5165\u53d8\u52a8",t.monthIncome),a.monthIncome=t.monthIncome),null!=t.monthCashFlow&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u4f01\u4e1a\u8d44\u4ea7\u73b0\u91d1\u6d41\u53d8\u52a8",t.monthCashFlow),a.monthCashFlow=t.monthCashFlow),n.push(a))}),n},t.synchronousEquityAsset=function(t,e,i){var n=[];return t.assetEquityList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u6743\u8d44\u4ea7\u53d8\u52a8=============");var a=e.assetEquityList.find(function(e){return e.id===t.id});null==a?(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u4e70\u5165\u80a1\u6743\u8d44\u4ea7",t.name),n.push(t)):(t.isSelected=!1,null!=t.count&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u6743\u8d44\u4ea7\u6570\u91cf\u53d8\u52a8",t.count),a.count=t.count),null!=t.monthCashFlow&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u6743\u8d44\u4ea7\u73b0\u91d1\u6d41\u53d8\u52a8",t.monthCashFlow),a.monthCashFlow=t.monthCashFlow),n.push(a))}),n},t.synchronousArticleAsset=function(t,e,i){var n=[];return t.assetArticleList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u7269\u54c1\u8d44\u4ea7\u53d8\u52a8=============");var a=e.assetArticleList.find(function(e){return e.id===t.id});null==a?(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u4e70\u5165\u7269\u54c1\u8d44\u4ea7",t.name),n.push(t)):(t.isSelected=!1,t.count&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u7269\u54c1\u8d44\u4ea7\u6570\u91cf\u53d8\u52a8",t.count),a.count=t.count),n.push(a))}),n},t.synchronousFuturesAsset=function(t,e,i){var n=[];return t.assetFuturesList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u6307\u671f\u8d27\u8d44\u4ea7\u53d8\u52a8=============");var a=e.assetFuturesList.find(function(e){return e.id===t.id});null==a?(n.push(t),i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u4e70\u5165\u80a1\u6307\u671f\u8d27",t.name)):(t.isSelected=!1,null!=t.count&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u80a1\u6307\u671f\u8d27\u6570\u91cf\u53d8\u52a8",t.count),a.count=t.count),n.push(a))}),n},t.synchronousSkillList=function(t,e,i){var n=[];return t.skillList.forEach(function(t,o){0==o&&i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u6280\u80fd\u53d8\u52a8=============");var a=e.skillList.find(function(e){return e.type===t.type});null==a?(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u65b0\u5b66\u4e60\u6280\u80fd",t.name),n.push(t)):n.push(a)}),n},t.synchronousUserInfo=function(t,e,i){return i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1a\u7528\u6237\u4fe1\u606f\u53d8\u52a8=============",e.nickname),null!=t.expendInsure&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendInsure:",t.expendInsure),e.expendInsure=t.expendInsure),null!=t.expendLife&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendLife:",t.expendLife),e.expendLife=t.expendLife),t.expendChildren&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendChildren:",t.expendChildren),e.expendChildren=t.expendChildren),t.carName&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1acarName:",t.carName),e.carName=t.carName),null!=t.carFirstPrice&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1acarFirstPrice:",t.carFirstPrice),e.carFirstPrice=t.carFirstPrice),null!=t.carTotalPrice&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1acarTotalPrice:",t.carTotalPrice),e.carTotalPrice=t.carTotalPrice),t.myHouseName&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1amyHouseName:",t.myHouseName),e.myHouseName=t.myHouseName),null!=t.myHouseFirstPrice&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1amyHouseFirstPrice:",t.myHouseFirstPrice),e.myHouseFirstPrice=t.myHouseFirstPrice),null!=t.myHouseTotalPrice&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1amyHouseTotalPrice:",t.myHouseTotalPrice),e.myHouseTotalPrice=t.myHouseTotalPrice),t.roleName&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aroleName:",t.roleName),e.roleName=t.roleName),null!=t.stepNumber&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1astepNumber:",t.stepNumber),e.stepNumber=t.stepNumber),null!=t.status&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1astatus:",t.status),e.status=t.status),null!=t.incomeSalary&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aincomeSalary:",t.incomeSalary),e.incomeSalary=t.incomeSalary),null!=t.incomeTimePart&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aincomeTimePart:",t.incomeTimePart),e.incomeTimePart=t.incomeTimePart),null!=t.expendMyHouse&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendMyHouse:",t.expendMyHouse),e.expendMyHouse=t.expendMyHouse),null!=t.expendCar&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendCar:",t.expendCar),e.expendCar=t.expendCar),null!=t.expendBankInterest&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendBankInterest:",t.expendBankInterest),e.expendBankInterest=t.expendBankInterest),null!=t.expendChildrenCount&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendChildrenCount:",t.expendChildrenCount),e.expendChildrenCount=t.expendChildrenCount),null!=t.expendCreditCard&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aexpendCreditCard:",t.expendCreditCard),e.expendCreditCard=t.expendCreditCard),null!=t.assetCash&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aassetCash:",t.assetCash),e.assetCash=t.assetCash),null!=t.loanMyHouse&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aloanMyHouse:",t.loanMyHouse),e.loanMyHouse=t.loanMyHouse),null!=t.loanCar&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aloanCar:",t.loanCar),e.loanCar=t.loanCar),null!=t.loanBank&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aloanBank:",t.loanBank),e.loanBank=t.loanBank),null!=t.loanCreditCard&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aloanCreditCard:",t.loanCreditCard),e.loanCreditCard=t.loanCreditCard),null!=t.accordIncome&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1aaccordIncome:",t.accordIncome),e.accordIncome=t.accordIncome),null!=t.passiveIncome&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1apassiveIncome:",t.passiveIncome),e.passiveIncome=t.passiveIncome),null!=t.totalIncome&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1atotalIncome:",t.totalIncome),e.totalIncome=t.totalIncome),null!=t.totalExpend&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1atotalExpend:",t.totalExpend),e.totalExpend=t.totalExpend),null!=t.mayLoan&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1amayLoan:",t.mayLoan),e.mayLoan=t.mayLoan),null!=t.cashFlow&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1acashFlow:",t.cashFlow),e.cashFlow=t.cashFlow),null!=t.libertyRate&&(i&&s.default.log("\u3010\u670d\u52a1\u7aef\u8fd4\u56de\u623f\u95f4\u4fe1\u606f\u3011\uff1alibertyRate:",t.libertyRate),e.libertyRate=t.libertyRate),e},t.createCustomProfile=function(){var t={faceUrl:o.default.userInfo.faceUrl,level:o.default.userLevel,id:o.default.userInfo.openId,nickname:o.default.userInfo.nickname,roleName:o.default.roleInfo.name1,roleId:o.default.roleInfo.id,openId:o.default.playerId},e=JSON.stringify(t);return s.default.log("customProfileJson:",t),e},t.fetchCustomProfile=function(t){return null==t?null:JSON.parse(t)},t.checBoardNumber=function(t,e){var i="",n=e;return t>9?(i=1==n.length?"0":n.substring(0,n.length-1),s.default.log("\u3010\u81ea\u5b9a\u4e49\u952e\u76d8\u3011\u5f53\u524d\u8f93\u5165\u6570\u5b57:",i)):0==n.length?i=""+t:1==n.length&&"0"===n?i=""+t:(i=n+""+t,s.default.log("\u3010\u81ea\u5b9a\u4e49\u952e\u76d8\u3011\u5f53\u524d\u8f93\u5165\u6570\u5b57:",i)),i},t.dateFormat=function(t,e){null==t&&null==e?(t=new Date,e="yyyy-MM-dd HH:mm:ss"):"string"==typeof t?(e=t,t=new Date):void 0===e&&(e="yyyy-MM-dd HH:mm:ss");var i={y:t.getFullYear()+"",M:t.getMonth()+1+"",d:t.getDate()+"",H:t.getHours(),m:t.getMinutes()+"",s:t.getSeconds()+"",q:Math.floor((t.getMonth()+3)/3)+"",f:t.getMilliseconds()+""};i.H>12?i.h=i.H-12+"":i.h=i.H+"",i.H+="";for(var n="yMdHhmsqf",o="",s="",a=0,r=0;a<n.length;a++)if(!((r=e.indexOf(n[a]))<0)){for(o="";r<e.length&&e[r]==n[a];r++)o+=n[a];if(o.length>0){if(o.length==i[n[a]].length)s=i[n[a]];else if(o.length>i[n[a]].length)s="f"==n[a]?i[n[a]]+this.charString("0",o.length-i[n[a]].length):this.charString("0",o.length-i[n[a]].length)+i[n[a]];else switch(n[a]){case"y":s=i[n[a]].substr(i[n[a]].length-o.length);break;case"f":s=i[n[a]].substr(0,o.length);break;default:s=i[n[a]]}e=e.replace(o,s)}}return e},t.charString=function(t,e){for(var i="";e--;)i+=t;return i},t.decompressAndParseJson=function(t){var e=n.toByteArray(t);return a.ungzip(e,{to:"string"})},t}();i.GameUtils=r,cc._RF.pop()},{"./Global":"Global","./LogUtil":"LogUtil","base64-js":1,pako:2}],GameVo:[function(t,e,i){"use strict";cc._RF.push(e,"a503ba+GtNO26WmUrwCEuR6","GameVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameDataVo=i.GameVo=void 0;i.GameVo=function(){};i.GameDataVo=function(){},cc._RF.pop()},{}],GameWindow:[function(t,e,i){"use strict";cc._RF.push(e,"b317aUESqZBQYJtIzbRLY8A","GameWindow");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.GameSoundWindow=i.GameThemeWindow=i.GameRuleWindow=i.GameSetMenuWindow=void 0;var s=t("../../Common/Global"),a=t("../../Common/LogUtil"),r=function(t){function e(){var e=t.call(this)||this;return e.onSubmitResult=null,e}return o(e,t),e.prototype.onConstruct=function(){var t=this;this.getChild("n1").asButton.onClick(function(){t.onSubmitResult&&t.onSubmitResult(1,!0)},this),this.getChild("n2").asButton.onClick(function(){t.onSubmitResult&&t.onSubmitResult(2,!0),(new l).show()},this),this.getChild("n3").asButton.onClick(function(){t.onSubmitResult&&t.onSubmitResult(3,!0),(new u).show()},this),this.getChild("n4").asButton.onClick(function(){t.onSubmitResult&&t.onSubmitResult(4,!0);var e=new c;e.show(),e.onSubmitResult=t.onSubmitResult},this)},e.prototype.onShown=function(){},e}(fgui.GComponent);i.GameSetMenuWindow=r;var l=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","GameRuleWindow").asCom,this.makeFullScreen(),this.center(),this.closeButton=this.contentPane.getChild("n3")},e}(fgui.Window);i.GameRuleWindow=l;var u=function(t){function e(){var e=t.call(this)||this;return e._themeMode=0,e.onSubmitResult=null,e}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","GameThemeWindow").asCom,this.center();var t=this.contentPane.getChild("n4").asButton,e=this.contentPane.getChild("n5").asButton;0==s.default.theme?(t.selected=!0,e.selected=!1):(e.selected=!0,t.selected=!1);var i=this;t.onClick(function(){e.selected=!1,t.selected=!0,i._themeMode=0},this),e.onClick(function(){t.selected=!1,e.selected=!0,i._themeMode=1},this),this.closeButton=this.contentPane.getChild("n1"),this.contentPane.getChild("n2").onClick(function(){a.default.log("\u786e\u8ba4\u4e3b\u9898"),i.onSubmitResult&&i.onSubmitResult(i._themeMode)},this)},e}(fgui.Window);i.GameThemeWindow=u;var c=function(t){function e(){var e=t.call(this)||this;return e.onSubmitResult=null,e}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("Game","GameSoundWindow").asCom,this.center();var t=this.contentPane.getChild("n2").asButton,e=this.contentPane.getChild("n4").asButton,i=this.contentPane.getChild("n7").asButton,n=this.contentPane.getChild("n10").asButton,o=this;t.onClick(function(e){a.default.log("\u80cc\u666f\u97f3\u4e50:",e.button),a.default.log("\u80cc\u666f\u97f3\u4e50button1:",t.selected),o.onSubmitResult&&this.onSubmitResult(1,t.selected)},this),e.onClick(function(t){a.default.log("\u6e38\u620f\u97f3\u6548:",t.button),a.default.log("\u6e38\u620f\u97f3\u6548button2:",e.selected),o.onSubmitResult&&this.onSubmitResult(2,e.selected)},this),i.onClick(function(t){a.default.log("\u9707\u52a8\u97f3\u6548:",t.button),a.default.log("button3:",i.selected),o.onSubmitResult&&this.onSubmitResult(3,i.selected)},this),n.onClick(function(t){a.default.log("\u4e2a\u6027\u97f3\u6548:",t.button),a.default.log("button4:",n.selected),o.onSubmitResult&&this.onSubmitResult(4,n.selected)},this),this.closeButton=this.contentPane.getChild("n5"),s.default.game_music_status?t.selected=!0:t.selected=!1,s.default.game_effect_status?e.selected=!0:e.selected=!1,s.default.game_vibrator_status?i.selected=!0:i.selected=!1,s.default.game_feature_status?n.selected=!0:n.selected=!1},e}(fgui.Window);i.GameSoundWindow=c,cc._RF.pop()},{"../../Common/Global":"Global","../../Common/LogUtil":"LogUtil"}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"075cedznnBOoJBQMU+07/hP","Game");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.Message=void 0;var a=t("../Windows/GameWindow"),r=t("../Common/GameRoleItem"),l=t("../../Common/Global"),u=t("../Common/Toast"),c=t("../Windows/GameBank"),h=t("../Windows/GameStatement"),d=t("../Windows/GameOtherUserWindow"),f=t("../../Utils/AudioPlayer"),m=t("../../Constant/ResponseCmdEnum"),p=t("../Windows/GameResultWindow"),_=t("../../Common/GameResourceUtil"),g=t("./Main"),y=t("./RoleStore"),C=t("./Retrospect"),b=t("../../Common/GameUtils"),v=t("../../Common/GameServerUtil"),w=t("../../Constant/TrusteeshipEnum"),S=t("../Common/GameTrusteeship"),k=t("../Common/GameActivityArea"),I=t("../Common/GameIncident"),R=t("../../Utils/MathUtil"),L=t("../../Utils/ObjectUtil"),G=t("../../Common/LogUtil"),B=t("../Windows/GameChatWindow"),x=t("../Common/GameHudView"),P=t("../../Common/NativeServiceUtils"),T=cc._decorator,U=T.ccclass,A=(T.property,function(){});i.Message=A;var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._game_item_01=new r.default,e._game_item_02=new r.default,e._game_item_03=new r.default,e._game_item_04=new r.default,e.game_start_num=0,e.game_end=!1,e.isTrusteeship=!1,e.passiveness_num=0,e.is_incident_event=!1,e.is_feture_event=!0,e.is_dice_run=!0,e.reConnectCount=0,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){var t=this;fgui.GRoot.inst.showModalWait(),fgui.UIObjectFactory.setExtension("ui://Game/GameChatContentView",B.GameChatContentView),fgui.UIObjectFactory.setExtension("ui://Game/GameActivityArea",k.GameActivityArea);try{var e=new fgui.AsyncOperation;e.createObject("Game","GameMain"),e.callback=function(e){G.default.log("\u9875\u9762\u52a0\u8f7d\u5b8c\u6210"),t.onInit(e)}}catch(i){G.default.log("\u521b\u5efa\u5305\u5931\u8d25\uff0c\u5c1d\u8bd5\u91cd\u8f7d\u4e00\u6b21"),fgui.UIPackage.loadPackage("UI/Game",this.onInit.bind(this))}finally{G.default.log("\u64cd\u4f5c\u5b8c\u6210")}this.initLoadGameMusic()},e.prototype.initLoadGameMusic=function(){f.default.setMusicVolume(100),_.GameSoundUtil.incidentSounds(_.GameSoundMode.Playing)?f.default.playMusic(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Playing)):cc.loader.loadRes("music/sound_game_playing.mp3",cc.AudioClip,function(t,e){f.default.playMusic(e),_.GameSoundUtil.soundList.push(e)})},e.prototype.initListener=function(){var t=this;l.default.room&&l.default.room.onRoomPropertiesChange(function(e){return t.onRoomUpdate(e)}),l.default.room.onLeave(function(e){return t.onLeaveRoom(e)}),l.default.room.onDismiss(function(){return t.onDismissRoom()}),l.default.room.onUpdateCustomStatus(function(e){return t.onUpdateCustomStatus(e)}),l.default.room.onDisconnect(function(e){return t.onDisconnect(e)}),l.default.room.onConnect(function(e){return t.onConnect(e)}),l.default.room.onRoomPropertiesChange(function(e){return t.onRoomPropertiesChange(e)}),l.default.room.onRoomPropertiesChangeFailed(function(e){return t.onRoomPropertiesChangeFailed(e)}),l.default.room.onJoin(function(e){return t.onJoinRoom(e)}),l.default.room.onRecvFromClient(function(e){return t.onRecvFromClient(e)}),l.default.room.onRecvFromServer(function(e){return t.onRecvFromServer(e)})},e.prototype.initRoomInfo=function(){this.loadRolesData(),this.modifyGameChange(),this._gameArea.changePlayerLocation(),this.refreshDynamicData(),this.loadLibertyRate(),2==l.default.roomInfo.status||3==l.default.roomInfo.status?(this.handleGameStatusResult(l.default.gameVoData),3==l.default.roomInfo.status&&(this._playMenuController.selectedIndex=1)):(this.prepareToNewRound(),3==l.default.userInfo.status&&(this._playMenuController.selectedIndex=1))},e.prototype.preparePlayerInfo=function(){l.default.roomInfo.userInfoList=b.GameUtils.prepareUserDatas(l.default.roomInfo.userInfoList,l.default.room)},e.prototype.modifyGameChange=function(){G.default.log("\u4fee\u6b63\u6e38\u620f\u72b6\u6001:modifyGameChange");var t=this,e=l.default.roomInfo.userInfoList;e.forEach(function(e,i){3==e.status?t.setGameCurrentUserStatus(i,2):0==e.status?t.setGameCurrentUserStatus(i,0):1==e.status&&t.setGameCurrentUserStatus(i,3)});var i=l.default.roomInfo.currentUserId,n=e.findIndex(function(t){return t.userId===i});if(-1!=n){var o=i==l.default.gameUserid;this.setGameCurrentUser(n,o)}},e.prototype.prepareToNewRound=function(){var t=l.default.gameVoData.nextUserId,e=t==l.default.gameUserid,i=l.default.roomInfo.userInfoList.findIndex(function(e){return e.userId===t}),n=l.default.roomInfo.age;this.prepareTransferRole(n,i,e),this.refreshRoundCount(n),this.is_incident_event=!1,e?(l.default.roomInfo.isDice?0==l.default.roomInfo.isDice&&this.showGameRound(e):this.showGameRound(e),this.passiveness_num+=1,this.checkActivate(),this.handleTrusteeship(w.TrusteeshipEnum.dice)):(this._game_play_button.touchable=!1,this._game_play_button.grayed=!0,this.checkActivate())},e.prototype.refreshRoundCount=function(t){var e=t;this._game_round.text=e+"\u5c81"},e.prototype.onInit=function(t){this.scheduleOnce(function(){fgui.GRoot.inst.closeModalWait()},2),this._view=null==t?fgui.UIPackage.createObject("Game","GameMain").asCom:t.asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this._showModeController=this._view.getController("showMode");var e=this._view.getChild("n4").asCom;this._game_time=this._view.getChild("n23").asLabel,this._game_round=e.getChild("n2").asLabel,this._menuSet=e.getChild("n5").asButton,this._menuSet.onClick(this.gameSetMenuButtonClick,this),this._showSetController=this._view.getController("showSetMenu"),this._menuSetView=this._view.getChild("n58").asCom,this._view.getChild("gameIncidentMenu").asButton.onClick(this.gameIncidentMenuButtonClick,this),this._view.getChild("gameIncidentMenuClose").asButton.onClick(this.gameIncidentMenuCloseButtonClick,this),this._view.getChild("gameSkillMenu").asButton.onClick(this.gameSkillMenuButtonClick,this),this._view.getChild("gameSkillMenuClose").asButton.onClick(this.gameSkillMenuCloseButtonClick,this),this._gameArea=this._view.getChild("gameActivityArea").asCom;var i=this._view.getChild("n34").asButton;i.changeStateOnClick=!1,i.onClick(this.gameChatMenuButtonClick,this),this._chat_button=i,this._chatController=this._view.getController("chatMode"),this._chatWindow=this._view.getChild("n57").asCom,this._messages=new Array;var n=this._view.getChild("chatList").asCom;n.onClick(this.gameChatLogButtonClick,this),this._chatList=n.getChild("n0").asList,this._chatList.setVirtual(),this._chatList.itemRenderer=this.renderListItem.bind(this),this._skillDataArea=this._view.getChild("n24").asCom;var o=this._view.getChild("n35").asCom;this._game_month_passivity_income=o.getChild("n2").asLabel,this._game_month_initiative_income=o.getChild("n4").asLabel,this._game_month_all_expend=o.getChild("n6").asLabel,this._game_loan_bank=o.getChild("n8").asLabel,this._game_month_flow=o.getChild("n10").asLabel,this._game_month_cash=o.getChild("n12").asLabel,this._cashChangeView=this._view.getChild("cashChangeView").asCom;var s=this._view.getChild("n37").asCom;s.getChild("gameBank").onClick(this.showBankMenuClick,this),s.getChild("gameStatement").onClick(this.showStatementMenu,this),s.getChild("gameExit").onClick(this.prepareExitMenu,this),s.getChild("trusteeship").onClick(this.prepareCancelTrusteeship,this),this._playMenuController=s.getController("playMenu"),this._playMenuController.selectedIndex=0,this._game_play_button=s.getChild("gamePlay").asButton,this._game_play_button.onClick(this.onStartMoveClickButton,this),this._game_item_01.onInit(this._view.getChild("n6").asButton),this._game_item_02.onInit(this._view.getChild("n7").asButton),this._game_item_03.onInit(this._view.getChild("n8").asButton),this._game_item_04.onInit(this._view.getChild("n9").asButton),this.initChoosePlayerUser(),this.initAnimations(),this.initListener(),this.roomListener(),this.showChatMenu(),this.showSetMenu(),this.changeTheme(),this.fetchMessage(),v.GameServerUtil.fetchGameRoomInfo()},e.prototype.changeTheme=function(){this._view.getController("gameTheme").selectedIndex=l.default.theme},e.prototype.initAnimations=function(){this._diceResultAnimation=this._view.getChild("n39").asMovieClip,this._diceResultAnimation.playing=!1,this._diceResultAnimation.visible=!1,this._dicePrepareAnimation=this._view.getChild("n41").asMovieClip,this._dicePrepareAnimation.playing=!1,this._roundAnimation=this._view.getChild("n40").asMovieClip,this._roundAnimation.playing=!1,this._tapStartAnimation=this._view.getChild("n42").asMovieClip,this._tapStartAnimation.visible=!1,this._tapStartAnimation.playing=!1},e.prototype.initChoosePlayerUser=function(){this.choosePlayer(this._game_item_01),this.choosePlayer(this._game_item_02),this.choosePlayer(this._game_item_03),this.choosePlayer(this._game_item_04)},e.prototype.choosePlayer=function(t){t.onSubmitResult=function(t){if(null!=t&&null!=t){var e=l.default.roomInfo.userInfoList.find(function(e){return e.userId==t}),n=new d.default(e);n.show(),i.windowList.push(n)}}},e.prototype.refreshDynamicData=function(){var t,e,i,n,o,s,a=l.default.userInfo,r=null!==(t=a.accordIncome)&&void 0!==t?t:0,u=null!==(e=a.passiveIncome)&&void 0!==e?e:0,c=null!==(i=a.totalExpend)&&void 0!==i?i:0,h=null!==(n=a.loanBank)&&void 0!==n?n:0,d=null!==(o=a.cashFlow)&&void 0!==o?o:0,f=null!==(s=a.assetCash)&&void 0!==s?s:0;this.refreshDynamicCash(f),this._game_month_passivity_income.text=R.default.thousandBitSeparator(u),this._game_month_initiative_income.text=R.default.thousandBitSeparator(r),this._game_month_all_expend.text=R.default.thousandBitSeparator(c),this._game_loan_bank.text=R.default.thousandBitSeparator(h),this._game_month_flow.text=R.default.thousandBitSeparator(d);var m=R.default.thousandBitSeparator(f);null!=m&&null!=m&&(this._game_month_cash.text=m)},e.prototype.refreshDynamicCash=function(t){var e,i=R.default.thousandToNumber(null!==(e=this._game_month_cash.text)&&void 0!==e?e:"0");if(null!=i&&null!=i){var n=t-Number(i);if(G.default.log("\u3010\u73b0\u91d1\u53d8\u5316\u3011:",n),!(null==n||isNaN(n)||n<=0)){var o=this._view.getTransition("t1");this._cashChangeView.getChild("content").text="+"+R.default.thousandBitSeparator(n),o.play(function(){G.default.log("\u97f3\u6548\u64ad\u653e\u5b8c\u6210")})}}},e.prototype.refreshSkillData=function(){var t=this;l.default.userInfo.skillList.forEach(function(e){t.changeSkillStatus(e.type)})},e.prototype.changeSkillStatus=function(t){switch(t){case 1:this._skillDataArea.getChild("n1").asImage.visible=!0,this._skillDataArea.getChild("n11").asLabel.titleColor=cc.color(255,255,255);break;case 2:this._skillDataArea.getChild("n2").asImage.visible=!0,this._skillDataArea.getChild("n12").asLabel.titleColor=cc.color(255,255,255);break;case 3:this._skillDataArea.getChild("n3").asImage.visible=!0,this._skillDataArea.getChild("n13").asLabel.titleColor=cc.color(255,255,255);break;case 4:this._skillDataArea.getChild("n4").asImage.visible=!0,this._skillDataArea.getChild("n14").asLabel.titleColor=cc.color(255,255,255);break;case 5:this._skillDataArea.getChild("n5").asImage.visible=!0,this._skillDataArea.getChild("n15").asLabel.titleColor=cc.color(255,255,255);break;case 6:this._skillDataArea.getChild("n6").asImage.visible=!0,this._skillDataArea.getChild("n16").asLabel.titleColor=cc.color(255,255,255)}},e.prototype.loadRolesData=function(){G.default.log("[\u623f\u95f4\u7528\u6237\u4fe1\u606f]:",l.default.roomInfo.userInfoList);for(var t=0;t<l.default.roomInfo.userInfoList.length;t++){var e=l.default.roomInfo.userInfoList[t];0==t?this._game_item_01.updateUI(e,t):1==t?this._game_item_02.updateUI(e,t):2==t?this._game_item_03.updateUI(e,t):3==t&&this._game_item_04.updateUI(e,t)}},e.prototype.loadLibertyRate=function(){for(var t=0;t<l.default.roomInfo.userInfoList.length;t++){var e=l.default.roomInfo.userInfoList[t];0==t?this._game_item_01.updateLibertyRate(e,t):1==t?this._game_item_02.updateLibertyRate(e,t):2==t?this._game_item_03.updateLibertyRate(e,t):3==t&&this._game_item_04.updateLibertyRate(e,t)}},e.prototype.fetchMessage=function(){l.default.fastMessags&&l.default.fastMessags.length>0?this._chatWindow.changeChatList(l.default.fastMessags):v.GameServerUtil.fetchServiceMessageList(function(t){0!=t.length&&(l.default.fastMessags=t,l.default.fastMessags.forEach(function(t){cc.assetManager.loadRemote(t.audioUrl,{reload:!0,priority:3,cacheEnabled:!0,maxRetryCount:10},function(e,i){e||(t.audioClip=i)})}))},function(){G.default.log("\u83b7\u53d6\u5feb\u6377\u77ed\u8bed\u5931\u8d25")})},e.prototype.addMsg=function(t,e){var i=e===l.default.gameUserid,n=l.default.roomInfo.userInfoList.find(function(t){return t.userId===e}),o=this._chatList.scrollPane.isBottomMost,s=t.split("&"),a=s[0],r=new A;if(r.sender=n.nickname,r.senderIcon=n.faceUrl,r.msg=a,r.senderId=e,r.fromMe=i,r.addTime=b.GameUtils.dateFormat(),this._messages.push(r),this._messages.length>100&&this._messages.splice(0,this._messages.length-100),this._chatList.numItems=this._messages.length,o&&this._chatList.scrollPane.scrollBottom(),null!=this._chatLogWindow&&this._chatLogWindow.changeChatLog(this._messages),s.length>1){var u=s[1],c=l.default.fastMessags.find(function(t){return t.id==u}),h=this;if(this.scheduleOnce(function(){h.is_feture_event=!0},3),0==this.is_feture_event)return;c&&l.default.game_feature_status&&(this.is_feture_event=!1,f.default.playEffect(c.audioClip,!1))}},e.prototype.renderListItem=function(t,e){var i=this._messages[t];e.getController("gameTheme").selectedIndex=l.default.theme;var n=e.getChild("n0").asLoader,o=null;i.senderId==this._game_item_01._userId?o=fgui.UIPackage.getItemURL("Basic","game_cap_1@3x"):i.senderId==this._game_item_02._userId?o=fgui.UIPackage.getItemURL("Basic","game_cap_2@3x"):i.senderId==this._game_item_03._userId?o=fgui.UIPackage.getItemURL("Basic","game_cap_3@3x"):i.senderId==this._game_item_04._userId&&(o=fgui.UIPackage.getItemURL("Basic","game_cap_4@3x")),n.url=o,i.icon=o,e.getChild("n1").asLabel.text=i.msg},e.prototype.sifterJudgeMessage=function(){var t=this;this._current_player=this._gameArea.handleCurrentRole();var e=l.default.gameDiceVo.sender==l.default.gameUserid,i=l.default.gameDiceVo.diceNumber;isNaN(i)||(this.checkRoleLocation(i),this.dicAnimation(e,function(){return t.startMove(i,t._current_player,e)}))},e.prototype.checkRoleLocation=function(t){var e=this._current_player._game_location+t;G.default.log("\u3010\u672c\u5730\u9884\u671f\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u3011\uff1a",e),e>28&&(e-=28,G.default.log("\u3010\u672c\u5730\u9884\u671f\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u3011\u4fee\u6b63\uff1a",e));var i=l.default.roomInfo.userInfoList.find(function(t){return t.userId===l.default.gameDiceVo.sender}),n=i.stepNumber;G.default.log("\u3010\u670d\u52a1\u7aef\u9884\u671f\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u3011\uff1a",n),e!=n&&(G.default.log("\u3010\u4f4d\u7f6e\u4e0d\u5339\u914d\uff0c\u51c6\u5907\u8fdb\u884c\u4f4d\u7f6e\u4fee\u6b63\u3011"),n-t<=0?(n=n+28-t,G.default.log("\u3010\u672c\u5730\u9884\u671f\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u3011\u4fee\u6b63\uff1a",n),i.stepNumber=n):(n-=t,G.default.log("\u3010\u672c\u5730\u9884\u671f\u79fb\u52a8\u5230\u7684\u4f4d\u7f6e\u3011\u4fee\u6b63\uff1a",n),i.stepNumber=n),this._gameArea.changePlayerLocation())},e.prototype.dicAnimation=function(t,e){var i=this;this._game_play_button.visible=!this.isTrusteeship&&!t,this._tapStartAnimation.visible=!this.isTrusteeship,this._tapStartAnimation.alpha=this.isTrusteeship?0:t?1:0,this._game_play_button.touchable=!1,this._game_play_button.grayed=!0,this._tapStartAnimation.setPlaySettings(0,-1,1,-1,function(){i._game_play_button.visible=!i.isTrusteeship,i._tapStartAnimation.visible=!1}),this._tapStartAnimation.playing=!0,this.isTrusteeship&&(this._playMenuController.selectedIndex=2),this._dicePrepareAnimation.visible=!0,this._dicePrepareAnimation.alpha=t?1:0,this._dicePrepareAnimation.setPlaySettings(0,-1,1,-1,function(){i._dicePrepareAnimation.visible=!1,e&&e()}),this._dicePrepareAnimation.playing=!0,t&&this.scheduleOnce(function(){return f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Drop),!1)},.4)},e.prototype.startMove=function(t,e,i){var n=this;G.default.log("\u3010\u89d2\u8272\u79fb\u52a8\u3011 \u9ab0\u5b50\u70b9\u6570\uff1a",t),this.is_dice_run=!0,this._diceResultAnimation.visible=!0,this._diceResultAnimation.alpha=i?1:0,this._diceResultAnimation.setPlaySettings(0,-1,1,t-1,function(){n._gameArea.prepareToMove(t,e,i,function(){n._diceResultAnimation.visible=!1,n.handleSifterResult()})}),this._diceResultAnimation.playing=!0},e.prototype.speculateDicAnimation=function(t,e,i){var n=this;G.default.log("\u3010\u6295\u673a\u4e8b\u4ef6\u3011\u64ad\u653e\u9ab0\u5b50\u6389\u843d\u52a8\u753b\u64ad\u653e\uff1a",t),this._dicePrepareAnimation.visible=!0,this._dicePrepareAnimation.alpha=e?1:0,this._dicePrepareAnimation.setPlaySettings(0,-1,1,-1,function(){G.default.log("\u3010\u6295\u673a\u4e8b\u4ef6\u3011 \u64ad\u653e\u9ab0\u5b50\u6389\u843d\u52a8\u753b\u64ad\u653e\u5b8c\u6bd5"),n._dicePrepareAnimation.visible=!1,n.showResultDiceAnimation(t,e,i&&i())}),this._dicePrepareAnimation.playing=!0},e.prototype.showResultDiceAnimation=function(t,e,i){var n=this;this._diceResultAnimation.visible=!0,this._diceResultAnimation.alpha=e?1:0,this._diceResultAnimation.setPlaySettings(0,-1,1,t-1,function(){i&&i(),n.scheduleOnce(function(){n._diceResultAnimation.visible=!1},2)}),this._diceResultAnimation.playing=!0},e.prototype.gameSetMenuButtonClick=function(){this._showSetController.selectedIndex=1},e.prototype.gameIncidentMenuButtonClick=function(){this.showIndicentMenu(),this.changeSkillMenuStatus(!0),this.changeIndicentMenuStatus(!1)},e.prototype.gameIncidentMenuCloseButtonClick=function(){this.hideIndicentMenu(),this.changeIndicentMenuStatus(!0)},e.prototype.gameSkillMenuButtonClick=function(){this.showSkillMenu(),this.changeSkillMenuStatus(!1),this.changeIndicentMenuStatus(!0)},e.prototype.gameSkillMenuCloseButtonClick=function(){this.hideIndicentMenu(),this.changeSkillMenuStatus(!0)},e.prototype.gameChatMenuButtonClick=function(){this._chat_button.selected?this._chatController.selectedIndex=0:(this._chatWindow.changeChatList(l.default.fastMessags),this._chatController.selectedIndex=1),this._chat_button.selected=!this._chat_button.selected},e.prototype.gameChatLogButtonClick=function(){if(null==this._chatLogWindow){var t=new B.GameChatLogWindow;this._chatLogWindow=t}this._chatLogWindow.changeChatLog(this._messages),this._chatLogWindow.show(),this._chatLogWindow.onSubmitResult=function(){}},e.prototype.onStartMoveClickButton=function(){this._game_play_button.touchable=!1,this._game_play_button.grayed=!0,G.default.log("\u3010\u5173\u95ed\u9ab0\u5b50\u6309\u94ae\u6548\u679c\u3011"),v.GameServerUtil.fetchGameDice(),this.passiveness_num=0,G.default.log("\u3010\u6447\u52a8\u9ab0\u5b50\u3011")},e.prototype.showGameRound=function(t){this.is_dice_run=!1;var e=this;this._game_play_button.touchable=!!t,this._game_play_button.grayed=!t,this._roundAnimation.visible=!0,this._roundAnimation.setPlaySettings(0,-1,1,-1,function(){e._roundAnimation.visible=!1}),this._roundAnimation.playing=!0,f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.MyRound),!1),l.default.game_vibrator_status&&P.NativeServiceUtils.fetchvibrationEffect()},e.prototype.showIndicentMenu=function(){this._showModeController.selectedIndex=1},e.prototype.showSkillMenu=function(){this.refreshSkillData(),this._showModeController.selectedIndex=2},e.prototype.hideIndicentMenu=function(){this._showModeController.selectedIndex=0},e.prototype.changeIndicentMenuStatus=function(t){this._view.getChild("gameIncidentMenu").asButton.enabled=t,this._view.getChild("gameIncidentMenu").asButton.alpha=t?1:0,this._view.getChild("gameIncidentMenuClose").asButton.enabled=!t},e.prototype.changeSkillMenuStatus=function(t){this._view.getChild("gameSkillMenu").asButton.enabled=t,this._view.getChild("gameSkillMenu").asButton.alpha=t?1:0,this._view.getChild("gameSkillMenuClose").asButton.enabled=!t},e.prototype.showSetMenu=function(){var t=this;this._menuSetView.getChild("n1").asButton.onClick(function(){3==l.default.userInfo.status?u.default.show("\u60a8\u5df2\u7834\u4ea7\uff0c\u65e0\u6cd5\u8fdb\u884c\u8be5\u64cd\u4f5c\uff01"):(t._showSetController.selectedIndex=0,G.default.log("\u6258\u7ba1"),t.prepareTrusteeship())},this),this._menuSetView.getChild("n2").asButton.onClick(function(){t._showSetController.selectedIndex=0,(new a.GameRuleWindow).show()},this),this._menuSetView.getChild("n3").asButton.onClick(function(){t._showSetController.selectedIndex=0;var e=new a.GameThemeWindow;e.show(),e.onSubmitResult=function(i){e.hide(),l.default.theme=i,t.changeTheme()}},this),this._menuSetView.getChild("n4").asButton.onClick(function(){t._showSetController.selectedIndex=0;var e=new a.GameSoundWindow;e.show(),e.onSubmitResult=function(t,e){1==t?(e?f.default.playMusic(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Playing)):f.default.stopMusic(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Playing)),l.default.game_music_status=e):2==t?(e?f.default.setVolume(100):f.default.setVolume(0),l.default.game_effect_status=e):3==t?l.default.game_vibrator_status=e:4==t&&(l.default.game_feature_status=e)}},this),this._menuSetView.getChild("n11").onClick(function(){t._showSetController.selectedIndex=0},this)},e.prototype.showChatMenu=function(){var t=this;this._chatWindow.onSubmit=function(e){t.sendToClient(e.content,e.id),t._chatController.selectedIndex=0,t._chat_button.selected=!1}},e.prototype.showBankMenuClick=function(){l.default.expectLoan=0,this.showBankMenu()},e.prototype.showBankMenu=function(){null==this._bankWindow?this._bankWindow=new c.GameBankWindow(l.default.userInfo):this._bankWindow.setUserInfo(l.default.userInfo),this._bankWindow.show(),this._bankWindow.onSubmitResult=function(t,e,i){switch(e){case 1:v.GameServerUtil.fetchGameBankLoan(1,i,0,0,0,[],[]),l.default.expectLoan=0;break;case 2:v.GameServerUtil.fetchGameBankLoan(2,i,0,0,0,[],[]);break;case 3:v.GameServerUtil.fetchGameBankLoan(2,null,i.isLoanMyHouse,i.isLoanCar,i.isLoanCreditCard,i.houseIdList,i.companyIdList)}},i.windowList.push(this._bankWindow)},e.prototype.showStatementMenu=function(){(new h.GameStatementWindow).show()},e.prototype.prepareExitMenu=function(){this.chooseExitScreen(g.default,!0)},e.prototype.prepareCancelTrusteeship=function(){this.passiveness_num=0,this.isTrusteeship=!1,0==l.default.userInfo.status?(this._playMenuController.selectedIndex=0,this._game_play_button.visible=!0):3==l.default.userInfo.status&&(this._playMenuController.selectedIndex=1)},e.prototype.prepareTrusteeship=function(){this.isTrusteeship=!0,0==l.default.userInfo.status&&(this._playMenuController.selectedIndex=2)},e.prototype.chooseExitScreen=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!0),e)try{this.removeAllWindows(),fgui.GRoot.inst.closeAllWindows(),this.stopTimer(),f.default.stopAllMusic(),f.default.stopAllEffect(),f.default.StopAllEngine()}catch(n){G.default.log("\u9000\u51fa\u623f\u95f4\u62a5\u9519\uff1a",n)}this.addComponent(t),e&&(this.destroy(),this._view.dispose()),i&&this.leaveRoom()},e.prototype.onDestroy=function(){},e.prototype.onDisable=function(){l.default.room&&(l.default.room.removeAllListeners(),l.default.room=null)},e.prototype.roomListener=function(){var t=this;cc.game.on(cc.game.EVENT_SHOW,function(){G.default.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0"),t.handleCheckRoomInfo()},this),cc.game.on(cc.game.EVENT_HIDE,function(){G.default.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0")},this)},e.prototype.onConnect=function(t){t.playerId===l.default.playerId&&u.default.show("\u623f\u95f4\u7f51\u7edc\u5df2\u8fde\u63a5",5),G.default.log("\u3010\u623f\u95f4\u7f51\u7edc\u72b6\u6001\u3011\uff1a \u623f\u95f4\u7f51\u7edc\u5df2\u8fde\u63a5")},e.prototype.onDisconnect=function(t){G.default.log("\u73a9\u5bb6\u6389\u7ebf"),t.playerId===l.default.playerId&&(u.default.show("\u623f\u95f4\u7f51\u7edc\u5df2\u65ad\u5f00",5),this.reConnect()),G.default.log("\u3010\u623f\u95f4\u7f51\u7edc\u72b6\u6001\u3011\uff1a\u623f\u95f4\u7f51\u7edc\u672a\u8fde\u63a5")},e.prototype.reConnect=function(){var t=this,e=this;e.reConnectCount=e.reConnectCount+1,l.default.room.reconnect().then(function(){e.reConnectCount=0,G.default.log("\u73a9\u5bb6\u91cd\u8fde\u6210\u529f")}).catch(function(i){if(G.default.log("\u73a9\u5bb6\u91cd\u8fde\u5931\u8d25:",i),90002!=i.code)return 91001==i.code?(u.default.show("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),void setTimeout(function(){e.reConnect()},3e3)):e.reConnectCount>=3?(G.default.log("\u73a9\u5bb6\u91cd\u8fde\u5931\u8d25\uff0c\u79bb\u5f00\u6e38\u620f\u9875\u9762"),void x.GameHudView.show("\u63d0\u793a","\u7f51\u7edc\u91cd\u8fde\u5931\u8d25,\u51c6\u5907\u79bb\u5f00",1,function(){return t.chooseExitScreen(g.default)})):(G.default.log("\u73a9\u5bb6\u91cd\u8fde\u5931\u8d25\uff0c\u5f00\u542f\u91cd\u8fde:",e.reConnectCount),void e.reConnect());e.chooseExitScreen(g.default)})},e.prototype.updateRoom=function(){var t=this;l.default.room.update().then(function(e){if(G.default.log("\u73a9\u5bb6\u5f53\u524d\u5728\u623f\u95f4"),e&&1==JSON.parse(e.customRoomProperties).status)return fgui.GRoot.inst.closeAllWindows(),void x.GameHudView.show("\u63d0\u793a","\u6e38\u620f\u5df2\u7ed3\u675f,\u51c6\u5907\u79bb\u5f00",1,function(){return t.chooseExitScreen(g.default)});v.GameServerUtil.fetchGameRoomInfo()}).catch(function(e){G.default.log("\u623f\u95f4\u4fe1\u606f\u66f4\u65b0\u5931\u8d25\uff1a",e),G.default.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"),fgui.GRoot.inst.closeAllWindows(),x.GameHudView.show("\u63d0\u793a","\u623f\u95f4\u4fe1\u606f\u83b7\u53d6\u5f02\u5e38,\u51c6\u5907\u79bb\u5f00",1,function(){return t.chooseExitScreen(g.default)})})},e.prototype.handleCheckRoomInfo=function(){var t=this;G.default.log("\u3010\u5c1d\u8bd5\u83b7\u53d6\u623f\u95f4\u8be6\u60c5\u3011"),null!=l.default.room&&null!=l.default.room?this.reConnect():x.GameHudView.show("\u63d0\u793a","\u6e38\u620f\u5df2\u7ed3\u675f,\u51c6\u5907\u79bb\u5f00",1,function(){return t.chooseExitScreen(g.default)})},e.prototype.onRoomUpdate=function(t){if(l.default.room&&t&&t.players&&t.players.find(function(t){return t.playerId===l.default.playerId}));else if(l.default.roomInfo&&0==l.default.roomInfo.status)this.handleCheckRoomInfo();else{u.default.show("\u6e38\u620f\u5df2\u7ed3\u675f\uff0c\u5373\u5c06\u79bb\u5f00\u623f\u95f4\uff5e");var e=this;this.scheduleOnce(function(){return e.chooseExitScreen(g.default,!0)},3)}},e.prototype.onUpdateCustomStatus=function(t){var e=l.default.room.players.find(function(e){return e.playerId===t.playerId}),i=b.GameUtils.fetchCustomProfile(e.customPlayerProperties).nickname;G.default.log("\u73a9\u5bb6\u72b6\u6001\u66f4\u65b0:",i)},e.prototype.onRoomPropertiesChangeFailed=function(t){G.default.log("error:",t)},e.prototype.onRoomPropertiesChange=function(t){G.default.log("roomInfo:",t)},e.prototype.sendToClient=function(t,e){G.default.log("\u6b63\u5728\u53d1\u9001\u623f\u95f4\u6d88\u606f");var i={recvPlayerIdList:[],type:0,msg:t+"&"+e};l.default.room.sendToClient(i),l.default.room.onSendToClientFailed(function(t){G.default.log("\u53d1\u9001\u623f\u95f4\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a",t.code),u.default.show("\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")})},e.prototype.leaveRoom=function(){G.default.log("\u6b63\u5728\u9000\u51fa\u623f\u95f4"),l.default.client.leaveRoom().then(function(){G.default.log("\u79bb\u5f00\u623f\u95f4\u6210\u529f:")}).catch(function(t){G.default.log("\u79bb\u5f00\u623f\u95f4\u5931\u8d25:",t)})},e.prototype.onJoinRoom=function(t){var e=t.playerId,i=l.default.room.players.find(function(t){return t.playerId===e});if(i){var n=b.GameUtils.fetchCustomProfile(i.customPlayerProperties).nickname;G.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6"+n+"\u8fdb\u623f\u95f4")}else G.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6"+e+"\u8fdb\u623f\u95f4");t.playerId===l.default.gameUserid&&(G.default.log("\u66f4\u65b0\u623f\u95f4\u4fe1\u606f"),this.updateRoom())},e.prototype.onLeaveRoom=function(t){G.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6\u9000\u51fa\u623f\u95f4");var e=t.playerId,i=l.default.room.players.find(function(t){return t.playerId===e});if(i){var n=b.GameUtils.fetchCustomProfile(i.customPlayerProperties).nickname;G.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6"+n+"\u9000\u51fa\u623f\u95f4"),u.default.show("\u73a9\u5bb6"+n+"\u9000\u51fa\u623f\u95f4")}else G.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6"+e+"\u9000\u51fa\u623f\u95f4")},e.prototype.onDismissRoom=function(){return G.default.log("\u5e7f\u64ad\uff1a\u623f\u95f4\u89e3\u6563"),this.chooseExitScreen(g.default,!0)},e.prototype.onRecvFromClient=function(t){G.default.log("\u6536\u5230\u623f\u95f4\u53d1\u9001\u7684\u6d88\u606f:",t.msg),this.addMsg(t.msg,t.sendPlayerId)},e.prototype.onRecvFromServer=function(t){G.default.log("[\u670d\u52a1\u5668\u54cd\u5e94\u7ed3\u679c]\u539f\u59cb\u6570\u636e:",t.msg);try{var e=b.GameUtils.decompressAndParseJson(t.msg);G.default.log("[\u670d\u52a1\u5668\u54cd\u5e94\u7ed3\u679c]\u89e3\u6790\u540e\u6570\u636e:",JSON.parse(e));var i=JSON.parse(e);this.onReceiveMsgFromServer(i)}catch(n){G.default.log("\u64cd\u4f5c\u5f02\u5e38\uff1a",n)}finally{G.default.log("\u6267\u884cfinally")}},e.prototype.modifyNetworkGameChange=function(){var t=this,e=l.default.room.players;l.default.roomInfo.userInfoList.forEach(function(i,n){var o=e.find(function(t){return t.playerId==i.userId});null!=o&&null!=o?3===o.status?0==i.status?t.setGameCurrentUserStatus(n,4):1==i.status?t.setGameCurrentUserStatus(n,3):3==i.status?t.setGameCurrentUserStatus(n,2):t.setGameCurrentUserStatus(n,4):1==i.status?t.setGameCurrentUserStatus(n,3):3==i.status&&t.setGameCurrentUserStatus(n,2):0==i.status?t.setGameCurrentUserStatus(n,4):1==i.status?t.setGameCurrentUserStatus(n,3):3==i.status?t.setGameCurrentUserStatus(n,2):t.setGameCurrentUserStatus(n,4)})},e.prototype.handleSifterResult=function(){var t=this,e=this;I.GameIncidentService.handleSifterResult(function(t,i,n){e.loadRolesData(),t?e.isTrusteeship&&e.handleTrusteeship(i,n):e.scheduleOnce(function(){e.is_dice_run?(0==l.default.userInfo.status&&fgui.GRoot.inst.closeAllWindows(),e.handleGameStatusResult(l.default.gameVoData)):G.default.log("is_dice_run\u672a\u6267\u884c")},3)},function(){e.showBankMenu()},function(t){e.is_incident_event=!0,e.handleGameStatusResult(l.default.gameVoData,t?.2:2.5)},function(e,i,n){var o,s,a;if(G.default.log("\u3010\u6708\u5e95\u7ed3\u7b97\u3011\uff1a",i?"\u7ed3\u7b97":"\u4e0d\u7ed3\u7b97"),0!=i)if(G.default.log("\u3010\u4e8b\u4ef6\u7c7b\u578b\u3011\uff1a",n),0!=e){if(null!=l.default.lastUserInfo&&null!=l.default.lastUserInfo){var r=null!==(o=l.default.userInfo.cashFlow)&&void 0!==o?o:0;if(2==n||3==n||4==n||5==n||8==n){r=null!==(s=l.default.lastUserInfo.cashFlow)&&void 0!==s?s:0,G.default.log("\u3010\u7279\u6b8a\u5904\u7406\u4e8b\u4ef6\u3011\u4e0a\u4e00\u56de\u5408\u73b0\u91d1\u6d41\uff1a",r);var u=null!==(a=l.default.lastUserInfo.assetCash)&&void 0!==a?a:0;G.default.log("\u3010\u7279\u6b8a\u5904\u7406\u4e8b\u4ef6\u3011\u4e0a\u4e00\u56de\u5408\u73b0\u91d1\uff1a",u);var c=r+u;h=R.default.thousandBitSeparator(c),G.default.log("\u3010\u7279\u6b8a\u5904\u7406\u4e8b\u4ef6\u3011\u672c\u56de\u5408\u7684\u73b0\u91d1\uff1a",h),G.default.log("\u3010\u7279\u6b8a\u5904\u7406\u4e8b\u4ef6\u3011\u670d\u52a1\u7aef\u8fd4\u56de\u9700\u8981\u66f4\u65b0\u7684\u73b0\u91d1\uff1a",l.default.userInfo.assetCash),t.refreshDynamicCash(c),t._game_month_cash.text=h,l.default.lastUserInfo.assetCash=l.default.userInfo.assetCash}else{if(h=R.default.thousandBitSeparator(l.default.userInfo.assetCash),t.refreshDynamicCash(l.default.userInfo.assetCash),null==h||null==h)return;t._game_month_cash.text=h,G.default.log("\u3010\u7279\u6b8a\u5904\u7406\u4e8b\u4ef6\u3011\u672c\u56de\u5408\u73b0\u91d1\u4e0d\u9700\u8981\u63d0\u524d\u66f4\u65b0")}}}else{var h;if(t.refreshDynamicCash(l.default.userInfo.assetCash),null==(h=R.default.thousandBitSeparator(l.default.userInfo.assetCash))||null==h)return;t._game_month_cash.text=h}})},e.prototype.prepareTransferRole=function(t,e,i){this.startCountTime(t),this.setGameCurrentUser(e,i)},e.prototype.setGameCurrentUser=function(t,e){0==t?(this._game_item_01.setCurrentPlayerStatus(1,e),this._game_item_02.setCurrentPlayerStatus(0,e),this._game_item_03.setCurrentPlayerStatus(0,e),this._game_item_04.setCurrentPlayerStatus(0,e)):1==t?(this._game_item_01.setCurrentPlayerStatus(0,e),this._game_item_02.setCurrentPlayerStatus(1,e),this._game_item_03.setCurrentPlayerStatus(0,e),this._game_item_04.setCurrentPlayerStatus(0,e)):2==t?(this._game_item_01.setCurrentPlayerStatus(0,e),this._game_item_02.setCurrentPlayerStatus(0,e),this._game_item_03.setCurrentPlayerStatus(1,e),this._game_item_04.setCurrentPlayerStatus(0,e)):3==t&&(this._game_item_01.setCurrentPlayerStatus(0,e),this._game_item_02.setCurrentPlayerStatus(0,e),this._game_item_03.setCurrentPlayerStatus(0,e),this._game_item_04.setCurrentPlayerStatus(1,e)),this.modifyNetworkGameChange(),this.changeRoleScenes()},e.prototype.setGameCurrentUserStatus=function(t,e){0==t?this._game_item_01.setCurrentPlayerStatus(e,!1):1==t?this._game_item_02.setCurrentPlayerStatus(e,!1):2==t?this._game_item_03.setCurrentPlayerStatus(e,!1):3==t&&this._game_item_04.setCurrentPlayerStatus(e,!1)},e.prototype.changeRoleScenes=function(){var t=l.default.roomInfo.userInfoList.length;0==t?(this._game_item_01.setCurrentPlayerStatus(6,!1),this._game_item_02.setCurrentPlayerStatus(6,!1),this._game_item_03.setCurrentPlayerStatus(6,!1),this._game_item_04.setCurrentPlayerStatus(6,!1)):1==t?(this._game_item_02.setCurrentPlayerStatus(6,!1),this._game_item_03.setCurrentPlayerStatus(6,!1),this._game_item_04.setCurrentPlayerStatus(6,!1)):2==t?(this._game_item_03.setCurrentPlayerStatus(6,!1),this._game_item_04.setCurrentPlayerStatus(6,!1)):3==t&&this._game_item_04.setCurrentPlayerStatus(6,!1)},e.prototype.startCountTime=function(t){var e=this,i=this,n=t;i._game_round.text=n+"\u5c81",l.default.count_down>0?(i.lastTime=l.default.count_down,l.default.count_down=0):i.lastTime=l.default.confExpireTime,clearInterval(i.tiems),i.tiems=setInterval(function(){i.lastTime>0?(e.countTime(),10==i.lastTime&&f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Remaining_Time),!1),5==i.lastTime&&(i._game_play_button.touchable=!1,i._game_play_button.grayed=!0,i.checkRoomGameData())):(G.default.log("\u64cd\u4f5c\u65f6\u95f4\u7ed3\u675f"),clearInterval(i.tiems))},1e3)},e.prototype.countTime=function(){this.lastTime--,this._game_time.text=this.lastTime+"s"},e.prototype.stopTimer=function(){clearInterval(this.tiems)},e.prototype.onReceiveMsgFromServer=function(t){var e,i,n,o,s=this,a=l.default.roomInfo;if(l.default.lastUserInfo=L.default.deepCopy(l.default.userInfo),t.roomInfo)if(a=b.GameUtils.synchronousRoomInfo(t.roomInfo,a),l.default.roomInfo=a,t.roomInfo=a,l.default.gameVoData=t,t.cmd!=m.ResponseCmdEnum.roomInfo){if(t.cmd==m.ResponseCmdEnum.dice){var r=t;return l.default.gameDiceVo=r,s.refreshUserInfo(t.roomInfo),void s.sifterJudgeMessage()}if(t.cmd==m.ResponseCmdEnum.selectChancel){var c=t;return s.refreshUserInfo(c.roomInfo),void s.handleChanceResult(c)}if(t.cmd==m.ResponseCmdEnum.stockDeal)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.futuresDeal)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.houseBuy)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.companyBuy)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.equityBuy)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.articleBuy)s.refreshUserInfo(t.roomInfo);else{if(t.cmd==m.ResponseCmdEnum.speculateBuy){var h=t;return s.refreshUserInfo(t.roomInfo),C=h.sender===l.default.gameUserid,void s.speculateDicAnimation(h.diceNumber,C,function(){h.diceNumber>3?f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.GoodNew),!1):f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.BadNew),!1),s.handleGameStatusResult(t)})}if(t.cmd==m.ResponseCmdEnum.houseSell)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.companySell)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.equitySell)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.articleSell)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.skillBuy)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.lifeIncidentBuy)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.bankLoan)s.refreshUserInfo(t.roomInfo),null!=s._bankWindow&&s._bankWindow.setUserInfo(l.default.userInfo),t.sender===l.default.userInfo.userId&&u.default.show("\u64cd\u4f5c\u6210\u529f\uff01");else if(t.cmd==m.ResponseCmdEnum.abandon)s.refreshUserInfo(t.roomInfo);else if(t.cmd==m.ResponseCmdEnum.auction){var d=t;if(s.refreshUserInfo(t.roomInfo),d.isAllAbandon&&1===d.isAllAbandon)return u.default.show("\u6240\u6709\u73a9\u5bb6\u653e\u5f03\u7ade\u62cd\u8be5\u673a\u4f1a",5),void(d.roomInfo.currentUserId===l.default.gameUserid&&v.GameServerUtil.fetchGameSoleAbandon());if(d.sender===l.default.gameUserid)return void G.default.log("\u62cd\u5356\u4eba\u65e0\u6cd5\u51fa\u4ef7");G.default.log("\u5176\u4ed6\u4eba\u51c6\u5907\u51fa\u4ef7"),s.auctionBid(d)}else if(t.cmd==m.ResponseCmdEnum.auctionBid){var p=t;s.refreshUserInfo(t.roomInfo),p.auctionBidUserId&&((g=l.default.roomInfo.userInfoList.find(function(t){return t.userId===p.auctionBidUserId}))?u.default.show('\u73a9\u5bb6"'+g.nickname+'"\u7ade\u62cd\u5230\u8be5\u673a\u4f1a,\u51fa\u4ef7'+R.default.thousandBitSeparator(null!==(e=p.price)&&void 0!==e?e:0),5):u.default.show('\u73a9\u5bb6"'+p.auctionBidUserId+'"\u7ade\u62cd\u5230\u8be5\u673a\u4f1a,\u51fa\u4ef7'+R.default.thousandBitSeparator(null!==(i=p.price)&&void 0!==i?i:0),5),p.auctionBidUserId===l.default.gameUserid&&s.auctionBuy(p),l.default.gameUserid===l.default.roomInfo.currentUserId&&f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.RoundSettle),!1))}else if(t.cmd==m.ResponseCmdEnum.auctionAbandon){var g,y=t;y.isAllAbandon&&1===y.isAllAbandon&&(u.default.show("\u6240\u6709\u73a9\u5bb6\u653e\u5f03\u7ade\u62cd\u8be5\u673a\u4f1a",5),y.roomInfo.currentUserId===l.default.gameUserid&&v.GameServerUtil.fetchGameSoleAbandon()),y.auctionBidUserId&&((g=l.default.roomInfo.userInfoList.find(function(t){return t.userId===y.auctionBidUserId}))?u.default.show('\u73a9\u5bb6"'+g.nickname+'"\u7ade\u62cd\u5230\u8be5\u673a\u4f1a,\u51fa\u4ef7'+R.default.thousandBitSeparator(null!==(n=y.price)&&void 0!==n?n:0),5):u.default.show('\u73a9\u5bb6"'+y.auctionBidUserId+'"\u7ade\u62cd\u5230\u8be5\u673a\u4f1a,\u51fa\u4ef7'+R.default.thousandBitSeparator(null!==(o=y.price)&&void 0!==o?o:0),5),y.auctionBidUserId===l.default.gameUserid&&s.auctionBuy(y),l.default.gameUserid===l.default.roomInfo.currentUserId&&f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.RoundSettle),!1))}}s.handleGameStatusResult(t)}else{if(G.default.log("roomInfo:",t),l.default.roomInfo=t.roomInfo,this.refreshUserInfo(l.default.roomInfo),1==t.roomInfo.boutCount)l.default.gameVoData.nextUserId=t.roomInfo.currentUserId;else if(0===l.default.roomInfo.status&&0===l.default.userInfo.status){var C=l.default.roomInfo.currentUserId===l.default.gameUserid;G.default.log("\u662f\u5426\u662f\u6211\u7684\u56de\u5408\uff1a",C),G.default.log("responseData.roomInfo.isDice\uff1a",t.roomInfo.isDice),C&&0===t.roomInfo.isDice?(l.default.gameVoData.nextUserId=t.roomInfo.currentUserId,G.default.log("\u5141\u8bb8\u6211\u6447\u9ab0\u5b50")):G.default.log(C?"\u6211\u5df2\u6447\u8fc7\u4e86\uff0c\u4e0d\u5141\u8bb8\u6211\u6447\u9ab0\u5b50":"\u4e0d\u662f\u6211\u7684\u56de\u5408\uff0c\u7565\u8fc7\u4e86")}if(t.roomInfo.eventEndTime){var w=t.roomInfo.eventEndTime-b.GameUtils.getCurrentTime();l.default.count_down=w<=0?0:Math.floor(w)}this.initRoomInfo(),0===l.default.roomInfo.status&&0===l.default.userInfo.status&&0==(C=l.default.roomInfo.currentUserId===l.default.gameUserid)&&this.removeAllWindows()}},e.prototype.refreshUserInfo=function(t){null!=t&&null!=t&&(l.default.roomInfo=t,l.default.userInfo=t.userInfoList.find(function(t){return t.userId===l.default.gameUserid}),this.preparePlayerInfo())},e.prototype.handleGameStatusResult=function(t,e){void 0===e&&(e=.2);var i=this;this.refreshDynamicData(),this.loadLibertyRate(),i.scheduleOnce(function(){i._handleGameStatusResult(t)},e)},e.prototype._handleGameStatusResult=function(t){var e=this;if(t.libertyList&&t.libertyList.length>0){G.default.log("\u3010\u8d22\u5bcc\u81ea\u7531\u73a9\u5bb6\u3011\uff1a",t.libertyList);for(var i=function(t){var e=l.default.roomInfo.userInfoList.findIndex(function(e){return e.userId===t});n.setGameCurrentUserStatus(e,3)},n=this,o=0,s=t.libertyList;o<s.length;o++)i(s[o])}try{if(fgui.GRoot.inst.getTopWindow()&&fgui.GRoot.inst.getTopWindow().contentPane.parent instanceof p.GameResultWindow)return void G.default.log("\u5df2\u5b58\u5728\u73a9\u5bb6\u7ed3\u7b97\u5f39\u7a97\uff0c\u4e0d\u663e\u793a",fgui.GRoot.inst.getTopWindow().contentPane)}catch(d){G.default.log("\u5df2\u5b58\u5728\u73a9\u5bb6\u7ed3\u7b97\u5f39\u7a97:\u62a5\u9519\u4e86",d)}if(1==t.currentUserBroke){var a=l.default.roomInfo.userInfoList.findIndex(function(e){return e.userId===t.sender});if(this.setGameCurrentUserStatus(a,2),t.sender===l.default.gameUserid){if(this.removeAllWindows(),t.cmd==m.ResponseCmdEnum.lifeIncidentBuy)v.GameServerUtil.fetchGameSoleAbandon();else if(t.cmd==m.ResponseCmdEnum.futuresDeal)v.GameServerUtil.fetchGameSoleAbandon();else if(t.cmd==m.ResponseCmdEnum.dice){var r=l.default.gameDiceVo.mapType;2!=r&&3!=r&&8!=r||v.GameServerUtil.fetchGameSoleAbandon()}f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Broke),!1);var u=new p.GameResultWindow(l.default.userInfo,l.default.roomInfo,3,null);u.show(),u.onSubmitResult=function(t){0==t?(u.hide(),e.chooseExitScreen(g.default,!0)):1==t?(u.hide(),G.default.log("\u3010\u7ee7\u7eed\u89c2\u6218\u3011"),e._playMenuController.selectedIndex=1,e.isTrusteeship=!1,e.passiveness_num=0):2==t&&(l.default.retrospectUserInfo=l.default.userInfo,e.chooseExitScreen(C.default,!1))}}}if(t.roomInfo&&t.roomInfo.status>0){this.removeAllWindows();var c=2;if(1==t.roomInfo.status&&(b.GameUtils.checkLiberty(t.libertyList,l.default.gameUserid)&&(c=1),b.GameUtils.checkBankrupt(t.roomInfo,l.default.userInfo)&&(c=3)),3==t.roomInfo.status&&b.GameUtils.checkBankrupt(t.roomInfo,l.default.userInfo)&&(c=3),null==t.rankingList||null==t.rankingList)return;if(this.game_end)return;this.game_end=!0,G.default.log("gameVo.rankingList:",t.rankingList),1==c?f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Win),!1):2==c?f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.End),!1):3==c&&f.default.playEffect(_.GameSoundUtil.incidentSounds(_.GameSoundMode.Broke),!1);var h=new p.GameResultWindow(l.default.userInfo,l.default.roomInfo,c-1,t.rankingList);return h.show(),h.onSubmitResult=function(t,i){0==t?(h.hide(),e.chooseExitScreen(g.default,!0)):1==t?(h.hide(),e.chooseExitScreen(y.default,!0),G.default.log("\u3010\u623f\u95f4\u7c7b\u578b\u3011:",l.default.game_mode.gradeType)):2==t||3==t&&(l.default.retrospectUserInfo=i,e.chooseExitScreen(C.default,!1))},void this.stopTimer()}t.nextUserId&&(l.default.gameVoData=t,this.removeAllWindows(),this.prepareToNewRound(),t.nextUserId=null)},e.prototype.removeAllWindows=function(){i.windowList.forEach(function(t){null!=t&&t.hide()}),I.GameIncidentService.windowList.forEach(function(t){null!=t&&t.hide()}),i.windowList=[],I.GameIncidentService.windowList=[]},e.prototype.auctionBid=function(t){var e=this;I.GameIncidentService.auctionBid(t,function(t,i){e.handleTrusteeship(t,i)},function(){e.showBankMenu()})},e.prototype.auctionBuy=function(t){var e=this;I.GameIncidentService.auctionBuy(t,function(){e.showBankMenu()})},e.prototype.handleChanceResult=function(t){var e=this;I.GameIncidentService.handleChanceResult(t,function(t,i,n){t?e.handleTrusteeship(i,n):e.scheduleOnce(function(){n&&n.hide()},3)},function(){e.showBankMenu()})},e.prototype.checkActivate=function(){null!=l.default.userInfo&&null!=l.default.userInfo&&(1!=l.default.userInfo.status&&3!=l.default.userInfo.status?this.passiveness_num>=2&&this.prepareTrusteeship():this.passiveness_num=0)},e.prototype.handleTrusteeship=function(t,e){if(this.isTrusteeship){if(3==l.default.userInfo.status||2==l.default.userInfo.status||1==l.default.userInfo.status)return this.prepareCancelTrusteeship(),e&&e.hide(),void this.handleGameStatusResult(l.default.gameVoData);var i=l.default.roomInfo.currentUserId===l.default.gameUserid;this.scheduleOnce(function(){return S.GameTrusteeship.automateProcess(i,t,e)},2)}},e.prototype.checkRoomGameData=function(){if(G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u51c6\u5907"),1!=this.is_incident_event)if(null!=l.default.gameDiceVo&&null!=l.default.gameDiceVo)if(l.default.gameDiceVo.cmd==m.ResponseCmdEnum.dice)if(l.default.gameDiceVo.sender==l.default.gameUserid){var t=l.default.gameDiceVo.mapType;2==t||3==t||4==t||5==t||8==t?(G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u5f00\u59cb\u7ed3\u7b97:",t),this.handleGameStatusResult(l.default.gameVoData)):G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u975e\u7279\u5b9a\u4e8b\u4ef6,\u6821\u9a8c\u7ec8\u6b62")}else G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u4e0d\u662f\u81ea\u5df1\u7684\u56de\u5408,\u6821\u9a8c\u7ec8\u6b62");else G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u4e0d\u662f\u6447\u9ab0\u5b50\u6307\u4ee4,\u6821\u9a8c\u7ec8\u6b62");else G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u4e0d\u662f\u6447\u9ab0\u5b50\u6307\u4ee4,\u6821\u9a8c\u7ec8\u6b62");else G.default.log("\u3010\u4e8b\u4ef6\u7ed3\u7b97\u3011\u7528\u6237\u5df2\u64cd\u4f5c,\u6821\u9a8c\u7ec8\u6b62")},e.windowList=[],i=s([U],e)}(cc.Component);i.default=E,cc._RF.pop()},{"../../Common/GameResourceUtil":"GameResourceUtil","../../Common/GameServerUtil":"GameServerUtil","../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Common/NativeServiceUtils":"NativeServiceUtils","../../Constant/ResponseCmdEnum":"ResponseCmdEnum","../../Constant/TrusteeshipEnum":"TrusteeshipEnum","../../Utils/AudioPlayer":"AudioPlayer","../../Utils/MathUtil":"MathUtil","../../Utils/ObjectUtil":"ObjectUtil","../Common/GameActivityArea":"GameActivityArea","../Common/GameHudView":"GameHudView","../Common/GameIncident":"GameIncident","../Common/GameRoleItem":"GameRoleItem","../Common/GameTrusteeship":"GameTrusteeship","../Common/Toast":"Toast","../Windows/GameBank":"GameBank","../Windows/GameChatWindow":"GameChatWindow","../Windows/GameOtherUserWindow":"GameOtherUserWindow","../Windows/GameResultWindow":"GameResultWindow","../Windows/GameStatement":"GameStatement","../Windows/GameWindow":"GameWindow","./Main":"Main","./Retrospect":"Retrospect","./RoleStore":"RoleStore"}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"639d1i0xYxLp4a9S/6Ne8T6","Global"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameMode=i.GameChooseMode=i.MYGradeType=i.MYRoomType=void 0;var n,o,s=t("../Config/Config"),a=t("../Model/room/RoomInfo"),r=t("../Model/room/UserInfo");(function(t){t[t.Multiple=1]="Multiple",t[t.Friend=2]="Friend"})(n=i.MYRoomType||(i.MYRoomType={})),function(t){t[t.Primary=1]="Primary",t[t.Medium=2]="Medium",t[t.High=3]="High"}(o=i.MYGradeType||(i.MYGradeType={})),function(t){t[t.pk=1]="pk",t[t.primary=2]="primary",t[t.medium=3]="medium",t[t.hight=4]="hight"}(i.GameChooseMode||(i.GameChooseMode={}));var l=function(){function t(t,e){this._gradeType=o.Primary,this._roomType=n.Multiple,this._roomType=t,this._gradeType=e}return Object.defineProperty(t.prototype,"gradeType",{get:function(){return this._gradeType},set:function(t){this._gradeType=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roomType",{get:function(){return this._roomType},set:function(t){this._roomType=t},enumerable:!1,configurable:!0}),t}();i.GameMode=l;var u=function(){this.first=0,this.second=1,this.third=2};i.default=new function(){this.gameId=s.default.openId,this.userInfo=null,this.lastUserInfo=new r.UserInfo,this.roleInfo=null,this.game_mode=new l(n.Multiple,o.Primary),this.gameDiceVo=null,this.gameVoData=null,this.roomInfo=new a.RoomInfo,this.bankRate=10,this.app_user_id=0,this.gameUserid="",this.count_down=0,this.expectLoan=0,this.round_total_count=58,this.userLevel=0,this.award=new u,this.theme=0,this.loginMode=0,this.retrospectUserInfo=null,this.network_status=1,this.game_music_status=!0,this.game_effect_status=!0,this.game_vibrator_status=!1,this.game_feature_status=!0,this.game_networkState=!0,this.confExpireTime=60,this.confAuctionExpireTime=15,this.confInitAge=22,this.confMaxAge=50,this.confSelectRoleTime=30,this.grade1Award=0,this.grade2Award=1,this.grade3Award=2,this.confMaxPlayer=2,this.fastMessags=[],this.confMaxInputNumber=1e8,this.room=null,this.state=null,this.keyOperate=1,this.player=null,this.playerId=null,this.client=null,this.matchRule="0",this.roomInfos=null,this.roomId=null,this.isTeamMode=!1,this.isOnlineMatch=!1,this.playerName="",this.bulletId=0,this.unhandleFrames=[]},cc._RF.pop()},{"../Config/Config":"Config","../Model/room/RoomInfo":"RoomInfo","../Model/room/UserInfo":"UserInfo"}],GoodNews:[function(t,e,i){"use strict";cc._RF.push(e,"a0cd4rbAIdEQZnJveR7DOoN","GoodNews"),Object.defineProperty(i,"__esModule",{value:!0}),i.GoodNews=void 0;i.GoodNews=function(){},cc._RF.pop()},{}],HotUpdateScene:[function(t,e,i){"use strict";cc._RF.push(e,"4e3896gSG1ARYvY2HWOJOXM","HotUpdateScene");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../Common/LogUtil"),r=t("./DialogMgr"),l=t("./HotUpdate"),u=cc._decorator,c=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.manifest=null,e.versionLabel=null,e.updateProgress=null,e.tipsLabel=null,e.progressValueLabel=null,e.addNode=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this;cc.resources.load("DialogLayer"),this._initView();var e=new l.HotOptions;e.OnVersionInfo=function(t){var e=t.local,i=t.server;a.default.log("\u672c\u5730\u7248\u672c\u53f7:"+e+", \u670d\u52a1\u5668\u7248\u672c\u53f7:"+i)},e.OnUpdateProgress=function(e){e.getDownloadedBytes(),e.getTotalBytes(),e.getDownloadedFiles(),e.getTotalFiles();var i=e.getPercentByFile().toFixed(2),n=(e.getPercent().toFixed(2),e.getMessage());a.default.log("\u66f4\u65b0\u8fdb\u5ea6\uff1a",i),t.updateProgress.progress=parseFloat(i),t.progressValueLabel.string=parseInt(i)+"%",t.tipsLabel.string="\u6b63\u5728\u66f4\u65b0\u4e2d,\u8bf7\u8010\u5fc3\u7b49\u5f85",a.default.log(n)},e.OnNeedToUpdate=function(){t.tipsLabel.string="\u51c6\u5907\u66f4\u65b0",l.default.hotUpdate()},e.OnNoNeedToUpdate=function(){a.default.log("\u65e0\u65b0\u7248\u672c\uff0c\u8fdb\u5165\u4e3b\u754c\u9762"),t._enterGame()},e.OnUpdateFailed=function(){t.tipsLabel.string="\u66f4\u65b0\u5931\u8d25",a.default.log("\u70ed\u66f4\u65b0\u5931\u8d25"),r.default.showTipsWithOkBtn("\u66f4\u65b0\u5931\u8d25,\u70b9\u51fb\u91cd\u8bd5",function(){l.default.checkUpdate()})},e.OnUpdateSucceed=function(){t.tipsLabel.string="\u66f4\u65b0\u6210\u529f",a.default.log("\u66f4\u65b0\u6210\u529f"),r.default.showTipsWithOkBtn("\u66f4\u65b0\u6210\u529f,\u70b9\u51fb\u786e\u5b9a\u91cd\u542f\u6e38\u620f",function(){cc.audioEngine.stopAll(),cc.game.restart()})},l.default.init(this.manifest,e),a.default.log("\u5f00\u59cb\u68c0\u6d4b\u66f4\u65b0"),this.onBtnClickCheckUpdate()},e.prototype._initView=function(){this.tipsLabel.string="",this.updateProgress.progress=0,this.addNode.destroyAllChildren()},e.prototype.onBtnClickCheckUpdate=function(){cc.sys.isNative?this.manifest&&(this.tipsLabel.string="\u6b63\u5728\u83b7\u53d6\u7248\u672c...",l.default.checkUpdate()):(a.default.log("web \u5e73\u53f0\u4e0d\u9700\u8981\u70ed\u66f4\u65b0"),this._enterGame())},e.prototype._enterGame=function(){a.default.log("\u8fdb\u5165\u6e38\u620f\u6210\u529f"),this.updateProgress.node.active=!1,cc.director.loadScene("FairyGUI")},s([h({displayName:"project.manifest",type:cc.Asset})],e.prototype,"manifest",void 0),s([h({displayName:"\u7248\u672c\u53f7",type:cc.Label})],e.prototype,"versionLabel",void 0),s([h({displayName:"\u70ed\u66f4\u65b0\u8fdb\u5ea6\u6761",type:cc.ProgressBar})],e.prototype,"updateProgress",void 0),s([h({displayName:"\u6d88\u606f\u63d0\u793a",type:cc.Label})],e.prototype,"tipsLabel",void 0),s([h({displayName:"\u8fdb\u5ea6\u503c",type:cc.Label})],e.prototype,"progressValueLabel",void 0),s([h({displayName:"\u6dfb\u52a0\u8282\u70b9",type:cc.Node})],e.prototype,"addNode",void 0),s([c],e)}(cc.Component);i.default=d,cc._RF.pop()},{"../Common/LogUtil":"LogUtil","./DialogMgr":"DialogMgr","./HotUpdate":"HotUpdate"}],HotUpdate:[function(t,e,i){"use strict";cc._RF.push(e,"a6892F726RKWJp4vK12agti","HotUpdate"),Object.defineProperty(i,"__esModule",{value:!0}),i.HotOptions=void 0;var n=function(){function t(){}return t.prototype.check=function(){for(var t in this)if("check"!==t&&!this[t])return cc.log("\u53c2\u6570HotOptions."+t+"\u672a\u8bbe\u7f6e\uff01"),!1;return!0},t}();i.HotOptions=n;var o=new(function(){function t(){this._assetsMgr=null,this._options=null,this._state=t.State.None}return t.prototype.checkUpdate=function(){this._assetsMgr?this._assetsMgr.getState()!==jsb.AssetsManager.State.UNINITED?this._assetsMgr.getLocalManifest().isLoaded()?(this._assetsMgr.setEventCallback(this._hotUpdateCallBack.bind(this)),this._state=t.State.Check,this._assetsMgr.checkUpdate()):console.log("\u52a0\u8f7d\u672c\u5730 manifest \u5931\u8d25 ..."):cc.error("\u672a\u521d\u59cb\u5316"):cc.log("\u8bf7\u5148\u521d\u59cb\u5316")},t.prototype.hotUpdate=function(){this._assetsMgr?(this._assetsMgr.setEventCallback(this._hotUpdateCallBack.bind(this)),this._state=t.State.Update,this._assetsMgr.update()):cc.log("\u8bf7\u5148\u521d\u59cb\u5316")},t.prototype._hotUpdateCallBack=function(e){var i=e.getEventCode();switch(cc.log("hotUpdate Code: "+i),i){case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:cc.log("\u5df2\u7ecf\u548c\u8fdc\u7a0b\u7248\u672c\u4e00\u81f4\uff0c\u65e0\u987b\u66f4\u65b0"),this._options.OnNoNeedToUpdate&&this._options.OnNoNeedToUpdate(i);break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:cc.log("\u53d1\u73b0\u65b0\u7248\u672c,\u8bf7\u66f4\u65b0"),this._options.OnNeedToUpdate&&this._options.OnNeedToUpdate(i);break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:cc.log("\u66f4\u65b0\u4e2d..."),this._state===t.State.Update&&this._options.OnUpdateProgress&&this._options.OnUpdateProgress(e);break;case jsb.EventAssetsManager.UPDATE_FINISHED:cc.log("\u66f4\u65b0\u6210\u529f"),this._onUpdateFinished();break;case jsb.EventAssetsManager.ASSET_UPDATED:break;default:this._onUpdateFailed(i)}},t.prototype._onUpdateFailed=function(t){this._assetsMgr.setEventCallback(null),this._options.OnUpdateFailed&&this._options.OnUpdateFailed(t)},t.prototype._onUpdateFinished=function(){this._assetsMgr.setEventCallback(null);var t=jsb.fileUtils.getSearchPaths(),e=this._assetsMgr.getLocalManifest().getSearchPaths();cc.log("[HotUpdate] \u641c\u7d22\u8def\u5f84: "+JSON.stringify(e)),Array.prototype.unshift(t,e),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(t)),jsb.fileUtils.setSearchPaths(t),this._options.OnUpdateSucceed&&this._options.OnUpdateSucceed()},t.prototype.showSearchPath=function(){cc.log("========================\u641c\u7d22\u8def\u5f84========================");for(var t=jsb.fileUtils.getSearchPaths(),e=0;e<t.length;e++)cc.log("["+e+"]: "+t[e]);cc.log("======================================================")},t.prototype.init=function(t,e){var i=this;if(cc.sys.isNative&&e.check()&&(this._options=e,!this._assetsMgr)){this.showSearchPath();var n=t.nativeUrl;cc.loader.md5Pipe&&(n=cc.loader.md5Pipe.transformURL(n));var o=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"remote-asset";this._assetsMgr=new jsb.AssetsManager(n,o,function(t,e){cc.log("\u5ba2\u6237\u7aef\u7248\u672c: "+t+", \u5f53\u524d\u6700\u65b0\u7248\u672c: "+e),i._options.OnVersionInfo({local:t,server:e});for(var n=t.split("."),o=e.split("."),s=0;s<n.length;++s){var a=parseInt(n[s]),r=parseInt(o[s]||"0");if(a!==r)return a-r}return o.length>n.length?-1:0}),this._assetsMgr.setVerifyCallback(function(t,e){return e.compressed,e.md5,e.path,e.size,!0}),cc.sys.os,cc.sys.OS_ANDROID;var s=this._assetsMgr.getLocalManifest();cc.log("[HotUpdate] \u70ed\u66f4\u65b0\u8d44\u6e90\u5b58\u653e\u8def\u5f84: "+o),cc.log("[HotUpdate] \u672c\u5730manifest\u8def\u5f84: "+n),cc.log("[HotUpdate] local packageUrl: "+s.getPackageUrl()),cc.log("[HotUpdate] project.manifest remote url: "+s.getManifestFileUrl()),cc.log("[HotUpdate] version.manifest remote url: "+s.getVersionFileUrl())}},t.State={None:0,Check:1,Update:2},t}());i.default=o,cc._RF.pop()},{}],HouseDto:[function(t,e,i){"use strict";cc._RF.push(e,"4c2d3eIo/BHErHQeDJmAYKp","HouseDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.HouseDto=void 0;i.HouseDto=function(){this.isSelected=!1},cc._RF.pop()},{}],House:[function(t,e,i){"use strict";cc._RF.push(e,"5672ajSZMRJSZf4Ole5fTAB","House"),Object.defineProperty(i,"__esModule",{value:!0}),i.House=void 0;i.House=function(){},cc._RF.pop()},{}],Http:[function(t,e,i){"use strict";cc._RF.push(e,"dc166yrWLRBC5ZR39dB2uu2","Http");var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var o in e=arguments[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.Convert=i.EVENTS=i.METHODS=void 0;var o=t("./Global"),s=t("./LogUtil");i.METHODS={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS",HEAD:"HEAD"},i.EVENTS={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"};var a={method:i.METHODS.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:o.default.token},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(t){return new Promise(t)},withCredentials:!1},r=function(t,e){return{status:t.status,response:t.response,data:e,xhr:t}},l=n({},a),u=function(t,e){return(t&&t.promise?t.promise:l.promise||a.promise)(e)},c=function(t){return u(t,function(e,o){var u=n(n(n({},a),l),t),c=u.xmlHttpRequest();if(u.abort&&"function"==typeof t.abort&&t.abort(function(){o(r(c)),c.abort()}),void 0===u.url)throw new Error("No URL defined");for(var h in c.open(u.method,u.params?u.url.split("?")[0]+"?"+new URLSearchParams(u.params):u.url,!0),s.default.log("[\u670d\u52a1\u5730\u5740] :",u.url),s.default.log("[\u53c2\u6570] :",u.data),c.withCredentials=u.withCredentials,c.addEventListener(i.EVENTS.LOAD,function(){if(4===c.readyState&&c.status>=200&&c.status<300){var t=void 0;c.responseText&&(t=!0===u.raw?c.responseText:u.load(c.responseText)),e(r(c,t))}else o(r(c));s.default.log("[\u54cd\u5e94\u7ed3\u679c]: ",JSON.parse(c.responseText))}),c.addEventListener(i.EVENTS.ABORT,function(){return o(r(c))}),c.addEventListener(i.EVENTS.ERROR,function(){return o(r(c))}),c.addEventListener(i.EVENTS.TIMEOUT,function(){return o(r(c))}),u.headers)({}).hasOwnProperty.call(u.headers,h)&&c.setRequestHeader(h,u.headers[h]);if(u.events)for(var h in u.events)({}).hasOwnProperty.call(u.events,h)&&c.addEventListener(h,u.events[h].bind(null,c),!1);var d="object"!=typeof u.data||u.raw?u.data:u.dump(u.data);void 0!==d?c.send(d):c.send()})},h={configure:function(t){l=n(n({},l),t)},EVENTS:i.EVENTS,METHODS:i.METHODS,get:function(t,e,o){return c(n({url:t,method:i.METHODS.GET,params:e},o))},put:function(t,e,o){return c(n({url:t,method:i.METHODS.PUT,data:e},o))},post:function(t,e,o){return c(n({url:t,method:i.METHODS.POST,data:e},o))},patch:function(t,e,o){return c(n({url:t,method:i.METHODS.PATCH,data:e},o))},del:function(t,e){return c(n({url:t,method:i.METHODS.DELETE},e))},options:function(t,e){return c(n({url:t,method:i.METHODS.OPTIONS},e))}};i.default=h;var d=function(){function t(){}return t.jsonToModel=function(t){return JSON.parse(t)},t.modelToJson=function(t){return JSON.stringify(t)},t}();i.Convert=d,cc._RF.pop()},{"./Global":"Global","./LogUtil":"LogUtil"}],ImageUtil:[function(t,e,i){"use strict";cc._RF.push(e,"18a6ecQIEtOpYUkePiV0SU8","ImageUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.getPixelColor=function(t,e,i){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=t.width,n.height=t.height;var s=t.getHtmlElementObj();o.drawImage(s,0,0,t.width,t.height);var a=o.getImageData(0,0,t.width,t.height),r=(i-1)*t.width*4+4*(e-1),l=a.data.slice(r,r+4),u=cc.color(l[0],l[1],l[2],l[3]);return s.remove(),n.remove(),u},t.imageToBase64=function(t,e){return new Promise(function(i){var n,o=null===(n=/\.png|\.jpg|\.jpeg/.exec(t))||void 0===n?void 0:n[0];if([".png",".jpg",".jpeg"].includes(o)){var s=document.createElement("canvas"),a=s.getContext("2d"),r=new Image;r.src=t,r.onload=function(){s.height=r.height,s.width=r.width,a.drawImage(r,0,0),o=".jpg"===o?"jpeg":o.replace(".","");var t=s.toDataURL("image/"+o);e&&e(t),i(t),r.remove(),s.remove()}}else console.warn("Not a jpg/jpeg or png resource!"),e&&e(null),i(null)})},t.base64ToTexture=function(t){var e=document.createElement("img");e.src=t;var i=new cc.Texture2D;return i.initWithElement(e),e.remove(),i},t.base64ToBlob=function(t){for(var e=t.split(","),i=/image\/\w+|;/.exec(e[0])[0],n=window.atob(e[1]),o=new ArrayBuffer(n.length),s=new Uint8Array(o),a=0;a<n.length;a++)s[a]=255&n.charCodeAt(a);return new Blob([s],{type:i})},t}();i.default=n,cc._RF.pop()},{}],InstanceEvent:[function(t,e,i){"use strict";cc._RF.push(e,"22ba7NZu0VIS4H2iDi6OJhP","InstanceEvent"),Object.defineProperty(i,"__esModule",{value:!0}),i.InstanceEvent=void 0;var n=function(){function t(){this.events=null,this.onceEvents=null,this.events=new Array,this.onceEvents=new Array}return t.prototype.on=function(t,e){this.events.push({callback:t,target:e})},t.prototype.once=function(t,e){this.onceEvents.push({callback:t,target:e})},t.prototype.off=function(t,e){for(var i=0;i<this.events.length;i++)this.events[i].callback!==t||e&&this.events[i].target!==e||this.events.splice(i,1);for(i=0;i<this.onceEvents.length;i++)this.onceEvents[i].callback!==t||e&&this.onceEvents[i].target!==e||this.onceEvents.splice(i,1)},t.prototype.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],n=0;n<this.events.length;n++)i.push(this.events[n].callback.apply(this.events[n].target,t));for(n=0;n<this.onceEvents.length;n++)i.push(this.onceEvents[n].callback.apply(this.onceEvents[n].target,t));return this.onceEvents.length=0,Promise.all(i)},t.prototype.removeAll=function(){this.events.length=0,this.onceEvents.length=0},t}();i.InstanceEvent=n,cc._RF.pop()},{}],LaunchMain:[function(t,e,i){"use strict";cc._RF.push(e,"a3a91FnPupIxoNtYVtUDIK3","LaunchMain");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../Config/Config"),r=t("../../Common/Global"),l=t("../../Common/Http"),u=t("../../Utils/MD5"),c=t("./Main"),h=t("../Common/Toast"),d=t("../../Common/LogUtil"),f=cc._decorator,m=f.ccclass,p=(f.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onLoad=function(){fgui.UIPackage.loadPackage("UI/Launch",this.onUILoaded.bind(this))},e.prototype.onUILoaded=function(){this._view=fgui.UIPackage.createObject("Launch","LaunchMain").asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this._userField=this._view.getChild("n6").asTextField,this._pwdField=this._view.getChild("n7").asTextField,this._idField=this._view.getChild("n15").asTextField,this._view.getChild("n5").onClick(this.onLoginClickButton,this),this._view.getController("loginMode").selectedIndex=r.default.loginMode},e.prototype.onLoginClickButton=function(){1==r.default.loginMode?this.loginById():this.loginByAccount()},e.prototype.loginByAccount=function(){var t=this._userField.text,e=this._pwdField.text;if(0==t.length)return d.default.log("\u8bf7\u8f93\u5165\u624b\u673a\u53f7"),void h.default.show("\u8bf7\u8f93\u5165\u624b\u673a\u53f7");if(0!=e.length){var i={mobile:t,password:u.Md5.hashStr(e)};this.fetchService(i,a.default.url_auth_login)}else h.default.show("\u8bf7\u8f93\u5165\u5bc6\u7801")},e.prototype.loginById=function(){var t=this._idField.text;if(0==t.length)return d.default.log("\u8bf7\u8f93\u5165id"),void h.default.show("\u8bf7\u8f93\u5165\u7528\u6237id");r.default.app_user_id=Number(t),this.loadRoomScene()},e.prototype.fetchService=function(t,e){var i=this;l.default.post(a.RunEnvironment.hadEnvironment().service_url+e,t,{headers:{"Content-Type":"application/json"}}).then(function(t){var e=t.data;if(500!=e.status){var n=t.data;d.default.log("token:"+n.data.token),r.default.token=n.data.token,i.loadRoomScene()}else h.default.show("\u767b\u5f55\u5931\u8d25:"+e.msg)}).catch(function(t){d.default.log("error"+t),h.default.show("\u767b\u5f55\u5931\u8d25\uff1a"+t)})},e.prototype.loadRoomScene=function(){this.addComponent(c.default),this.destroy()},e.prototype.onDestroy=function(){this._view.dispose()},s([m],e)}(cc.Component));i.default=p,cc._RF.pop()},{"../../Common/Global":"Global","../../Common/Http":"Http","../../Common/LogUtil":"LogUtil","../../Config/Config":"Config","../../Utils/MD5":"MD5","../Common/Toast":"Toast","./Main":"Main"}],Launch:[function(t,e,i){"use strict";cc._RF.push(e,"07308t6XZNOK7JzichKuo8q","Launch");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=t("../../Common/GameResourceUtil"),r=t("../../Common/Global"),l=t("../../Common/LogUtil"),u=t("../../Config/Config"),c=t("./LaunchMain"),h=t("./Main"),d=cc._decorator,f=d.ccclass,m=d.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateProgress=null,e.tipsLabel=null,e.progressValueLabel=null,e.addNode=null,e}return o(e,t),e.prototype.onLoad=function(){fgui.GRoot.create(),this._initView(),this.onUILoaded()},e.prototype._initView=function(){this.tipsLabel.string="",this.progressValueLabel.string="",this.updateProgress.progress=0,this.addNode.destroyAllChildren()},e.prototype.onUILoaded=function(){var t=this;r.default.theme=0,this.tipsLabel.string="\u8d44\u6e90\u51c6\u5907\u4e2d",cc.resources.loadDir("UI",function(e,i){var n=e/i;l.default.log("\u8fdb\u5ea6:",n),t.updateProgress.progress=n;var o=(100*n).toFixed();t.progressValueLabel.string=o+"%",t.tipsLabel.string="\u8d44\u6e90\u52a0\u8f7d\u4e2d..."},function(){fgui.UIPackage.addPackage("UI/Basic"),fgui.UIPackage.addPackage("UI/Launch"),fgui.UIConfig.globalModalWaiting="ui://Basic/GameGlobalLoading",fgui.UIConfig.windowModalWaiting="ui://Basic/GameGlobalLoading",fgui.UIConfig.tooltipsWin="ui://Basic/Toast",a.GameSoundUtil.loadResources(),a.GameResourceUtil.loadResources(),t.loadRoomScene(),t.progressValueLabel.string="100%",t.tipsLabel.string="\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210"})},e.prototype.loadRoomScene=function(){this.updateProgress.node.active=!1,cc.sys.isNative?(r.default.loginMode=0,u.RunEnvironment.environment=u.GameEnvironment.Test_1,l.default.log("\u539f\u751f\u73af\u5883"),this.addComponent(h.default)):(u.RunEnvironment.environment=u.GameEnvironment.Test_1,l.default.log("web\u73af\u5883"),r.default.loginMode=1,this.addComponent(c.default))},s([m({displayName:"\u8d44\u6e90\u8fdb\u5ea6\u6761",type:cc.ProgressBar})],e.prototype,"updateProgress",void 0),s([m({displayName:"\u6d88\u606f\u63d0\u793a",type:cc.Label})],e.prototype,"tipsLabel",void 0),s([m({displayName:"\u8fdb\u5ea6\u503c",type:cc.Label})],e.prototype,"progressValueLabel",void 0),s([m({displayName:"\u6dfb\u52a0\u8282\u70b9",type:cc.Node})],e.prototype,"addNode",void 0),s([f],e)}(cc.Component);i.default=p,cc._RF.pop()},{"../../Common/GameResourceUtil":"GameResourceUtil","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Config/Config":"Config","./LaunchMain":"LaunchMain","./Main":"Main"}],LoaderManager:[function(t,e,i){"use strict";cc._RF.push(e,"335f6+fCSxAKqV2S3Pp/YpB","LoaderManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.LoaderManager=void 0;var n=t("../Common/Util"),o=function(){function t(){this._loadedRes=new Map,this._loadedExternalUrls=new Map}return t.get_inst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.setExternalSprite=function(t,e,i){void 0===i&&(i=!1),this.loadExternalAsset(e,n.gen_handler(function(n){t&&cc.isValid(t.node)?(i&&(t.node.active=!0),t.spriteFrame=new cc.SpriteFrame(n)):cc.loader.release(e)}))},t.prototype.setExternalSpriteFrame=function(t,e,i,o){void 0===o&&(o=!1),this.loadExternalAsset(i,n.gen_handler(function(n){t&&cc.isValid(t.node)?(o&&(t.node.active=!0),cc.isValid(e)&&(e.setTexture(n),t.spriteFrame=e)):cc.loader.release(i)}))},t.prototype.setSprite=function(t,e,i){void 0===i&&(i=!1),this.loadRes(e,n.gen_handler(function(n){t&&cc.isValid(t.node)?(i&&(t.node.active=!0),t.spriteFrame=new cc.SpriteFrame(n)):cc.loader.release(e)}))},t.prototype.setSpriteFrame=function(t,e,i,o){void 0===o&&(o=!1),this.loadRes(i,n.gen_handler(function(n){t&&cc.isValid(t.node)?(o&&(t.node.active=!0),cc.isValid(e)&&(e.setTexture(n),t.spriteFrame=e)):cc.loader.release(i)}))},t.prototype.setAtlasSprite=function(t,e,i,o){void 0===o&&(o=!1),this.loadRes(e,n.gen_handler(function(n){t&&cc.isValid(t.node)?(o&&(t.node.active=!0),t.spriteFrame=n.getSpriteFrame(i)):cc.loader.release(e)}),cc.SpriteAtlas)},t.prototype.loadExternalAsset=function(t,e,i){var n=this,o=cc.loader.getRes(t);cc.isValid(o)?e.exec(o):cc.loader.load(i?{url:t,type:i}:t,function(i,o){i?cc.warn("loadExternalAsset error",t):cc.isValid(o)&&(n.cacheExternalAsset(t),e.exec(o))})},t.prototype.loadExternalAssets=function(t,e,i){var n=this,o={},s=[];if(t.forEach(function(t){var e=cc.loader.getRes(t);cc.isValid(e)?o[t]=e:s.push(t)}),0!=s.length){var a=[];s.forEach(function(t,e){i?a.push({url:t,type:i[e]}):a.push(t)}),cc.loader.load(a,function(t,i){if(t)cc.warn("loadExternalAssets error",t);else{var a=!0;s.forEach(function(t){var e=i.getContent(t);cc.isValid(e)?(o[t]=e,n.cacheExternalAsset(t)):a=!1}),a&&e.exec(o)}})}else e.exec(o)},t.prototype.loadRes=function(t,e,i){var n=this,o=cc.loader.getRes(t,i);cc.isValid(o)?e.exec(o):cc.loader.loadRes(t,i,function(i,o){i?cc.warn("loadAsset error",t):cc.isValid(o)&&(n.cacheAsset(o),e.exec(o))})},t.prototype.loadPrefabObj=function(t,e){var i=this,n=cc.loader.getRes(t,cc.Prefab);if(cc.isValid(n)){var o=cc.instantiate(n);e.exec(o)}else cc.loader.loadRes(t,cc.Prefab,function(n,o){if(n)cc.warn("loadPrefabObj error",t);else if(cc.isValid(o)){i.cacheAsset(o);var s=cc.instantiate(o);e.exec(s)}})},t.prototype.loadPrefabObjArray=function(t,e){var i=this,n={},o=[];t.forEach(function(t){var e=cc.loader.getRes(t,cc.Prefab);cc.isValid(e)?n[t]=cc.instantiate(e):o.push(t)}),0!=o.length?cc.loader.loadResArray(o,cc.Prefab,function(t){if(t)cc.warn("loadPrefabObjArray error",o);else{var s=!0;o.forEach(function(t){var e=cc.loader.getRes(t,cc.Prefab);cc.isValid(e)?(n[t]=cc.instantiate(e),i.cacheAsset(e)):s=!1}),s&&e.exec(n)}}):e.exec(n)},t.prototype.loadPrefabDir=function(t,e){var i=this,n={};cc.loader.loadResDir(t,cc.Prefab,function(o,s,a){if(o)cc.warn("loadPrefabObjDir error",t);else{var r=!0;a.forEach(function(t){var e=cc.loader.getRes(t,cc.Prefab);cc.isValid(e)?(n[t]=e,i.cacheAsset(e)):r=!1}),r&&e.exec(n)}})},t.prototype.loadPrefabObjDir=function(t,e){var i=this,n={};cc.loader.loadResDir(t,cc.Prefab,function(o,s,a){if(o)cc.warn("loadPrefabObjDir error",t);else{var r=!0;a.forEach(function(t){var e=cc.loader.getRes(t,cc.Prefab);cc.isValid(e)?(n[t]=cc.instantiate(e),i.cacheAsset(e)):r=!1}),r&&e.exec(n)}})},t.prototype.cacheAsset=function(t){if(cc.isValid(t)){var e=cc.loader._getReferenceKey(t);e&&this._loadedRes.set(e,!0)}},t.prototype.cacheExternalAsset=function(t){this._loadedExternalUrls.set(t,!0)},t.prototype.releaseAll=function(t){var e=this;void 0===t&&(t=null);var i=new Map;this._loadedRes.forEach(function(e,n){cc.loader.getDependsRecursively(n).forEach(function(e){e&&(t&&t[e]?i.set(e,!0):cc.loader.release(e))})}),this._loadedRes.clear(),i.forEach(function(t,i){e._loadedRes.set(i,!0)}),this._loadedExternalUrls.forEach(function(t,e){cc.loader.release(e)}),this._loadedExternalUrls.clear(),cc.sys.garbageCollect()},t.prototype.dump=function(){cc.log("---------------------loader_mgr dump begin--------------------------");var t=cc.loader._cache,e=0;for(var i in t)e++,cc.log("id="+i+", value="+t[i]);cc.log("---------------------loader_mgr dump end, totalCount="+e+"--------------------------")},t}();i.LoaderManager=o,cc._RF.pop()},{"../Common/Util":"Util"}],LogUtil:[function(t,e,i){"use strict";cc._RF.push(e,"433faBDL/9ALZPSSKqyP7e3","LogUtil");var n=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var o=t("../Config/Config"),s=cc._decorator,a=s.ccclass,r=(s.property,function(){function t(){}var e;return e=t,t.dateStr=function(){var t=new Date;return t.getMinutes()+"\u5206"+t.getSeconds()+"\u79d2"},t.log=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return o.RunEnvironment.environment==o.GameEnvironment.Release?console.log():i&&i.length>0?console.log("\u3010"+e.dateStr()+"\u3011"+t,i[0]):console.log("\u3010"+e.dateStr()+"\u3011"+t)},t.error=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return o.RunEnvironment.environment==o.GameEnvironment.Release?console.log():i&&i.length>0?console.error("\u3010"+e.dateStr()+"\u3011"+t,i[0]):console.error("\u3010"+e.dateStr()+"\u3011",t)},e=n([a],t)}());i.default=r,cc._RF.pop()},{"../Config/Config":"Config"}],LoseCauseVo:[function(t,e,i){"use strict";cc._RF.push(e,"ab2dfloDcJG25fhA1LXPYar","LoseCauseVo");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.LoseCauseVo=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.convert=function(t){var i=new e;return i.depict=t,i},e}(t("./GameVo").GameVo);i.LoseCauseVo=s,cc._RF.pop()},{"./GameVo":"GameVo"}],MD5:[function(t,e,i){"use strict";cc._RF.push(e,"8916dGWQ6JC/4LqFHAPaUti","MD5"),Object.defineProperty(i,"__esModule",{value:!0}),i.Md5=void 0;var n=function(){function t(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return t.hashStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendStr(t).end(e)},t.hashAsciiStr=function(t,e){return void 0===e&&(e=!1),this.onePassHasher.start().appendAsciiStr(t).end(e)},t._hex=function(e){var i,n,o,s,a=t.hexChars,r=t.hexOut;for(s=0;s<4;s+=1)for(n=8*s,i=e[s],o=0;o<8;o+=2)r[n+1+o]=a.charAt(15&i),i>>>=4,r[n+0+o]=a.charAt(15&i),i>>>=4;return r.join("")},t._md5cycle=function(t,e){var i=t[0],n=t[1],o=t[2],s=t[3];n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&o|~n&s)+e[0]-680876936|0)<<7|i>>>25)+n|0)&n|~i&o)+e[1]-389564586|0)<<12|s>>>20)+i|0)&i|~s&n)+e[2]+606105819|0)<<17|o>>>15)+s|0)&s|~o&i)+e[3]-1044525330|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&o|~n&s)+e[4]-176418897|0)<<7|i>>>25)+n|0)&n|~i&o)+e[5]+1200080426|0)<<12|s>>>20)+i|0)&i|~s&n)+e[6]-1473231341|0)<<17|o>>>15)+s|0)&s|~o&i)+e[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&o|~n&s)+e[8]+1770035416|0)<<7|i>>>25)+n|0)&n|~i&o)+e[9]-1958414417|0)<<12|s>>>20)+i|0)&i|~s&n)+e[10]-42063|0)<<17|o>>>15)+s|0)&s|~o&i)+e[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&o|~n&s)+e[12]+1804603682|0)<<7|i>>>25)+n|0)&n|~i&o)+e[13]-40341101|0)<<12|s>>>20)+i|0)&i|~s&n)+e[14]-1502002290|0)<<17|o>>>15)+s|0)&s|~o&i)+e[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&s|o&~s)+e[1]-165796510|0)<<5|i>>>27)+n|0)&o|n&~o)+e[6]-1069501632|0)<<9|s>>>23)+i|0)&n|i&~n)+e[11]+643717713|0)<<14|o>>>18)+s|0)&i|s&~i)+e[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&s|o&~s)+e[5]-701558691|0)<<5|i>>>27)+n|0)&o|n&~o)+e[10]+38016083|0)<<9|s>>>23)+i|0)&n|i&~n)+e[15]-660478335|0)<<14|o>>>18)+s|0)&i|s&~i)+e[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&s|o&~s)+e[9]+568446438|0)<<5|i>>>27)+n|0)&o|n&~o)+e[14]-1019803690|0)<<9|s>>>23)+i|0)&n|i&~n)+e[3]-187363961|0)<<14|o>>>18)+s|0)&i|s&~i)+e[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n&s|o&~s)+e[13]-1444681467|0)<<5|i>>>27)+n|0)&o|n&~o)+e[2]-51403784|0)<<9|s>>>23)+i|0)&n|i&~n)+e[7]+1735328473|0)<<14|o>>>18)+s|0)&i|s&~i)+e[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n^o^s)+e[5]-378558|0)<<4|i>>>28)+n|0)^n^o)+e[8]-2022574463|0)<<11|s>>>21)+i|0)^i^n)+e[11]+1839030562|0)<<16|o>>>16)+s|0)^s^i)+e[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n^o^s)+e[1]-1530992060|0)<<4|i>>>28)+n|0)^n^o)+e[4]+1272893353|0)<<11|s>>>21)+i|0)^i^n)+e[7]-155497632|0)<<16|o>>>16)+s|0)^s^i)+e[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n^o^s)+e[13]+681279174|0)<<4|i>>>28)+n|0)^n^o)+e[0]-358537222|0)<<11|s>>>21)+i|0)^i^n)+e[3]-722521979|0)<<16|o>>>16)+s|0)^s^i)+e[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((s=((s+=((i=((i+=(n^o^s)+e[9]-640364487|0)<<4|i>>>28)+n|0)^n^o)+e[12]-421815835|0)<<11|s>>>21)+i|0)^i^n)+e[15]+530742520|0)<<16|o>>>16)+s|0)^s^i)+e[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((s=((s+=(n^((i=((i+=(o^(n|~s))+e[0]-198630844|0)<<6|i>>>26)+n|0)|~o))+e[7]+1126891415|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~n))+e[14]-1416354905|0)<<15|o>>>17)+s|0)|~i))+e[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((s=((s+=(n^((i=((i+=(o^(n|~s))+e[12]+1700485571|0)<<6|i>>>26)+n|0)|~o))+e[3]-1894986606|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~n))+e[10]-1051523|0)<<15|o>>>17)+s|0)|~i))+e[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((s=((s+=(n^((i=((i+=(o^(n|~s))+e[8]+1873313359|0)<<6|i>>>26)+n|0)|~o))+e[15]-30611744|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~n))+e[6]-1560198380|0)<<15|o>>>17)+s|0)|~i))+e[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((s=((s+=(n^((i=((i+=(o^(n|~s))+e[4]-145523070|0)<<6|i>>>26)+n|0)|~o))+e[11]-1120210379|0)<<10|s>>>22)+i|0)^((o=((o+=(i^(s|~n))+e[2]+718787259|0)<<15|o>>>17)+s|0)|~i))+e[9]-343485551|0)<<21|n>>>11)+o|0,t[0]=i+t[0]|0,t[1]=n+t[1]|0,t[2]=o+t[2]|0,t[3]=s+t[3]|0},t.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(t.stateIdentity),this},t.prototype.appendStr=function(e){var i,n,o=this._buffer8,s=this._buffer32,a=this._bufferLength;for(n=0;n<e.length;n+=1){if((i=e.charCodeAt(n))<128)o[a++]=i;else if(i<2048)o[a++]=192+(i>>>6),o[a++]=63&i|128;else if(i<55296||i>56319)o[a++]=224+(i>>>12),o[a++]=i>>>6&63|128,o[a++]=63&i|128;else{if((i=1024*(i-55296)+(e.charCodeAt(++n)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[a++]=240+(i>>>18),o[a++]=i>>>12&63|128,o[a++]=i>>>6&63|128,o[a++]=63&i|128}a>=64&&(this._dataLength+=64,t._md5cycle(this._state,s),a-=64,s[0]=s[16])}return this._bufferLength=a,this},t.prototype.appendAsciiStr=function(e){for(var i,n=this._buffer8,o=this._buffer32,s=this._bufferLength,a=0;;){for(i=Math.min(e.length-a,64-s);i--;)n[s++]=e.charCodeAt(a++);if(s<64)break;this._dataLength+=64,t._md5cycle(this._state,o),s=0}return this._bufferLength=s,this},t.prototype.appendByteArray=function(e){for(var i,n=this._buffer8,o=this._buffer32,s=this._bufferLength,a=0;;){for(i=Math.min(e.length-a,64-s);i--;)n[s++]=e[a++];if(s<64)break;this._dataLength+=64,t._md5cycle(this._state,o),s=0}return this._bufferLength=s,this},t.prototype.getState=function(){var t=this._state;return{buffer:String.fromCharCode.apply(null,this._buffer8),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}},t.prototype.setState=function(t){var e,i=t.buffer,n=t.state,o=this._state;for(this._dataLength=t.length,this._bufferLength=t.buflen,o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],e=0;e<i.length;e+=1)this._buffer8[e]=i.charCodeAt(e)},t.prototype.end=function(e){void 0===e&&(e=!1);var i,n=this._bufferLength,o=this._buffer8,s=this._buffer32,a=1+(n>>2);if(this._dataLength+=n,o[n]=128,o[n+1]=o[n+2]=o[n+3]=0,s.set(t.buffer32Identity.subarray(a),a),n>55&&(t._md5cycle(this._state,s),s.set(t.buffer32Identity)),(i=8*this._dataLength)<=4294967295)s[14]=i;else{var r=i.toString(16).match(/(.*?)(.{0,8})$/);if(null===r)return;var l=parseInt(r[2],16),u=parseInt(r[1],16)||0;s[14]=l,s[15]=u}return t._md5cycle(this._state,s),e?this._state:t._hex(this._state)},t.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),t.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),t.hexChars="0123456789abcdef",t.hexOut=[],t.onePassHasher=new t,t}();i.Md5=n,cc._RF.pop()},{}],Main:[function(t,e,i){"use strict";cc._RF.push(e,"adc813Cst1DRJlVIPMgfkfb","Main");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{l(n.next(t))}catch(e){s(e)}}function r(t){try{l(n.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,r)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0});var l=cc._decorator,u=l.ccclass,c=(l.property,t("../../Common/Util")),h=t("../../Common/Global"),d=t("./RoleStore"),f=t("../../Config/Config"),m=t("../Common/Toast"),p=t("../Common/GameRule"),_=t("../AppEntry"),g=t("./Game"),y=t("../Windows/GameLoadingWindow"),C=t("../../Common/GameServerUtil"),b=t("../../Cores/EventManager"),v=t("../../Common/LogUtil"),w=t("../../Common/NativeServiceUtils"),S=t("../../Utils/AudioPlayer"),k=t("./TeamGame"),I=t("../Windows/GameChooseModeWindow"),R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._loadingWindow=new y.GameLoadingWindow,e._is_invite_id=null,e}return o(e,t),e.prototype.onLoad=function(){fgui.UIPackage.loadPackage("UI/Main",this.onUILoaded.bind(this))},e.prototype.onUILoaded=function(){this._view=fgui.UIPackage.createObject("Main","Main").asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this.initListener(),h.default.theme=0,h.default.roomId=null,this.initEvent(),this.fetchGameRoleInfo(),S.default.stopAllMusic(),S.default.stopAllEffect()},e.prototype.initListener=function(){this._view.getChild("n1").onClick(this.onChooseExitGameClick,this),this._view.getChild("n10").onClick(this.onChooseGameRuleClick,this),this._view.getChild("n3").onClick(this.onChooseFriendPkClick,this),this._view.getChild("n4").onClick(this.onChooseOnlineModeClick,this)},e.prototype.fetchGameRoleInfo=function(){w.NativeServiceUtils.fetchGameRoleInfo()},e.prototype.fetchInviteCode=function(){w.NativeServiceUtils.fetchInviteCode()},e.prototype.initEvent=function(){if(cc.sys.isNative){var t=this;b.default.on("onJoinGameByAuthToken",function(e,i){t.joinGameByUserId(e,i)},this),b.default.on("onWxShareResultCallback",function(e){h.default.game_mode=new h.GameMode(h.MYRoomType.Friend,h.MYGradeType.Primary),h.default.roomId=e,t._is_invite_id||(t._is_invite_id=e,v.default.log("[\u9080\u8bf7\u6a21\u5f0f]\u73a9\u5bb6\u51c6\u5907\u52a0\u5165\u623f\u95f4\u5185"),t.joinRoomByGameId(e),setTimeout(function(){t._is_invite_id=null},5e3))},this),b.default.on("onNetworkStatusCallback",function(t){v.default.log("\u7f51\u7edc\u72b6\u6001:",t),h.default.network_status=t},this)}else v.default.log("\u7f51\u9875\u7248"),this.initSDK()},e.prototype.fetchMessage=function(){h.default.fastMessags&&h.default.fastMessags.length>0||C.GameServerUtil.fetchServiceMessageList(function(t){0!=t.length&&(h.default.fastMessags=t,h.default.fastMessags.forEach(function(t){cc.assetManager.loadRemote(t.audioUrl,{reload:!0,priority:3,cacheEnabled:!0,maxRetryCount:10},function(e,i){e||(t.audioClip=i)})}))},function(){v.default.log("\u83b7\u53d6\u5feb\u6377\u77ed\u8bed\u5931\u8d25")})},e.prototype.loadRoomScene=function(t){try{h.default.client.removeAllListeners(),this.addComponent(t),this.destroy()}catch(e){v.default.log("error:",e)}},e.prototype.onChooseExitGameClick=function(){v.default.log("\u79bb\u5f00\u6e38\u620f\u9875\u9762"),this.exitGame()},e.prototype.onChooseGameRuleClick=function(){v.default.log("\u79bb\u5f00\u6e38\u620f\u9875\u9762"),this.loadRoomScene(p.default)},e.prototype.onChooseFriendPkClick=function(){v.default.log("\u6e38\u620f\u7ec4\u961f\u9875\u9762"),this.handleChooseMode(h.GameChooseMode.pk),h.default.game_mode=new h.GameMode(h.MYRoomType.Friend,h.MYGradeType.Primary)},e.prototype.onChooseOnlineModeClick=function(){v.default.log("\u6e38\u620f\u5728\u7ebf\u9875\u9762"),this.handleChooseMode(h.GameChooseMode.primary),h.default.game_mode=new h.GameMode(h.MYRoomType.Multiple,h.MYGradeType.Primary)},e.prototype.onChoosePrimaryModeClick=function(){v.default.log("\u6e38\u620f\u5339\u914d\u9875\u9762"),this.handleChooseMode(h.GameChooseMode.primary),h.default.game_mode=new h.GameMode(h.MYRoomType.Multiple,h.MYGradeType.Primary)},e.prototype.onChooseMediumModeClick=function(){v.default.log("\u6e38\u620f\u5339\u914d\u9875\u9762"),this.handleChooseMode(h.GameChooseMode.medium),h.default.game_mode=new h.GameMode(h.MYRoomType.Multiple,h.MYGradeType.Medium)},e.prototype.onChooseHighModeClick=function(){v.default.log("\u6e38\u620f\u5339\u914d\u9875\u9762"),this.handleChooseMode(h.GameChooseMode.hight),h.default.game_mode=new h.GameMode(h.MYRoomType.Multiple,h.MYGradeType.High)},e.prototype.handleChooseMode=function(t){var e=this;if(t!=h.GameChooseMode.pk&&t!=h.GameChooseMode.primary){var i=new I.GameChooseModeWindow(t);i.show(),i.onSubmitResult=function(){t==h.GameChooseMode.medium&&h.default.userLevel<3?m.default.show("\u7b49\u7ea7\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8fdb\u5165"):t==h.GameChooseMode.hight&&h.default.userLevel<5?m.default.show("\u7b49\u7ea7\u4e0d\u8db3\uff0c\u65e0\u6cd5\u8fdb\u5165"):e.loadRoomScene(d.default)}}else e.loadRoomScene(d.default)},e.prototype.exitGame=function(){if(v.default.log("\u79bb\u5f00\u623f\u95f4"),cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS){v.default.log("\u540a\u8d77iOS \u5e73\u53f0");var t=this;cc.audioEngine.stopAll(),cc.resources.releaseAll(),w.NativeServiceUtils.exitCocosForJS(),t.destroy(),v.default.log("\u8d44\u6e90\u9500\u6bc1")}else cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID?(v.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0"),t=this,cc.director.pause(),cc.audioEngine.stopAll(),cc.resources.releaseAll(),w.NativeServiceUtils.exitCocosForJS(),cc.game.end(),t.destroy(),v.default.log("\u8d44\u6e90\u9500\u6bc1\uff0c\u56de\u5230app")):(cc.director.pause(),cc.audioEngine.stopAll(),h.default.client.destroy(),this.loadRoomScene(_.default))},e.prototype.onDestroy=function(){v.default.log("\u3010Main\u3011onDestroy:----\u9500\u6bc1\u9875\u9762"),this._view.dispose()},e.prototype.initSDK=function(){if(c.isInited())return this.closeLaunching(),v.default.log("SDK \u5df2\u7ecf\u521d\u59cb\u5316\uff0c\u65e0\u9700\u91cd\u590d\u64cd\u4f5c");var t=this;this._loadingWindow.show(),v.default.log("\u6b63\u5728\u521d\u59cb\u5316 SDK");var e={appId:f.default.appId,openId:""+h.default.app_user_id,clientId:f.default.clientId,clientSecret:f.default.clientSecret};cc.sys.ANDROID===cc.sys.platform&&(e=Object.assign(e,{platform:window.GOBE.PlatformType.CC_ANDROID,cerPath:cc.url.raw("resources/endpoint-cert.cer")})),v.default.log("clientConfig:",e),h.default.client=new window.GOBE.Client(e),h.default.client.onInitResult(function(e){e===window.GOBE.ErrorCode.COMMON_OK?(v.default.log("\u521d\u59cb\u5316\u6210\u529f:",e),h.default.playerId=h.default.client.playerId,t.handleCheckRoomInfo()):(t._loadingWindow&&t._loadingWindow.hide(),m.default.show("\u9274\u6743\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u9875\u9762"),v.default.log("\u521d\u59cb\u5316 SDK \u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+e),t.closeLaunching(),setTimeout(function(){t.exitGame()},3e3))}),h.default.client.init().then(function(t){v.default.log("\u9274\u6743\u6210\u529f\uff1a",t),h.default.playerId=t.playerId,h.default.roomId=t.lastRoomId}).catch(function(e){v.default.log("init err: ",e),m.default.show("\u521d\u59cb\u5316\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u9875\u9762"),setTimeout(function(){t.exitGame()},3e3)})},e.prototype.closeLaunching=function(){fgui.GRoot.inst.closeModalWait()},e.prototype.handleCheckRoomInfo=function(){return a(this,void 0,void 0,function(){var t,e,i;return r(this,function(n){switch(n.label){case 0:return t=this,[4,this.initLogin()];case 1:return n.sent(),t._loadingWindow&&t._loadingWindow.hide(),v.default.log("\u5f00\u59cb\u5224\u65ad\u662f\u5426\u5728\u6e38\u620f\u4e2d"),(e=h.default.client).lastRoomId?(i={customPlayerStatus:0,customPlayerProperties:t._customProfile()},v.default.log("\u73a9\u5bb6\u8fd8\u5728\u6e38\u620f\u4e2d\uff0c\u623f\u95f4ID\uff1a",e.lastRoomId),e.joinRoom(e.lastRoomId,i).then(function(e){h.default.room=e,h.default.player=e.player,h.default.gameUserid=h.default.playerId,v.default.log("\u91cd\u65b0\u52a0\u5165\u623f\u95f4\u6210\u529f:",e);var i=e.customRoomProperties;if(v.default.log("[\u73a9\u5bb6\u5728\u623f\u95f4\u5185]\u623f\u95f4\u4fe1\u606f",i),!i||0==i.length)return t.addComponent(k.default),void t.destroy();var n=JSON.parse(i);if(n&&n.game_type&&(h.default.game_mode=new h.GameMode(n.game_type,n.grade_type)),n&&-1==n.status)t.addComponent(k.default),t.destroy();else{if(n&&0==n.status)return void t.prepareGameByRestart();t.leaveRoom()}}).catch(function(){t.leaveRoom()})):(v.default.log("\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u5185"),v.default.log("\u3010\u73a9\u5bb6\u4e0d\u5728\u623f\u95f4\u3011\u5c1d\u8bd5\u5f00\u542f\u9080\u8bf7\u7801\u8fdb\u5165\u6a21\u5f0f"),h.default.game_mode=null,t.fetchInviteCode()),this.fetchMessage(),[2]}})})},e.prototype._customProfile=function(){var t={faceUrl:h.default.userInfo.faceUrl,level:h.default.userLevel,id:h.default.userInfo.openId,nickname:h.default.userInfo.nickname,openId:h.default.playerId};return JSON.stringify(t)},e.prototype.joinRoomByGameId=function(t){v.default.log("\u901a\u8fc7\u9080\u8bf7\u52a0\u5165\u6e38\u620f\u9875\u9762"),null!=t?(v.default.log("\u623f\u95f4id:"+t),this.loadRoomScene(d.default)):v.default.log("\u8bf7\u8f93\u5165\u623f\u95f4id")},e.prototype.prepareGameByRestart=function(){var t=this,e=new y.GameLoadingWindow;e.show(),fgui.UIPackage.loadPackage("UI/Game",function(){e.hide(),t.addComponent(g.default),t.destroy()})},e.prototype.leaveRoom=function(){v.default.log("\u623f\u95f4\u5df2\u9500\u6bc1,\u9000\u51fa\u623f\u95f4"),h.default.client.leaveRoom().then(function(){v.default.log("\u79bb\u5f00\u623f\u95f4\u6210\u529f")})},e.prototype.joinGameByUserId=function(t,e){v.default.log("token:"+t),h.default.token=t,h.default.app_user_id=Number(e),this.initSDK()},e.prototype.fetchService=function(t,e){var i=this;C.GameServerUtil.fetchServiceUserInfo(t,e,function(t){h.default.userInfo=t,h.default.userInfo.openId=h.default.userInfo.id,t.token&&null!=t.token&&(v.default.log("[\u7528\u6237\u4ee4\u724c]:",t.token),h.default.token=t.token),i.initSDK()},function(t){m.default.show("\u7528\u6237\u4fe1\u606f\u83b7\u53d6\u5931\u8d25:"+t)})},e.prototype.initLogin=function(t){return a(this,void 0,void 0,function(){return r(this,function(){return[2,C.GameServerUtil.fetchServiceGameLogin().then(function(e){v.default.log("\u7528\u6237\u6570\u636e\u83b7\u53d6\u6210\u529f"),t&&t(e)},function(t){m.default.show(t)})]})})},s([u],e)}(cc.Component);i.default=R,cc._RF.pop()},{"../../Common/GameServerUtil":"GameServerUtil","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Common/NativeServiceUtils":"NativeServiceUtils","../../Common/Util":"Util","../../Config/Config":"Config","../../Cores/EventManager":"EventManager","../../Utils/AudioPlayer":"AudioPlayer","../AppEntry":"AppEntry","../Common/GameRule":"GameRule","../Common/Toast":"Toast","../Windows/GameChooseModeWindow":"GameChooseModeWindow","../Windows/GameLoadingWindow":"GameLoadingWindow","./Game":"Game","./RoleStore":"RoleStore","./TeamGame":"TeamGame"}],MarketVo:[function(t,e,i){"use strict";cc._RF.push(e,"cac8dPGYlJMLrT+sktmtOng","MarketVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.MarketVo=void 0;var n=function(){function t(){}return t.convert=function(e,i){var n=new t;return n.marketType=e,n.object=i,n},t}();i.MarketVo=n,cc._RF.pop()},{}],MathUtil:[function(t,e,i){"use strict";cc._RF.push(e,"ebdbcCQ02VNrL21+wrH0RMs","MathUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.getRandomInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.floor(Math.random()*(e-t)+t)},t.getPseudoRandomInt=function(t,e){return Math.ceil((9301*t+49297)%233280/233280*e)},t.getAngle=function(t,e){return Math.atan((e.y-t.y)/(e.x-t.x))},t.getDistance=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.angleToRadian=function(t){return t*Math.PI/180},t.thousandBitSeparator=function(t){return(t+"").replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")},t.thousandToNumber=function(t){return 0==t.length?"0":t.replace(/\,/g,"")},t}();i.default=n,cc._RF.pop()},{}],NativeServiceUtils:[function(t,e,i){"use strict";cc._RF.push(e,"4465btYV55PeLvs2qmaN/cQ","NativeServiceUtils"),Object.defineProperty(i,"__esModule",{value:!0}),i.NativeServiceUtils=void 0;var n=t("./LogUtil"),o=cc._decorator,s=(o.ccclass,o.property,function(){function t(){}return t.fetchGameRoleInfo=function(){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)n.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","onFetchUserInfo:","\u83b7\u53d6\u73a9\u5bb6\u4fe1\u606f");else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){n.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onFetchUserInfo","(Ljava/lang/String;)V","\u83b7\u53d6\u73a9\u5bb6\u4fe1\u606f");cc.log("\u5b89\u5353 \u5e73\u53f0:",t)}},t.fetchInviteCode=function(){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)n.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","onFetchInviteCode:","\u5c1d\u8bd5\u83b7\u53d6\u73a9\u5bb6\u9080\u8bf7\u7801");else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){n.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onFetchInviteCode","(Ljava/lang/String;)V","\u5c1d\u8bd5\u83b7\u53d6\u73a9\u5bb6\u9080\u8bf7\u7801");cc.log("\u5b89\u5353 \u5e73\u53f0:",t)}},t.exitCocosForJS=function(){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)n.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","exitCocosForJS:","\u79bb\u5f00\u6e38\u620f");else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){n.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitCocosForJS","(Ljava/lang/String;)V","\u79bb\u5f00\u6e38\u620f");cc.log("\u5b89\u5353 \u5e73\u53f0:",t)}},t.fetchNetworkStatusCode=function(){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)n.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","onFetchNetworkStatus:","\u5c1d\u8bd5\u83b7\u53d6\u73a9\u5bb6\u7f51\u7edc\u72b6\u6001");else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){n.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onFetchNetworkStatus","(Ljava/lang/String;)V","\u5c1d\u8bd5\u83b7\u53d6\u73a9\u5bb6\u7f51\u7edc\u72b6\u6001");cc.log("\u5b89\u5353 \u5e73\u53f0:",t)}},t.fetchvibrationEffect=function(){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)n.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","onFetchvibrationEffect:","500");else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){n.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onFetchvibrationEffect","(I)V",500);cc.log("\u5b89\u5353 \u5e73\u53f0:",t)}},t.fetchSaveImageToAlbum=function(t){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)n.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","onFetchSaveImageToAlbum:",t);else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){n.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onFetchSaveImageToAlbum","(Ljava/lang/String;)V",t);cc.log("\u5b89\u5353 \u5e73\u53f0:",e)}},t}());i.NativeServiceUtils=s,cc._RF.pop()},{"./LogUtil":"LogUtil"}],Native:[function(t,e,i){"use strict";cc._RF.push(e,"e7368uHq0pNJY/2d5zJRZKO","Native");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.Native=i.AndrodSign=void 0;var o,s=t("../Cores/EventManager");(function(t){t.Void="V",t.String="Ljava/lang/String;",t.Boolean="Z",t.Float="F",t.Double="D",t.Int="I"})(o=i.AndrodSign||(i.AndrodSign={}));var a=function(){function t(){}return t.callback=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=this.cbs[t];n?(delete this.cbs[t],n.apply(void 0,e)):cc.log("no func ",t)},t._newCB=function(t){this.cbIdx++;var e=""+this.cbIdx;return this.cbs[e]=t,e},t.getStr=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return this.callWithPackage.apply(this,n([this.defaultPackage,t,e,o.String],i))},t.call=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.callWithPackage.apply(this,n([this.defaultPackage,this.defaultClass,t,o.Void],e))},t.callClass=function(t,e){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.callWithPackage.apply(this,n([this.defaultPackage,t,e,o.Void],i))},t.callWithReturnType=function(t,e,i){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.callWithPackage.apply(this,n([this.defaultPackage,t,e,i],o))},t.callWithPackage=function(t,e,i,s){for(var a,r,l=[],u=4;u<arguments.length;u++)l[u-4]=arguments[u];var c=[];if(cc.log("clazz:",e),cc.log("method:",i),cc.sys.os==cc.sys.OS_ANDROID){for(var h="",d=0;d<l.length;d++)switch(typeof(f=l[d])){case"boolean":h+=o.Boolean,c.push(f+"");break;case"string":h+=o.String,c.push(f);break;case"number":h+=o.Float,c.push(f);break;case"function":h+=o.String,c.push(this._newCB(f))}return(a=jsb.reflection).callStaticMethod.apply(a,n([t+e,i,"("+h+")"+s],c))}if(cc.sys.os==cc.sys.OS_IOS){for(d=0;d<l.length;d++){var f;"function"==typeof(f=l[d])?c.push(this._newCB(f)):c.push(f),i+=0==d?":":"arg"+d+":"}return(r=jsb.reflection).callStaticMethod.apply(r,n([e,i],c))}},t.onWxShareResultCallback=function(t){console.log("\u6536\u5230\u5206\u4eab\u7ed3\u679c\u56de\u8c03:",t),s.default.emit("onWxShareResultCallback",t)},t.onJoinGameByAuthToken=function(t,e){console.log("token:",t),console.log("userId:",e),s.default.emit("onJoinGameByAuthToken",t,e)},t.onNetworkStatusCallback=function(t){console.log("\u6536\u5230\u7f51\u7edc\u72b6\u6001\u56de\u8c03:",t),s.default.emit("onNetworkStatusCallback",t)},t.cbIdx=0,t.cbs={},t.defaultClass="Native",t.defaultPackage="com/cocos2dx/javascript/",t}();i.Native=a,cc.native=a,cc._RF.pop()},{"../Cores/EventManager":"EventManager"}],ObjectUtil:[function(t,e,i){"use strict";cc._RF.push(e,"f5bd0GmpYZJA7Kg2IkfssrX","ObjectUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},t.deepCopy=function(t){if(null==t||"object"!=typeof t)return t;var e=null;if(t instanceof Date)return(e=new Date).setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var i=0,n=t.length;i<n;i++)e[i]=this.deepCopy(t[i]);return e}if(t instanceof Object){for(var o in e={},t)t.hasOwnProperty(o)&&(e[o]=this.deepCopy(t[o]));return e}console.warn("\u4e0d\u652f\u6301\u7684\u7c7b\u578b\uff1a"+e)},t.copy=function(t){return JSON.parse(JSON.stringify(t))},t}();i.default=n,cc._RF.pop()},{}],PromiseUtil:[function(t,e,i){"use strict";cc._RF.push(e,"4cddcofxvpEprD6sK93CpdM","PromiseUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.wait=function(t){return new Promise(function(e){return cc.Canvas.instance.scheduleOnce(e,t)})},t}();i.default=n,cc._RF.pop()},{}],RaisesVo:[function(t,e,i){"use strict";cc._RF.push(e,"578d0q8mTtCMIzaKJ8xcbo5","RaisesVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.RaisesVo=void 0;var n=function(){function t(){}return t.convert=function(e,i){var n=new t;return n.isRaises=e,n.depict=i,n},t}();i.RaisesVo=n,cc._RF.pop()},{}],RegexUtil:[function(t,e,i){"use strict";cc._RF.push(e,"9cd96ucOa9DFY4YmZDcVptY","RegexUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.isDWORD=function(t){return/[^\x00-\xff]/.test(t)},t}();i.default=n,cc._RF.pop()},{}],RequestBuy:[function(t,e,i){"use strict";cc._RF.push(e,"3faa6Ee+t5Ax7ZhgR5THsD0","RequestBuy"),Object.defineProperty(i,"__esModule",{value:!0}),i.RequestBuy=void 0;i.RequestBuy=function(){},cc._RF.pop()},{}],RequestCmdEnum:[function(t,e,i){"use strict";cc._RF.push(e,"c16fasSV1hO15RxTa1XeIwj","RequestCmdEnum"),Object.defineProperty(i,"__esModule",{value:!0}),i.RequestCmdEnum=void 0,function(t){t[t.start=0]="start",t[t.roomInfo=1]="roomInfo",t[t.dice=2]="dice",t[t.selectChancel=3]="selectChancel",t[t.stockDeal=4]="stockDeal",t[t.futuresDeal=5]="futuresDeal",t[t.houseBuy=6]="houseBuy",t[t.companyBuy=7]="companyBuy",t[t.equityBuy=8]="equityBuy",t[t.articleBuy=9]="articleBuy",t[t.speculateBuy=10]="speculateBuy",t[t.houseSell=11]="houseSell",t[t.companySell=12]="companySell",t[t.equitySell=13]="equitySell",t[t.articleSell=14]="articleSell",t[t.skillBuy=15]="skillBuy",t[t.lifeIncidentBuy=16]="lifeIncidentBuy",t[t.bankLoan=17]="bankLoan",t[t.abandon=18]="abandon",t[t.auction=19]="auction",t[t.auctionBid=20]="auctionBid",t[t.auctionAbandon=21]="auctionAbandon",t[t.ownerOnline=101]="ownerOnline"}(i.RequestCmdEnum||(i.RequestCmdEnum={})),cc._RF.pop()},{}],ResponseCmdEnum:[function(t,e,i){"use strict";cc._RF.push(e,"843d6P8ua1B2ZbZ0KcIfKQj","ResponseCmdEnum"),Object.defineProperty(i,"__esModule",{value:!0}),i.ResponseCmdEnum=void 0,function(t){t[t.start=0]="start",t[t.roomInfo=1]="roomInfo",t[t.dice=2]="dice",t[t.selectChancel=3]="selectChancel",t[t.stockDeal=4]="stockDeal",t[t.futuresDeal=5]="futuresDeal",t[t.houseBuy=6]="houseBuy",t[t.companyBuy=7]="companyBuy",t[t.equityBuy=8]="equityBuy",t[t.articleBuy=9]="articleBuy",t[t.speculateBuy=10]="speculateBuy",t[t.houseSell=11]="houseSell",t[t.companySell=12]="companySell",t[t.equitySell=13]="equitySell",t[t.articleSell=14]="articleSell",t[t.skillBuy=15]="skillBuy",t[t.lifeIncidentBuy=16]="lifeIncidentBuy",t[t.bankLoan=17]="bankLoan",t[t.abandon=18]="abandon",t[t.auction=19]="auction",t[t.auctionBid=20]="auctionBid",t[t.auctionAbandon=21]="auctionAbandon"}(i.ResponseCmdEnum||(i.ResponseCmdEnum={})),cc._RF.pop()},{}],RetrospectVo:[function(t,e,i){"use strict";cc._RF.push(e,"83265PxhAhAJaZbBMsQeih5","RetrospectVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.RetrospectLogDetailVo=i.RetrospectLogVo=i.RetrospectVo=void 0;i.RetrospectVo=function(){this.status=0,this.boutCount=0,this.age=0,this.libertyRate=0,this.ranking=0,this.buyCount=0,this.sellCount=0,this.episodeCount=0,this.childrenCount=0,this.raisesCount=0,this.skillCount=0,this.loseCount=0,this.gameFlowList=[]};i.RetrospectLogVo=function(){this.boutCount=0,this.age=0,this.flowDetailList=[]};i.RetrospectLogDetailVo=function(){this.type=0,this.payType=0},cc._RF.pop()},{}],Retrospect:[function(t,e,i){"use strict";cc._RF.push(e,"05122k3dgpEDKceNFSjrSDV","Retrospect");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.GameRetrospectRow=i.GameRetrospectSection=i.GameRetrospectAssetView=i.GameRetrospectUserView=void 0;var a=t("../../Common/GameServerUtil"),r=t("../../Common/Global"),l=t("./Game"),u=t("../Common/Toast"),c=t("../../Common/LogUtil"),h=cc._decorator,d=h.ccclass,f=(h.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._retrospectVo=null,e._width=0,e._height=0,e}var i;return o(e,t),i=e,e.prototype.onLoad=function(){fgui.UIObjectFactory.setExtension("ui://Game/GameRetrospectUserView",m),fgui.UIObjectFactory.setExtension("ui://Game/GameRetrospectAssetView",p),fgui.UIObjectFactory.setExtension("ui://Game/GameRetrospectRow",g),fgui.UIObjectFactory.setExtension("ui://Game/GameRetrospectSection",_),fgui.UIPackage.loadPackage("UI/Game",this.onUILoaded.bind(this))},e.prototype.onUILoaded=function(){this._view=fgui.UIPackage.createObject("Game","GameRetrospect").asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this._mainController=this._view.getController("gameStatus"),this._userView=this._view.getChild("n2").asCom,this._assetView=this._view.getChild("n9").asCom;var t=this;this._view.getChild("n4").onClick(function(){c.default.log("\u79bb\u5f00\u9009\u62e9\u89d2\u8272\u9875\u9762"),t.loadRoomScene(l.default)},this),a.GameServerUtil.fetchServiceCareer(r.default.gameVoData.bizRoomId,r.default.retrospectUserInfo.openId,function(e){t._retrospectVo=e,t._mainController.selectedIndex=t._retrospectVo.status,t.createUI(),t._userView.changeData(t._retrospectVo),t._assetView.changeData(t._retrospectVo)},function(t){u.default.show(t||"\u83b7\u53d6\u751f\u6daf\u8be6\u60c5\u5931\u8d25")})},e.prototype.createUI=function(){this._roleList=this._view.getChild("n11").asList,this._roleList.removeChildrenToPool();var t=this._retrospectVo.gameFlowList,e=this.calculateViewHeight(t);this._view.getChild("n0").asGraph.setSize(this._view.width,2*e);var i=this.calculateBottmoViewHeight(t);this._view.getChild("n10").asGraph.setSize(this._view.width-60,2*i);var n=this.calculateListHeight(t);this._roleList.setSize(this._view.width-60,2*n),this.createList(t),this._game_controller=this._view.getController("gameStatus"),this._game_controller.selectedIndex=this._retrospectVo.status,cc.director.once(cc.Director.EVENT_AFTER_DRAW,function(){})},e.prototype.createList=function(t){var e,i;if(null!=t&&null!=t)for(var n=t.length,o=0;o<n;o++){var s=t[o],a=this._roleList.addItemFromPool("ui://Game/GameRetrospectSection").asCom;a.setTitle((null!==(e=s.age)&&void 0!==e?e:0)+"\u5c81"),0==o?a.setMode(0):o<n-1&&o>0?a.setMode(1):null==s.flowDetailList||0==s.flowDetailList.length?a.setMode(2):a.setMode(1);for(var r=0;r<s.flowDetailList.length;r++){var l=s.flowDetailList[r],u=this._roleList.addItemFromPool("ui://Game/GameRetrospectRow").asCom;c.default.log("rowsItem:",u),u.setTitle(l.title),u.setDesc(null!==(i=l.depict)&&void 0!==i?i:""),u.setDescVisible(!0),0==l.payType?u.setColor(cc.color(243,86,178)):1==l.payType?u.setColor(cc.color(235,113,87)):2==l.payType&&u.setColor(cc.color(95,209,91))}}},e.prototype.calculateViewHeight=function(t){var e=this.calculateBottmoViewHeight(t);return i.topHeight+e},e.prototype.calculateBottmoViewHeight=function(t){return 130+this.calculateListHeight(t)},e.prototype.calculateListHeight=function(t){for(var e=30,i=0;i<t.length;i++){e+=35;for(var n=t[i],o=0;o<n.flowDetailList.length;o++)e+=25}return e},e.prototype.loadRoomScene=function(t){this.getComponent(t),this.destroy()},e.prototype.onDestroy=function(){this._view.dispose()},e.prototype.initScreenShot=function(){var t=this,e=this.getComponent(cc.Camera);e||(e=this.addComponent(cc.Camera)),this.camera=e,this.camera.enabled=!0,this.schedule(function(){c.default.log("---------");var e=t.initImage();t.createCanvas(e),t.saveFile(e),t.camera.enabled=!1},1,0)},e.prototype.initImage=function(){var t=new cc.RenderTexture;return t.initWithSize(cc.visibleRect.width,cc.visibleRect.height,null),this.camera.targetTexture=t,this._texture=t,this._texture.readPixels(),this._width=this._texture.width,this._height=this._texture.height,this.filpYImage(this,this._width,this._height)},e.prototype.createCanvas=function(t){var e=new cc.Texture2D;e.initWithData(t,32,this._width,this._height);var i=new cc.SpriteFrame;i.setTexture(e);var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,n.zIndex=cc.macro.MAX_ZINDEX,n.parent=cc.director.getScene();var o=cc.winSize.width,s=cc.winSize.height;n.x=o/2,n.y=s/2,n.on(cc.Node.EventType.TOUCH_START,function(){n.parent=null,n.destroy()}),this.captureAction(n,o,s)},e.prototype.saveFile=function(){},e.prototype.filpYImage=function(t,e,i){for(var n=new Uint8Array(e*i*4),o=4*e,s=0;s<i;s++)for(var a=(i-1-s)*e*4,r=s*e*4,l=0;l<o;l++)n[r+l]=t[a+l];return n},e.prototype.captureAction=function(t,e,i){var n=cc.scaleTo(1,.3),o=cc.v2(e-e/6,i/4),s=cc.moveTo(1,o),a=cc.spawn(n,s);t.runAction(a);var r=cc.blink(.1,1);this.node.runAction(r)},e.topHeight=482,e.bottomHeight=164,i=s([d],e)}(cc.Component));i.default=f;var m=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){var t=this.getChild("n8").asCom;this._roleImg=t.getChild("n0").asLoader,this._nicknameLab=this.getChild("n9").asLabel,this._roleNameLab=this.getChild("n10").asLabel,this._rankLab=this.getChild("n11").asLabel,this._freeLab=this.getChild("n12").asLabel,this._assetLab=this.getChild("n13").asLabel,this._month_incomeLab=this.getChild("n15").asLabel,this._month_passive_incomeLab=this.getChild("n17").asLabel,this._month_expandLab=this.getChild("n19").asLabel,this._game_controller=this.getController("gameStatus")},e.prototype.changeData=function(t){var e,i,n,o,s,a,l;this._roleImg.url=null!==(e=t.roleFaceUrl)&&void 0!==e?e:"",this._rankLab.text="\u7b2c"+(null!==(i=t.ranking)&&void 0!==i?i:0)+"\u540d",this._roleNameLab.text=t.roleName,this._freeLab.text="\u8d22\u52a1\u81ea\u7531\u5ea6"+(null!==(n=t.libertyRate)&&void 0!==n?n:0),this._assetLab.text=null!==(o=t.netAsset)&&void 0!==o?o:"0",this._month_incomeLab.text=null!==(s=t.monthTotalIncome)&&void 0!==s?s:"0",this._month_passive_incomeLab.text=null!==(a=t.monthPassivityIncome)&&void 0!==a?a:"0",this._month_expandLab.text=null!==(l=t.monthExpend)&&void 0!==l?l:"0",this._nicknameLab.text=r.default.retrospectUserInfo.nickname,this._roleImg.url=r.default.retrospectUserInfo.faceUrl,this._game_controller.selectedIndex=t.status},e}(fgui.GComponent);i.GameRetrospectUserView=m;var p=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._buy_asset_Lab=this.getChild("n4").asLabel,this._total_buy_asset_Lab=this.getChild("n6").asLabel,this._sale_asset_Lab=this.getChild("n5").asLabel,this._total_sale_asset_Lab=this.getChild("n8").asLabel,this._life_Lab=this.getChild("n11").asLabel,this._child_Lab=this.getChild("n14").asLabel,this._raise_Lab=this.getChild("n17").asLabel,this._lose_lab=this.getChild("n20").asLabel,this._skill_lab=this.getChild("n23").asLabel},e.prototype.changeData=function(t){var e,i,n,o,s,a,r,l,u;this._total_buy_asset_Lab.text="\u603b\u4ef7\u503c "+(null!==(e=t.buyTotalPrice)&&void 0!==e?e:0),this._buy_asset_Lab.text="\u4e70\u5165\u8d44\u4ea7 "+(null!==(i=t.buyCount)&&void 0!==i?i:0)+"\u4e2a",this._total_sale_asset_Lab.text="\u83b7\u5229 "+(null!==(n=t.sellTotalPrice)&&void 0!==n?n:0),this._sale_asset_Lab.text="\u5356\u51fa\u8d44\u4ea7 "+(null!==(o=t.sellCount)&&void 0!==o?o:0)+"\u4e2a",this._life_Lab.text=""+(null!==(s=t.episodeCount)&&void 0!==s?s:0),this._child_Lab.text=""+(null!==(a=t.childrenCount)&&void 0!==a?a:0),this._raise_Lab.text=""+(null!==(r=t.raisesCount)&&void 0!==r?r:0),this._lose_lab.text=""+(null!==(l=t.loseCount)&&void 0!==l?l:0),this._skill_lab.text=""+(null!==(u=t.skillCount)&&void 0!==u?u:0)},e}(fgui.GComponent);i.GameRetrospectAssetView=p;var _=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._titleLab=this.getChild("n1").asLabel,this._mainController=this.getController("c1")},e.prototype.setTitle=function(t){this._titleLab.text=t},e.prototype.setMode=function(t){this._mainController.selectedIndex=t},e}(fgui.GComponent);i.GameRetrospectSection=_;var g=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onConstruct=function(){this._titleLab=this.getChild("n2").asLabel,this._descLab=this.getChild("n3").asLabel,this._bjGraph=this.getChild("n1").asGraph},e.prototype.setTitle=function(t){this._titleLab.text=t},e.prototype.setDesc=function(t){this._descLab.text=t},e.prototype.setDescVisible=function(t){this._descLab.visible=t},e.prototype.setColor=function(t){this._bjGraph.color=t},e}(fgui.GComponent);i.GameRetrospectRow=g,cc._RF.pop()},{"../../Common/GameServerUtil":"GameServerUtil","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../Common/Toast":"Toast","./Game":"Game"}],RoleStore:[function(t,e,i){"use strict";cc._RF.push(e,"262bdZS20RDTYMzJMm7CIMX","RoleStore");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a},a=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,s){function a(t){try{l(n.next(t))}catch(e){s(e)}}function r(t){try{l(n.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,r)}l((n=n.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var i,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function r(t){return function(e){return l([t,e])}}function l(s){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.RoleStoreWindow=i.RoleRosComponment=void 0;var l=t("./Main"),u=t("./TeamGame"),c=t("../../Common/Global"),h=t("../../Common/Util"),d=t("../Common/Toast"),f=t("../../Common/GameServerUtil"),m=t("../Windows/GameLoadingWindow"),p=t("../../Common/GameUtils"),_=t("../../Common/LogUtil"),g=t("../Common/GameHudView"),y=cc._decorator,C=y.ccclass,b=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastTime=c.default.confSelectRoleTime,e._isTounchAble=!0,e._loadingWindow=new m.GameLoadingWindow,e}return o(e,t),e.prototype.onLoad=function(){fgui.UIPackage.loadPackage("UI/RoleStore",this.onUILoaded.bind(this))},e.prototype.onUILoaded=function(){fgui.UIObjectFactory.setExtension("ui://RoleStore/RoleRosComponment",v),this._view=fgui.UIPackage.createObject("RoleStore","Main").asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this._roleController=this._view.getController("c1"),this._roleController.selectedIndex=1,this._progress=this._view.getChild("n7").asCom.getChild("n1").asProgress,this._descLab=this._view.getChild("n7").asCom.getChild("n2").asLabel,this._timeLabl=this._view.getChild("n6").asLabel,this._view.getChild("n4").onClick(this.onChooseBackClick,this),this._roleList=this._view.getChild("n1").asList,this._roleList.removeChildrenToPool(),this._descLab.text="\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210",this._roleController.selectedIndex=0,this.loadNetwork(),this.initListener(),c.default.client.getAvailableRooms({offset:0,limit:20,sync:!1}).then(function(t){_.default.log("\u5b58\u5728\u7684\u623f\u95f4\u96c6\u5408\uff1a",t)})},e.prototype.onChooseBackClick=function(){_.default.log("\u79bb\u5f00\u9009\u62e9\u89d2\u8272\u9875\u9762"),this.loadRoomScene(l.default)},e.prototype.loadRoomScene=function(t){fgui.GRoot.inst.closeAllWindows(),this.stopTimer(),this.addComponent(t),this.destroy()},e.prototype.handleFailure=function(){var t=this;d.default.show("\u89d2\u8272\u5217\u8868\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),t.scheduleOnce(function(){t.loadRoomScene(l.default)},2)},e.prototype.startCountTime=function(){var t=this,e=this;e._timer=setInterval(function(){e.lastTime>0?t.countTime():(_.default.log("\u64cd\u4f5c\u65f6\u95f4\u7ed3\u675f"),clearInterval(e._timer),e.loadRoomScene(l.default))},1e3)},e.prototype.countTime=function(){this.lastTime--,this._timeLabl.text=this.lastTime+"s"},e.prototype.stopTimer=function(){clearInterval(this._timer)},e.prototype.loadNetwork=function(){var t=this,e=new m.GameLoadingWindow;e.show(),f.GameServerUtil.fetchServiceRoleList(function(i){e.hide(),t._roles=i,t.renderListItem(),t.startCountTime()},function(){e.hide(),t.handleFailure()})},e.prototype.renderListItem=function(){for(var t=this,e=this._roles.length,i=0;i<e;i++){var n=this._roles[i],o=this._roleList.addItemFromPool().asCom,s=n.roleList,a=264*Math.ceil(s.length/3),r=100+a;o.setSize(o.width,r),o.refreList(n.roleList,n.financeGrade,n.title,a),o.onSubmitBlock=function(e){return t.onSelectRole(e)}}},e.prototype.onSelectRole=function(t){var e=this,i=new w;i.showRole(t),i.show(),i.chooseRoleForStart=function(t){_.default.log("\u9009\u4e2d\u7684\u89d2\u8272\uff1a",t),c.default.roleInfo=t,e.prepareJoinRoom()}},e.prototype.onDestroy=function(){this._view.dispose()},e.prototype.prepareJoinRoom=function(){_.default.log("\u623f\u95f4:",c.default.client),this._loadingWindow.show(),2==c.default.game_mode.roomType?c.default.roomId?(_.default.log("\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4ID\uff1a",c.default.roomId),this.joinRoom(c.default.roomId)):this.createRoom():1==c.default.game_mode.roomType&&(this.matchRoom(),_.default.log("\u5339\u914d\u623f\u95f4"))},e.prototype.createRoom=function(){_.default.log("\u6b63\u5728\u521b\u5efa\u623f\u95f4");var t={customPlayerStatus:1,customPlayerProperties:p.GameUtils.createCustomProfile()},e={roomName:"\u73b0\u91d1\u6d41\u6c99\u76d8-\u597d\u53cbPK",roomType:"10",maxPlayers:4,isPrivate:1,customRoomProperties:JSON.stringify({game_type:c.default.game_mode.roomType,grade_type:c.default.game_mode.gradeType}),matchParams:{level:"10",matchRule2:c.default.matchRule}},i=this;c.default.client.createRoom(e,t).then(function(t){i._loadingWindow.hide(),_.default.log("\u521b\u5efa\u623f\u95f4\u6210\u529f\uff0c\u623f\u95f4ID\uff1a",t),c.default.room=t,c.default.player=t.player,i.loadRoomScene(u.default)}).catch(function(t){i._loadingWindow.hide(),_.default.log("\u521b\u5efa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+h.errorMessage(t)),g.GameHudView.show("\u63d0\u793a","\u521b\u5efa\u623f\u95f4\u623f\u95f4\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff5e",1,function(){return i.loadRoomScene(l.default)})})},e.prototype.joinRoom=function(t){return a(this,void 0,void 0,function(){var e,i;return r(this,function(n){switch(n.label){case 0:return e=this,t?(_.default.log("\u6b63\u5728\u52a0\u5165\u623f\u95f4\uff0c\u623f\u95f4ID\uff1a"+t),i={customPlayerStatus:0,customPlayerProperties:p.GameUtils.createCustomProfile()},[4,c.default.client.joinRoom(t,i).then(function(t){e._loadingWindow.hide(),_.default.log("\u52a0\u5165\u623f\u95f4\u6210\u529f"),c.default.room=t,c.default.player=t.player,e.loadRoomScene(u.default)}).catch(function(t){e._loadingWindow.hide(),g.GameHudView.show("\u52a0\u5165\u623f\u95f4\u5931\u8d25",h.errorMessage(t),1,function(){return e.loadRoomScene(l.default)})})]):[2,_.default.log("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u623f\u95f4ID")];case 1:return n.sent(),[2]}})})},e.prototype.initListener=function(){var t=this;c.default.client.onMatch.clear(),c.default.client.onMatch(function(e){return t.onMatch(e)})},e.prototype.onMatch=function(t){var e=this;this._loadingWindow.hide(),0==t.rtnCode?(_.default.log("\u5728\u7ebf\u5339\u914d\u6210\u529f:",t.room),c.default.room=t.room,c.default.player=t.room.player,this.loadRoomScene(u.default)):(_.default.log("\u5728\u7ebf\u5339\u914d\u5931\u8d25",h.errorMessage(t)),this._loadingWindow.hide(),g.GameHudView.show("\u63d0\u793a","\u5728\u7ebf\u5339\u914d\u5931\u8d25",1,function(){return e.loadRoomScene(l.default)}))},e.prototype.matchOnline=function(){return a(this,void 0,void 0,function(){var t,e,i;return r(this,function(){return t=this,_.default.log("\u597d\u53cb\u5339\u914d"),e={playerInfo:{playerId:c.default.playerId,matchParams:{level:2}},teamInfo:{matchParams:{teamNumber:1}},matchCode:"94d0dba693c340c1ba01c6772707599c"},i={customPlayerStatus:0,customPlayerProperties:p.GameUtils.createCustomProfile()},c.default.client.matchPlayer(e,i).then(function(){_.default.log("\u5f00\u59cb\u5728\u7ebf\u5339\u914d")}).catch(function(e){_.default.log("\u5f00\u59cb\u5728\u7ebf\u5339\u914d\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+JSON.stringify(e)),t._loadingWindow.hide(),g.GameHudView.show("\u63d0\u793a","\u5728\u7ebf\u5339\u914d\u5931\u8d25",1,function(){return t.loadRoomScene(l.default)})}),[2]})})},e.prototype.matchRoom=function(){return a(this,void 0,void 0,function(){var t,e,i;return r(this,function(){return t=this,_.default.log("\u623f\u95f4\u5339\u914d:",c.default.playerId),e={matchParams:{level:"10",matchRule2:c.default.matchRule},roomType:"10",customRoomProperties:JSON.stringify({game_type:c.default.game_mode.roomType,grade_type:c.default.game_mode.gradeType}),maxPlayers:4},i={customPlayerStatus:0,customPlayerProperties:p.GameUtils.createCustomProfile()},c.default.client.matchRoom(e,i).then(function(e){c.default.room=e,c.default.player=e.player,_.default.log("\u968f\u673a\u5339\u914d\u6210\u529f\uff0c\u623f\u95f4\u4fe1\u606f\uff1a",e),t._loadingWindow.hide(),t.loadRoomScene(u.default)}).catch(function(e){t._loadingWindow.hide(),_.default.log("\u968f\u673a\u5339\u914d\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+h.errorMessage(e)),g.GameHudView.show("\u63d0\u793a","\u968f\u673a\u5339\u914d\u5931\u8d25",1,function(){return t.loadRoomScene(l.default)})}),[2]})})},s([C],e)}(cc.Component));i.default=b;var v=function(t){function e(){var e=t.call(this)||this;return e._listArray=[],e._mode=0,e.onSubmitBlock=null,e}return o(e,t),e.prototype.onConstruct=function(){this._nameLab=this.getChild("n1").asLabel,this._list=this.getChild("n2").asList,this._levelController=this.getController("RoleLevel")},e.prototype.refreList=function(t,e,i,n){void 0===t&&(t=[]),this._mode=e,this._listArray=t,this._nameLab.text=i,this._list.setSize(this.width,n),this.renderListItem(),this._levelController.selectedIndex=0==e?9:e>0&&e<=7?e:-2==e?8:9},e.prototype.renderListItem=function(){this._list.removeChildrenToPool();for(var t=this._listArray.length,e=0;e<t;e++){var i=this._listArray[e],n=this._list.addItemFromPool().asCom;n.getChild("n1").asCom.getChild("n0").asLoader.url=i.faceUrl1,n.getChild("n0").asLabel.text=i.name1,n.getController("isUnLock").selectedIndex=i.isUnlock,this._list.on(fgui.Event.CLICK_ITEM,this.onClickItem,this)}},e.prototype.onClickItem=function(t){var e=this._list.getChildIndex(t),i=this._list.childIndexToItemIndex(e),n=this._listArray[i];this.onSubmitBlock(n)},e}(fgui.GComponent);i.RoleRosComponment=v;var w=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.onInit=function(){this.contentPane=fgui.UIPackage.createObject("RoleStore","RoleStoreWindow").asCom,this.makeFullScreen(),this.center(),this.closeButton=this.contentPane.getChild("n3"),this.contentPane.getChild("n4").onClick(this.onSelect,this),this._roleImg=this.contentPane.getChild("n2").asLoader,this._modeController=this.contentPane.getController("isCanUse")},e.prototype.onShown=function(){this._roleImg.url=this._object.faceUrl3,this._modeController.selectedIndex=this._object.isUnlock},e.prototype.onSelect=function(){this.hide(),this.chooseRoleForStart(this._object)},e.prototype.showRole=function(t){this._object=t},e}(fgui.Window);i.RoleStoreWindow=w,cc._RF.pop()},{"../../Common/GameServerUtil":"GameServerUtil","../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Common/Util":"Util","../Common/GameHudView":"GameHudView","../Common/Toast":"Toast","../Windows/GameLoadingWindow":"GameLoadingWindow","./Main":"Main","./TeamGame":"TeamGame"}],RoomEventConstant:[function(t,e,i){"use strict";cc._RF.push(e,"0b648VZ7hdH448a5MYdqCec","RoomEventConstant"),Object.defineProperty(i,"__esModule",{value:!0}),i.RoomEventConstant=void 0;var n=function(){function t(){}return t.EMIT_PlayerRoomOut="onGamePlayerOutRoom",t.EMIT_BankLoan="onBankLan",t}();i.RoomEventConstant=n,cc._RF.pop()},{}],RoomInfo:[function(t,e,i){"use strict";cc._RF.push(e,"4d55b9benJAYaZMT3CYX0cz","RoomInfo"),Object.defineProperty(i,"__esModule",{value:!0}),i.RoomInfo=void 0;i.RoomInfo=function(){this.status=0,this.boutCount=1,this.age=0,this.userIdOfflineList=[],this.userInfoList=[]},cc._RF.pop()},{}],SceneNavigator:[function(t,e,i){"use strict";cc._RF.push(e,"3bfdcCBM4pIAKRRclt5l3db","SceneNavigator"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return Object.defineProperty(t,"history",{get:function(){return this._history},enumerable:!1,configurable:!0}),Object.defineProperty(t,"param",{get:function(){return this._param},enumerable:!1,configurable:!0}),Object.defineProperty(t,"curScene",{get:function(){return this._curScene},enumerable:!1,configurable:!0}),t.setHome=function(t){this._history=[t]},t.goHome=function(t){var e=this;this._param=null;var i=this._history[0];cc.director.loadScene(i,function(){e._history=[i],e._curScene=i,e._param=t})},t.go=function(t,e){var i=this;this._param=null,cc.director.loadScene(t,function(){i._history.push(t),i._curScene=t,i._param=e})},t.back=function(t){var e=this;if(this._history.length>1){this._param=null;var i=this._history[this._history.length-2];cc.director.loadScene(i,function(){e._history.pop(),e._curScene=i,e._param=t})}},t._history=[],t._param=null,t._curScene=null,t}();i.default=n,cc._RF.pop()},{}],ScreenShotNode:[function(t,e,i){"use strict";cc._RF.push(e,"248ack4PE5JyatXdNHVvmhA","ScreenShotNode");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return o(e,t),i=e,e.prototype.onLoad=function(){i._inst=this;var t=this.getComponent(cc.Camera);t||(t=this.addComponent(cc.Camera)),t.enabled=!1;var e=cc.winSize.width,n=cc.winSize.height,o=cc.size(.5*e,.5*n),s=cc.v2(0,0);t.zoomRatio=.5;var a=new cc.RenderTexture;a.initWithSize(o.width,o.height),this.node.setPosition(s),t.targetTexture=a,this._camera=t,this._texture=a,this._sprite=this.getComponent(cc.Sprite)},e.prototype.shot=function(){this._camera.render(void 0);var t=this._texture,e=t.readPixels(),i=t.width,n=t.height,o=document.createElement("canvas"),s=o.getContext("2d");o.width=i,o.height=n;for(var a=4*i,r=0;r<n;r++){for(var l=n-1-r,u=s.createImageData(i,1),c=l*i*4,h=0;h<a;h++)u.data[h]=e[c+h];s.putImageData(u,0,r)}var d=o.toDataURL("image/jpeg");this.showTexture(d),this.downloadImg(d)},e.prototype.showTexture=function(t){if(this._sprite){var e=new Image;e.src=t;var i=this;e.onload=function(){var t=new cc.Texture2D;t.initWithElement(e),t.handleLoadedTexture();var n=new cc.SpriteFrame(t);i._sprite.spriteFrame=n}}else console.warn("Need to add a sprite component")},e.prototype.downloadImg=function(t){var e=t.replace(/^data:image[^;]*/,"data:image/octet-stream");document.location.href=e},e.prototype.shareOnFacebook=function(){},e.take=function(){i._inst.shot()},i=s([r],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],SelectChancelVo:[function(t,e,i){"use strict";cc._RF.push(e,"48ea0qTSWVKNLhXLw4KAEu6","SelectChancelVo");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.SelectChancelVo=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t("./GameVo").GameVo);i.SelectChancelVo=s,cc._RF.pop()},{"./GameVo":"GameVo"}],SkillDto:[function(t,e,i){"use strict";cc._RF.push(e,"24e23NvAJdHwL5XiewQohmr","SkillDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.SkillDto=void 0;i.SkillDto=function(){},cc._RF.pop()},{}],SkillVo:[function(t,e,i){"use strict";cc._RF.push(e,"caaffkrS4RCcYVW9Lc+qm2G","SkillVo"),Object.defineProperty(i,"__esModule",{value:!0}),i.SkillVo=void 0;var n=function(){function t(){}return t.convert=function(e){var i=new t;return i.skill=e,i},t}();i.SkillVo=n,cc._RF.pop()},{}],Skill:[function(t,e,i){"use strict";cc._RF.push(e,"0babdpaEopAy7duem5vsmnM","Skill"),Object.defineProperty(i,"__esModule",{value:!0}),i.Skill=void 0;i.Skill=function(){},cc._RF.pop()},{}],SpeculateBuyVo:[function(t,e,i){"use strict";cc._RF.push(e,"68d3dOY3LBDDJzknvMLKwWY","SpeculateBuyVo");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0}),i.SpeculateBuyVo=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t("./GameVo").GameVo);i.SpeculateBuyVo=s,cc._RF.pop()},{"./GameVo":"GameVo"}],Speculate:[function(t,e,i){"use strict";cc._RF.push(e,"12c49xm5J1PJ5JQ52bqOWdh","Speculate"),Object.defineProperty(i,"__esModule",{value:!0}),i.Speculate=void 0;i.Speculate=function(){},cc._RF.pop()},{}],StockDto:[function(t,e,i){"use strict";cc._RF.push(e,"5b90dnU9KxG0ZmRu9WVU2aw","StockDto"),Object.defineProperty(i,"__esModule",{value:!0}),i.StockDto=void 0;i.StockDto=function(){},cc._RF.pop()},{}],Stock:[function(t,e,i){"use strict";cc._RF.push(e,"ccdd1HZeJ1Hk4JeLwy3TCBn","Stock"),Object.defineProperty(i,"__esModule",{value:!0}),i.Stock=void 0;i.Stock=function(){},cc._RF.pop()},{}],StorageUtil:[function(t,e,i){"use strict";cc._RF.push(e,"fcde3s0KElGJaCE4V6h67rT","StorageUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.set=function(t,e){var i="object"==typeof e?JSON.stringify(e):e;cc.sys.localStorage.setItem(t,i)},t.get=function(t,e){void 0===e&&(e=!0);var i=cc.sys.localStorage.getItem(t);if(null!==i){if(e)try{return JSON.parse(i)}catch(n){return i}return i}return null},t.remove=function(t){cc.sys.localStorage.removeItem(t)},t}();i.default=n,cc._RF.pop()},{}],StoreData:[function(t,e){"use strict";cc._RF.push(e,"c8f77fUggBA/5OZpH1TIkn/","StoreData"),cc._RF.pop()},{}],TeamGame:[function(t,e,i){"use strict";cc._RF.push(e,"baabf0+kVlIfYxMcEwQEl85","TeamGame");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0}),i.TeamGameWaitTimeChildView=i.TeamGameRoleChildView=void 0;var a=t("./Main"),r=t("../../Common/Util"),l=t("../../Common/Global"),u=t("./Game"),c=t("../Common/Toast"),h=t("../../Common/GameUtils"),d=t("../Common/GameHudView"),f=t("../../Common/GameServerUtil"),m=t("../Windows/GameLoadingWindow"),p=t("../../Common/LogUtil"),_=t("../Windows/GameInviteAppView"),g=t("../../Constant/ResponseCmdEnum"),y=cc._decorator,C=y.ccclass,b=(y.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._playerList=[],e._historyPlayerList=[],e.loadingWindow=new m.GameLoadingWindow,e.reConnectCount=0,e.isExit=!1,e}return o(e,t),e.prototype.onLoad=function(){fgui.GRoot.inst.showModalWait(),fgui.UIObjectFactory.setExtension("ui://TeamGame/TeamRoleWidget",v),fgui.UIObjectFactory.setExtension("ui://TeamGame/GamePrepareView",w),fgui.UIPackage.loadPackage("UI/TeamGame",this.onUILoaded.bind(this))},e.prototype.initView=function(){if(l.default.gameUserid=l.default.playerId,l.default.room.ownerId==l.default.playerId){if(this._mainController.selectedIndex=0,2==l.default.game_mode.roomType?(this._changeRoomBtn.visible=!0,this._changeRoomBtn.getController("button").selectedIndex=1,this._name_label.text="\u597d\u53cb\u9080\u8bf7"):(this._changeRoomBtn.visible=!1,this._name_label.text="\u5728\u7ebf\u5339\u914d"),1==l.default.room.player.customStatus)return;p.default.log("\u623f\u4e3b\u51c6\u5907\u72b6\u6001\u4fee\u6539"),this.prepareGame()}else this._mainController.selectedIndex=1,this._changeRoomBtn.visible=!1;2==l.default.game_mode.roomType?this._name_label.text="\u597d\u53cb\u9080\u8bf7":this._name_label.text="\u5728\u7ebf\u5339\u914d"},e.prototype.changeRoomInfo=function(){var t={customRoomProperties:this._customProfile(),isPrivate:2==l.default.game_mode.roomType?1:0};this.changeCustomProperties(t)},e.prototype.changeRoomInfoByOwner=function(t){var e={isPrivate:t?1:0};this.changeCustomProperties(e)},e.prototype._customProfile=function(){var t={status:-1,game_type:l.default.game_mode.roomType,grade_type:l.default.game_mode.gradeType};return JSON.stringify(t)},e.prototype.roomListener=function(){var t=this;cc.game.on(cc.game.EVENT_SHOW,function(){p.default.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0"),t.handleCheckRoomInfo()},this)},e.prototype.handleCheckRoomInfo=function(){var t=this;p.default.log("\u623f\u95f4\u4fe1\u606f:",l.default.room),null!=l.default.room&&null!=l.default.room?this.reConnect():d.GameHudView.show("\u63d0\u793a","\u623f\u95f4\u5df2\u89e3\u6563,\u51c6\u5907\u79bb\u5f00",1,function(){return t.chooseExitScreen(a.default)})},e.prototype.initListener=function(){var t=this;l.default.room.onJoin(function(e){return t.onJoining(e)}),l.default.room.onJoinFailed(function(e){return t.onJoinFailed(e)}),l.default.room.onLeave(function(e){return t.onLeaving(e)}),l.default.room.onDismiss(function(){return t.onDismiss()}),l.default.room.onUpdateCustomStatus(function(e){return t.onUpdateCustomStatus(e)}),l.default.room.onUpdateCustomProperties(function(e){return t.onUpdateCustomProperties(e)}),l.default.room.onDisconnect(function(e){return t.onDisconnect(e)}),l.default.room.onConnect(function(e){return t.onConnect(e)}),l.default.room.onRoomPropertiesChange(function(e){return t.onRoomPropertiesChange(e)}),l.default.room.onRoomPropertiesChangeFailed(function(e){return t.onRoomPropertiesChangeFailed(e)}),l.default.room.onRecvFromServer(function(e){return t.onRecvFromServer(e)}),l.default.room.onRecvFromClient(function(e){return t.onRecvFromClient(e)}),this.roomListener()},e.prototype.onJoining=function(t){if(p.default.log("SDK\u5e7f\u64ad--\u52a0\u5165\u623f\u95f4\uff1a",t.playerId),this.initRoomView(),t.playerId!==l.default.room.playerId){var e=this._historyPlayerList.find(function(e){return e.playerId===t.playerId});if(e){var i=h.GameUtils.fetchCustomProfile(e.customPlayerProperties).nickname;p.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6["+i+"]\u8fdb\u5165\u623f\u95f4"),c.default.show("\u73a9\u5bb6["+i+"]\u8fdb\u5165\u623f\u95f4")}else p.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6"+t.playerId+"\u8fdb\u623f"),c.default.show("\u73a9\u5bb6"+t.playerId+"\u8fdb\u5165\u623f\u95f4")}},e.prototype.onJoinFailed=function(t){p.default.log("SDK\u5e7f\u64ad--\u52a0\u5165\u623f\u95f4\u5931\u8d25",t),this.loadingWindow&&this.loadingWindow.hide()},e.prototype.onLeaving=function(t){p.default.log("SDK\u5e7f\u64ad--\u79bb\u5f00\u623f\u95f4"),this.loadingWindow&&this.loadingWindow.hide();var e=this._historyPlayerList.find(function(e){return e.playerId===t.playerId});if(e){var i=h.GameUtils.fetchCustomProfile(e.customPlayerProperties).nickname;p.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6["+i+"]\u79bb\u5f00\u623f\u95f4"),l.default.playerId!=t.playerId&&c.default.show("\u73a9\u5bb6["+i+"]\u79bb\u5f00\u623f\u95f4")}else p.default.log("\u5e7f\u64ad\uff1a\u73a9\u5bb6"+t.playerId+"\u79bb\u5f00"),l.default.playerId!=t.playerId&&c.default.show("\u73a9\u5bb6"+t.playerId+"\u79bb\u5f00\u623f\u95f4");l.default.room&&l.default.playerId!=t.playerId?this.initRoomView():this.isExit||(this.isExit=!0,this.chooseExitScreen(a.default))},e.prototype.onDismiss=function(){if(l.default.room.ownerId==l.default.playerId)p.default.log("\u5e7f\u64ad\uff1a\u623f\u95f4\u5df2\u89e3\u6563",l.default.room),this.chooseExitScreen(a.default);else{p.default.log("\u5e7f\u64ad\uff1a\u623f\u4e3b\u623f\u95f4\u5df2\u89e3\u6563",l.default.room),c.default.show("\u623f\u4e3b\u5df2\u89e3\u6563\u623f\u95f4");var t=this;this.scheduleOnce(function(){return t.chooseExitScreen(a.default)},2)}this.loadingWindow&&this.loadingWindow.hide()},e.prototype.onStartFrameSync=function(){l.default.state=1,l.default.keyOperate=1,this.chooseExitScreen(u.default)},e.prototype.relogin=function(){},e.prototype.onUpdateCustomStatus=function(t){p.default.log("\u73a9\u5bb6\u72b6\u6001\u66f4\u65b0:",t),t.playerId!=l.default.room.ownerId&&this.initRoomView();var e=l.default.room.players.find(function(e){return e.playerId===t.playerId}),i=h.GameUtils.fetchCustomProfile(e.customPlayerProperties).nickname;1===t.customStatus?p.default.log("\u73a9\u5bb6["+i+"]\u51c6\u5907"):0===t.customStatus&&p.default.log("\u73a9\u5bb6["+i+"]\u53d6\u6d88\u51c6\u5907")},e.prototype.onUpdateCustomProperties=function(t){console.log("\u73a9\u5bb6\u5c5e\u6027\u66f4\u65b0:",t)},e.prototype.onRoomPropertiesChange=function(t){p.default.log("[\u6e38\u620f] \u623f\u4e3b\u4fee\u6539\u623f\u95f4\u4fe1\u606f\u6210\u529f:",t)},e.prototype.onRoomPropertiesChangeFailed=function(t){p.default.log("error:",t)},e.prototype.onDisconnect=function(t){if(p.default.log("\u5f02\u5e38\u65ad\u5f00\u8fde\u63a5:",t),t.playerId===l.default.playerId)c.default.show("\u623f\u95f4\u7f51\u7edc\u5df2\u65ad\u5f00",5),this.reConnect();else{var e=t.playerId,i=this._historyPlayerList.find(function(t){return t.playerId===e});if(i){var n=h.GameUtils.fetchCustomProfile(i.customPlayerProperties).nickname;c.default.show("\u73a9\u5bb6"+n+"\u5df2\u6389\u7ebf",5)}}p.default.log("\u3010\u623f\u95f4\u7f51\u7edc\u72b6\u6001\u3011\uff1a\u623f\u95f4\u7f51\u7edc\u672a\u8fde\u63a5")},e.prototype.onConnect=function(t){p.default.log("\u5efa\u7acb\u4e86\u8fde\u63a5:",t)},e.prototype.reConnect=function(){var t=this,e=this;e.reConnectCount=e.reConnectCount+1,l.default.room.reconnect().then(function(){e.reConnectCount=0,p.default.log("\u73a9\u5bb6\u91cd\u8fde\u6210\u529f")}).catch(function(i){if(p.default.log("error:",JSON.stringify(i)),90002==i.code)t.chooseExitScreen(a.default);else if(91001==i.code)return c.default.show("\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5"),void setTimeout(function(){e.reConnect()},3e3);if(e.reConnectCount>=3)return p.default.log("\u73a9\u5bb6\u91cd\u8fde\u5931\u8d25\uff0c\u79bb\u5f00\u6e38\u620f\u9875\u9762"),void d.GameHudView.show("\u63d0\u793a","\u7f51\u7edc\u91cd\u8fde\u5931\u8d25,\u51c6\u5907\u79bb\u5f00",1,function(){return t.chooseExitScreen(a.default)});p.default.log("\u73a9\u5bb6\u91cd\u8fde\u5931\u8d25\uff0c\u5f00\u542f\u91cd\u8fde:",e.reConnectCount),e.reConnect()})},e.prototype.onRecvFromClient=function(t){t.sendPlayerId==l.default.room.ownerId&&("1"==t.msg?(p.default.log("\u623f\u4e3b\u70b9\u51fb\u5f00\u59cb\u6e38\u620f"),this.loadingWindow.show()):"2"==t.msg&&(p.default.log("\u623f\u4e3b\u6e38\u620f\u8fdb\u5165\u5931\u8d25"),this.loadingWindow.hide()))},e.prototype.startHeart=function(){p.default.log("\u51c6\u5907\u5fc3\u8df3"),this.schedule(this.handleCheckRoomInfo,12,5,3)},e.prototype.stopHeart=function(){p.default.log("\u53d6\u6d88\u5fc3\u8df3"),this.unschedule(this.handleCheckRoomInfo)},e.prototype.onUILoaded=function(){p.default.log("\u5728\u7ebf\u5339\u914d\u9875\u9762"),fgui.GRoot.inst.closeModalWait(),this._view=fgui.UIPackage.createObject("TeamGame","InviteGame").asCom,this._view.makeFullScreen(),fgui.GRoot.inst.addChild(this._view),this._mainController=this._view.getController("pageMode"),this._matchController=this._view.getController("isMatchSuccess"),this._matchController.selectedIndex=1,this._role1=this._view.getChild("n9").asCom,this._role2=this._view.getChild("n10").asCom,this._role3=this._view.getChild("n11").asCom,this._role4=this._view.getChild("n12").asCom,this._name_label=this._view.getChild("n8").asLabel;var t=this._view.getChild("n4").asCom;this._player_count_Label=t.getChild("n3").asLabel,this._game_count_Label=t.getChild("n2").asLabel,this._game_count_Label.text="\u56de\u5408\u6570\uff1a"+l.default.confMaxAge,this._view.getChild("teamExit").onClick(this.onDismissRoomButtonClick,this),this._prepareBtn=this._view.getChild("readyGame").asButton,this._prepareUnBtn=this._view.getChild("readyUnGame").asButton,this._changeRoomBtn=this._view.getChild("changeRoom").asButton,this._matchWaitView=this._view.getChild("matchWait").asCom,this._view.getChild("inviteFriend").onClick(this.onInviteJoinButtonClick,this),this._view.getChild("startGame").onClick(this.onStartGameButtonClick,this),this._view.getChild("inviteAppFriend").onClick(this.onInviteAPPButtonClick,this),this._prepareBtn.onClick(this.onPrepareButtonClick,this),this._prepareUnBtn.onClick(this.onPrepareCancelButtonClick,this),this._changeRoomBtn.onClick(this.onChangeRoomButtonClick,this),this._view.getController("gameTheme").selectedIndex=l.default.theme,this.initView(),this.initListener(),this.onHandleResult()},e.prototype.onHandleResult=function(){var t=this;this._role1.onSubmitResult=function(){},this._role2.onSubmitResult=function(){var e=t._playerList[1];t.showRemovePlayer(e)},this._role3.onSubmitResult=function(){var e=t._playerList[2];t.showRemovePlayer(e)},this._role4.onSubmitResult=function(){var e=t._playerList[3];t.showRemovePlayer(e)}},e.prototype.showRemovePlayer=function(t){var e=this,i=h.GameUtils.fetchCustomProfile(t.customPlayerProperties).nickname;d.GameHudView.show("\u63d0\u793a","\u786e\u5b9a\u8981\u628a"+i+"\u8bf7\u51fa\u623f\u95f4\u5417?",0,function(){return e.removePlayer(t.playerId)})},e.prototype.onInviteAPPButtonClick=function(){if(4!==l.default.room.players.length){if(this._inviteAppView)return this._inviteAppView.show();var t=new _.GameInviteAppView;t.show(),this._inviteAppView=t}else c.default.show("\u623f\u95f4\u73a9\u5bb6\u5df2\u6ee1\uff0c\u65e0\u6cd5\u7ee7\u7eed\u9080\u8bf7")},e.prototype.onInviteJoinButtonClick=function(){if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS)p.default.log("\u540a\u8d77iOS \u5e73\u53f0"),jsb.reflection.callStaticMethod("CocosBridge","exitCocosForWX:",l.default.room.roomId);else if(cc.sys.isNative&&cc.sys.os==cc.sys.OS_ANDROID){p.default.log("\u540a\u8d77\u5b89\u5353 \u5e73\u53f0");var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitCocosForWX","(Ljava/lang/String;)V",l.default.room.roomId);p.default.log("\u5b89\u5353 \u5e73\u53f0:",t)}else c.default.show("web\u7aef\u6682\u4e0d\u652f\u6301")},e.prototype.onStartGameButtonClick=function(){p.default.log("\u5f00\u59cb\u6e38\u620f"),l.default.confMaxPlayer,l.default.room.players.find(function(t){return 1!=t.customPlayerStatus})?c.default.show("\u6709\u73a9\u5bb6\u672a\u51c6\u5907"):this.fetchStartGame()},e.prototype.onDismissRoomButtonClick=function(){var t=this;p.default.log("\u79bb\u5f00pk\u6e38\u620f\u9875\u9762"),1==this._playerList.length?d.GameHudView.show("\u786e\u5b9a\u8981\u89e3\u6563\u623f\u95f4\u5417\uff1f","\u89e3\u6563\u623f\u95f4\u540e\uff0c\u518d\u8fdb\u5165\u9700\u8981\u91cd\u65b0\u521b\u5efa\u623f\u95f4",0,function(){return t.dismissRoom()}):d.GameHudView.show("\u786e\u5b9a\u8981\u9000\u51fa\u623f\u95f4\u5417\uff1f","\u9000\u51fa\u623f\u95f4\u540e\uff0c\u518d\u8fdb\u5165\u9700\u8981\u91cd\u65b0\u521b\u5efa\u623f\u95f4",0,function(){return t.leaveRoom()})},e.prototype.onPrepareButtonClick=function(){this.prepareGame()},e.prototype.onPrepareCancelButtonClick=function(){this.prepareCancelGame()},e.prototype.onChangeRoomButtonClick=function(){0==this._changeRoomBtn.getController("button").selectedIndex?this._changeRoomBtn.getController("button").selectedIndex=1:this._changeRoomBtn.getController("button").selectedIndex=0,0==this._changeRoomBtn.getController("button").selectedIndex?this.changeRoomInfoByOwner(!1):this.changeRoomInfoByOwner(!0)},e.prototype.prepareGame=function(){p.default.log("\u5f00\u59cb\u51c6\u5907"),this.changeCustomPlayerStatus(!0)},e.prototype.prepareCancelGame=function(){p.default.log("\u53d6\u6d88\u51c6\u5907"),this.changeCustomPlayerStatus(!1)},e.prototype.changeCustomPlayerStatus=function(t){var e=t?1:0;l.default.player.updateCustomStatus(e)},e.prototype.changeCustomProperties=function(t){p.default.log("[\u6e38\u620f] \u6b63\u5728\u4fee\u6539\u623f\u95f4\u81ea\u5b9a\u4e49\u4fe1\u606f\u4e3a\uff1a",t),l.default.room.updateRoomProperties(t)},e.prototype.sendToClient=function(t){p.default.log("\u6b63\u5728\u53d1\u9001\u623f\u95f4\u6d88\u606f");var e={recvPlayerIdList:[],type:1,msg:t};l.default.room.sendToClient(e),l.default.room.onSendToClientFailed(function(t){p.default.log("\u53d1\u9001\u623f\u95f4\u6d88\u606f\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+t.code),c.default.show("\u6d88\u606f\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01")})},e.prototype.removePlayer=function(t){var e=this;l.default.room.removePlayer(t).then(function(){p.default.log("\u8e22\u4eba\u6210\u529f"),l.default.room.update().then(function(){e.initRoomView()})}).catch(function(t){p.default.log("\u8e22\u4eba\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+r.errorMessage(t))})},e.prototype.onDestroy=function(){this._view.dispose()},e.prototype.onDisable=function(){p.default.log("global.room:",l.default.room),l.default.room},e.prototype.chooseExitScreen=function(t){l.default.room.removeAllListeners(),this.addComponent(t),this.destroy(),fgui.GRoot.inst.closeAllWindows(),this._matchWaitView.stopTimer()},e.prototype.initRoomView=function(){var t=this;l.default.room&&l.default.room.update().then(function(){return t.setRoomView()}).catch(function(e){101103==e.code?t.chooseExitScreen(a.default):101101!=e.code&&101105!=e.code||t.chooseExitScreen(a.default),p.default.log("error:",r.errorMessage(e))})},e.prototype.leaveRoom=function(){var t=this;p.default.log("\u6b63\u5728\u9000\u51fa\u623f\u95f4"),l.default.client.leaveRoom().then(function(e){p.default.log("\u9000\u51fa\u623f\u95f4\u6210\u529f"),l.default.client=e,t.chooseExitScreen(a.default)}).catch(function(t){p.default.log("\u9000\u51fa\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+r.errorMessage(t))})},e.prototype.dismissRoom=function(){var t=this;p.default.log("\u6b63\u5728\u89e3\u6563\u623f\u95f4"),l.default.client.dismissRoom().then(function(){p.default.log("\u89e3\u6563\u623f\u95f4\u6210\u529f"),t.isExit||(t.isExit=!0,t.chooseExitScreen(a.default))}).catch(function(t){p.default.log("\u89e3\u6563\u623f\u95f4\u5931\u8d25\uff0c\u9519\u8bef\u7801\uff1a"+r.errorMessage(t))})},e.prototype.onRecvFromServer=function(t){if(this.loadingWindow&&this.loadingWindow.hide(),p.default.log("recvFromServerInfo:",t),t)try{var e=h.GameUtils.decompressAndParseJson(t.msg);p.default.log("[\u670d\u52a1\u5668\u54cd\u5e94\u7ed3\u679c]\u89e3\u6790\u540e\u6570\u636e:",e);var i=JSON.parse(e);l.default.gameVoData=i,l.default.gameVoData.nextUserId=i.roomInfo.currentUserId,l.default.roomInfo=i.roomInfo,i.cmd==g.ResponseCmdEnum.start&&this.chooseExitScreen(u.default)}catch(n){p.default.log("\u64cd\u4f5c\u5f02\u5e38\uff1a"+n)}finally{p.default.log("\u6267\u884cfinally")}else p.default.log("[\u670d\u52a1\u5668\u54cd\u5e94\u7ed3\u679c]0:",JSON.stringify(event))},e.prototype.listenerRoomNetworkStatus=function(){},e.prototype.setRoomView=function(){var t=this;p.default.log("===setRoomView===");var e=l.default.room;e.ownerId===l.default.playerId?(p.default.log("\u623f\u4e3b"),this._mainController.selectedIndex=0,2==l.default.game_mode.roomType?this._changeRoomBtn.visible=!0:this._changeRoomBtn.visible=!1):(p.default.log("\u975e\u623f\u4e3b"),this._changeRoomBtn.visible=!1);var i=e.players.length;this._player_count_Label.text="\u73a9\u5bb6\uff1a"+i+"/4",this._playerList=[];var n=-1,o=this._historyPlayerList;if(e.players.forEach(function(i,s){i.playerId===e.ownerId?n=s:t._playerList.push(i),null==t._historyPlayerList.find(function(t){return t.playerId===i.playerId})&&(p.default.log("\u65b0\u589e\u73a9\u5bb6\u5230\u5386\u53f2\u96c6\u5408\u4e2d\uff1a",JSON.parse(i.customPlayerProperties)),o.push(i))}),this._playerList.unshift(e.players[n]),this._historyPlayerList=o,p.default.log("\u5386\u53f2\u73a9\u5bb6\uff1a",this._historyPlayerList),this.setFirstView(i),this.setRoleProfile(),2!=l.default.game_mode.roomType){var s=this._matchController.selectedIndex;if(i>1){if(1==s)return;this._matchController.selectedIndex=1,this._matchWaitView.stopTimer()}else{if(0==s)return;this._matchController.selectedIndex=0,this._matchWaitView.startCountTime()}}},e.prototype.setFirstView=function(t){switch(p.default.log("\u5f53\u524d\u73a9\u5bb6\u6570\u91cf\uff1a"+t),t){case 1:this._role1.setRoleStatus(0),this._role2.setRoleStatus(3),this._role3.setRoleStatus(3),this._role4.setRoleStatus(3);break;case 2:this._role1.setRoleStatus(0),this._role2.setRoleStatus(0),this._role3.setRoleStatus(3),this._role4.setRoleStatus(3);break;case 3:this._role1.setRoleStatus(0),this._role2.setRoleStatus(0),this._role3.setRoleStatus(0),this._role4.setRoleStatus(3);break;case 4:this._role1.setRoleStatus(0),this._role2.setRoleStatus(0),this._role3.setRoleStatus(0),this._role4.setRoleStatus(0)}},e.prototype.setRoleProfile=function(){for(var t,e,i,n,o=0;o<this._playerList.length;o++){var s=this._playerList[o],a=0;a=void 0===s.customPlayerStatus||null===s.customPlayerStatus?0:s.customPlayerStatus,l.default.room.ownerId==s.playerId?a=2:l.default.playerId===s.playerId&&(this._prepareBtn.visible=0==a,this._prepareUnBtn.visible=0!=a);var r=h.GameUtils.fetchCustomProfile(s.customPlayerProperties);0==o?this.changeRoleInfoView(this._role1,a,null!==(t=r.nickname)&&void 0!==t?t:"",r.faceUrl):1==o?this.changeRoleInfoView(this._role2,a,null!==(e=r.nickname)&&void 0!==e?e:"",r.faceUrl):2==o?this.changeRoleInfoView(this._role3,a,null!==(i=r.nickname)&&void 0!==i?i:"",r.faceUrl):3==o&&this.changeRoleInfoView(this._role4,a,null!==(n=r.nickname)&&void 0!==n?n:"",r.faceUrl)}},e.prototype.changeRoleInfoView=function(t,e,i,n){t.setRoleName(i),t.setRoleStatus(e),t.setRoleImage(n)},e.prototype.fetchStartGame=function(){var t=this,e=h.GameUtils.handleUserIdList(this._playerList);this.loadingWindow.show(),f.GameServerUtil.fetchServiceStart(e,l.default.room.roomId).then(function(e){var i=h.GameUtils.handleUserInfoList(t._playerList),n=l.default.game_mode.roomType;f.GameServerUtil.fetchGameStart(i,n,e,function(e){0==e&&(t.sendToClient("2"),t.loadingWindow.hide(),c.default.show("\u670d\u52a1\u51fa\u5c0f\u5dee,\u8bf7\u91cd\u8bd5\uff5e"))})}).catch(function(e){t.sendToClient("2"),c.default.show(e||"\u670d\u52a1\u51fa\u5c0f\u5dee,\u8bf7\u91cd\u8bd5\uff5e"),t.loadingWindow.hide()}),t.sendToClient("1")},s([C],e)}(cc.Component));i.default=b;var v=function(t){function e(){var e=t.call(this)||this;return e.onSubmitResult=null,e}return o(e,t),e.prototype.onConstruct=function(){this._itemController=this.getController("playerItem"),this._child_name=this.getChild("n12").asLabel;var t=this.getChild("n13").asCom;this._child_user_loader=t.getChild("n0").asLoader,this._removeButton=this.getChild("remove").asButton,this._removeButton.onClick(this.onRemoveButtonClick,this)},e.prototype.setRoleStatus=function(t){this._itemController.selectedIndex=t,this._child_name.titleColor=cc.color().fromHEX("#FFFFFF"),3==t&&(this._child_name.text="\u7b49\u5f85\u73a9\u5bb6",this._child_name.titleColor=cc.color().fromHEX("#ADEBF5"))},e.prototype.setRoleName=function(t){this._child_name.text=t},e.prototype.setRoleImage=function(t){this._child_user_loader.url=t},e.prototype.onRemoveButtonClick=function(){this.onSubmitResult&&this.onSubmitResult()},e}(fgui.GComponent);i.TeamGameRoleChildView=v;var w=function(t){function e(){var e=t.call(this)||this;return e._lastTime=0,e}return o(e,t),e.prototype.onConstruct=function(){this._timeLab=this.getChild("n2").asLabel},e.prototype.setTime=function(t){this._timeLab.text=t},e.prototype.startCountTime=function(){p.default.log("\u5f00\u542f\u8ba1\u65f6\u5668"),this._lastTime||(this._lastTime=0,this.countTime())},e.prototype.countTime=function(){this._lastTime++;var t=Math.floor(this._lastTime/60),e=this._lastTime%60,i=t>9?""+t:"0"+t,n=e>9?""+e:"0"+e;this._timeLab.text=i+":"+n+"s";var o=this;o.timer=setTimeout(function(){o.countTime()},1e3)},e.prototype.stopTimer=function(){this._lastTime=0,this._timeLab.text="00:00s",clearTimeout(this.timer)},e}(fgui.GComponent);i.TeamGameWaitTimeChildView=w,cc._RF.pop()},{"../../Common/GameServerUtil":"GameServerUtil","../../Common/GameUtils":"GameUtils","../../Common/Global":"Global","../../Common/LogUtil":"LogUtil","../../Common/Util":"Util","../../Constant/ResponseCmdEnum":"ResponseCmdEnum","../Common/GameHudView":"GameHudView","../Common/Toast":"Toast","../Windows/GameInviteAppView":"GameInviteAppView","../Windows/GameLoadingWindow":"GameLoadingWindow","./Game":"Game","./Main":"Main"}],TextureRenderUtils:[function(t,e,i){"use strict";cc._RF.push(e,"83f4bjWNIJBSoz9K36jMCPD","TextureRenderUtils");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.init=function(){var t=new cc.RenderTexture;this._camera=cc.director.getScene().getComponentInChildren(cc.Camera),t.initWithSize(cc.winSize.width,cc.winSize.height,cc.game._renderContext.STENCIL_INDEX8),this._camera.targetTexture=t,this._texture=t},e.prototype.createImg=function(){var t=this._canvas.toDataURL("image/png"),e=document.createElement("img");return e.src=t,e},e.prototype.createCanvas=function(){var t=this._texture.width,e=this._texture.height;this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=t,this._canvas.height=e);var i=this._canvas.getContext("2d");this._camera.render();for(var n=this._texture.readPixels(),o=4*t,s=0;s<e;s++){for(var a=e-1-s,r=i.createImageData(t,1),l=a*t*4,u=0;u<o;u++)r.data[u]=n[l+u];i.putImageData(r,0,s)}return this._canvas},e.prototype.showImage=function(t){var e=new cc.Texture2D;e.initWithElement(t);var i=new cc.SpriteFrame;i.setTexture(e);var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=i,n.zIndex=cc.macro.MAX_ZINDEX,n.parent=cc.director.getScene();var o=cc.winSize.width,s=cc.winSize.height;n.x=o/2,n.y=s/2,n.on(cc.Node.EventType.TOUCH_START,function(){n.parent=null,n.destroy()}),this.captureAction(n,o,s)},e.prototype.captureAction=function(t,e,i){var n=cc.scaleTo(1,.3),o=cc.v2(e-e/6,i/4),s=cc.moveTo(1,o),a=cc.spawn(n,s);t.runAction(a);var r=cc.blink(.1,1);this.node.runAction(r)},e.prototype.clearCanvas=function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)},s([r],e)}(cc.Component));i.default=l,cc._RF.pop()},{}],TimeUtil:[function(t,e,i){"use strict";cc._RF.push(e,"e1579zstC9BPZWrukyq+FR5","TimeUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.getTimestamp=function(){return(new Date).getTime()},t.getDate=function(){return(new Date).toLocaleDateString()},t.getTargetTimestamp=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Date((new Date).toLocaleDateString()).getTime();return new Date(n+1e3*(3600*t+60*e+i)).getTime()},t.msToHMS=function(t,e,i){void 0===e&&(e=":"),void 0===i&&(i=!0);var n=Math.floor(t/36e5),o=Math.floor((t-36e5*n)/6e4),s=Math.floor((t-36e5*n-6e4*o)/1e3);return(0!==n||i?n.toString().padStart(2,"0")+":":"")+o.toString().padStart(2,"0")+e+s.toString().padStart(2,"0")},t}();i.default=n,cc._RF.pop()},{}],Toast:[function(t,e,i){"use strict";var n;cc._RF.push(e,"89eb3uOZhVL2YsGCD6GfpF4","Toast"),Object.defineProperty(i,"__esModule",{value:!0}),i.Toast=i.PostionStyle=void 0,function(t){t[t.Bottom=0]="Bottom",t[t.Center=1]="Center"}(n=i.PostionStyle||(i.PostionStyle={}));var o=function(){function t(){}return t.prototype.show=function(t,e,i){void 0===e&&(e=1.5),void 0===i&&(i=n.Bottom);var o=fairygui.UIPackage.createObject("Basic","Toast").asCom,s=o.getController("Location");i==n.Center?(s.selectedIndex=1,o.getChild("n4").asLabel.text=t):(s.selectedIndex=0,o.getChild("n2").asLabel.text=t),fgui.GRoot.inst.showTooltipsWin(o),e>0&&setTimeout(function(){fgui.GRoot.inst.hideTooltips()},1e3*e)},t.prototype.hide=function(){fgui.GRoot.inst.hideTooltips()},t}();i.Toast=o,i.default=new o,cc._RF.pop()},{}],TrusteeshipEnum:[function(t,e,i){"use strict";cc._RF.push(e,"18ad5cq0LdAUp0OhZoavVpb","TrusteeshipEnum"),Object.defineProperty(i,"__esModule",{value:!0}),i.TrusteeshipEnum=void 0,function(t){t[t.dice=1]="dice",t[t.selectChancel=2]="selectChancel",t[t.chancelResult=3]="chancelResult",t[t.future=4]="future",t[t.marketNew=5]="marketNew",t[t.skillBuy=6]="skillBuy",t[t.children=7]="children",t[t.lifeIncidentBuy=8]="lifeIncidentBuy",t[t.raises=9]="raises",t[t.loseCause=10]="loseCause",t[t.auction=11]="auction"}(i.TrusteeshipEnum||(i.TrusteeshipEnum={})),cc._RF.pop()},{}],TweenUtil:[function(t,e,i){"use strict";cc._RF.push(e,"47fa5/I5wxOzp0tnT97b5Gm","TweenUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.flip=function(t,e,i,n){return new Promise(function(o){var s=cc.tween,a=e/2,r=t.scale,l=r>0?20:-20;s(t).parallel(s().to(a,{scaleX:0},{easing:"quadIn"}),s().to(a,{skewY:-l},{easing:"quadOut"})).call(function(){i&&i()}).parallel(s().to(a,{scaleX:-r},{easing:"quadOut"}),s().to(a,{skewY:0},{easing:"quadIn"})).call(function(){n&&n(),o()}).start()})},t}();i.default=n,cc._RF.pop()},{}],UserInfo:[function(t,e,i){"use strict";cc._RF.push(e,"fc947vRG9dE+qe/LtS3KXcr","UserInfo"),Object.defineProperty(i,"__esModule",{value:!0}),i.UserInfo=void 0;i.UserInfo=function(){this.roleGrade=1,this.status=0,this.stepNumber=0,this.incomeTimePart=0,this.expendBankInterest=0,this.expendChildren=0,this.expendChildrenCount=0,this.assetStockList=[],this.assetFuturesList=[],this.assetHouseList=[],this.assetEquityList=[],this.assetCompanyList=[],this.assetArticleList=[],this.skillList=[],this.loanBank=0,this.loanCreditCard=0,this.accordIncome=0,this.passiveIncome=0,this.totalIncome=0,this.totalExpend=0,this.mayLoan=0,this.cashFlow=0,this.libertyRate=0,this.rankIndex=0,this.financeGrade=0},cc._RF.pop()},{}],Util:[function(t,e,i){"use strict";cc._RF.push(e,"2cfb5ri7wtBRLSfcrLot+on","Util");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var s=arguments[e],a=0,r=s.length;a<r;a++,o++)n[o]=s[a];return n};Object.defineProperty(i,"__esModule",{value:!0}),i.getTeamMatchParams=i.getPlayerMatchParams=i.mockTeamNumber=i.TimerUtil=i.userGradeTransformTo=i.destroyBreathAction=i.createBreathAction=i.extend=i.strfmt=i.gen_handler=i.handler=i.openLink=i.appendLog=i.setBroadcastCallbacks=i.errorMessage=i.isInited=void 0;var o=t("./Global"),s=t("../Config/Config"),a=t("./LogUtil");function r(t){return cc.log(t)}i.isInited=function(){return!!o.default.playerId},i.errorMessage=function(t){return t&&t.code&&t.message?":"+t.code+" | "+t.message:""},i.setBroadcastCallbacks=function(t,e,i){if(t){var n={onJoin:function(){return function(){return null}},onLeaveRoom:function(){return function(){return null}},onChangeRoom:function(){return function(){return null}},onDismissRoom:function(){return function(){return null}},onStartFrameSync:function(){return function(){return null}},onStopFrameSync:function(){return function(){return null}},onRecvFrame:function(){},onChangeCustomPlayerStatus:function(){return function(){return null}},onRemovePlayer:function(){return function(){return null}},onRecvFromClient:function(){return function(){return null}},onSendToClientFailed:function(){return function(){return null}},onRecvFromGameSvr:function(){return function(){return null}},onDisconnect:function(){return function(){return null}},onConnect:function(){return function(){return null}},onUpdateCustomProperties:function(){return function(){return null}}};Object.keys(n).forEach(function(o){var s=i[o]?i[o].bind(e):n[o];t[o]=s})}},i.appendLog=r,i.openLink=function(t,e){return"undefined"==typeof window?r("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):"function"!=typeof window.open?r("\u65e0\u6cd5\u6253\u5f00\u94fe\u63a5"):void window.open(t,e&&"_blank")};var l=[],u=function(){function t(){}return t.prototype.init=function(t,e){void 0===e&&(e=null);for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.cb=t,this.host=e,this.args=i},t.prototype.exec=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.cb.apply(this.host,this.args.concat(t))},t}();i.handler=u,i.gen_handler=function(t,e){void 0===e&&(e=null);for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=l.length<0?l.pop():new u;return s.init.apply(s,n([t,e],i)),s},i.strfmt=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e[i]||t})},i.extend=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var n=0;n<e.length;n+=1){var o=e[n];for(var s in o)o.hasOwnProperty(s)&&(t[s]=o[s])}return t},i.createBreathAction=function(t,e,i){void 0===e&&(e=.9),void 0===i&&(i=1.1);var n=cc.repeatForever(cc.sequence(cc.scaleTo(.6,i),cc.scaleTo(.6,e)));t.runAction(n)},i.destroyBreathAction=function(t){t.stopAllActions()},i.userGradeTransformTo=function(t){var e=null;switch(t){case 0:e="Lv0";break;case 1:e="Lv1";break;case 2:e="Lv2";break;case 3:e="Lv3";break;case 4:e="Lv4";break;case 5:e="Lv5";break;case 6:e="Lv6";break;case 7:e="Lv7";break;default:e="Lv0"}return e};var c=function(){function t(){this.timer=void 0}return Object.defineProperty(t,"instance",{get:function(){return this._instance?a.default.log("lazy loading singleton has created"):this._instance=new t,this._instance},enumerable:!1,configurable:!0}),t.prototype.start=function(t,e,i){var n=this,o=t;n.timer&&(a.default.log("\u9500\u6bc1\u5b9a\u65f6\u5668"),n.stop()),this.timer=setInterval(function(){if(--o<=0)return n.stop(),void(i&&i());e&&e(o)},1e3)},t.prototype.stop=function(){a.default.log("timer:",this.timer),this.timer&&clearInterval(this.timer)},t}();function h(){return Math.random()<.5?1:11}i.TimerUtil=c,i.mockTeamNumber=h,i.getPlayerMatchParams=function(){return s.default.asymmetric?{level:3,def:1}:{level:2}},i.getTeamMatchParams=function(){return s.default.asymmetric?{matchParams:{teamNumber:h()}}:null},cc._RF.pop()},{"../Config/Config":"Config","./Global":"Global","./LogUtil":"LogUtil"}],WeChatModule:[function(t,e,i){"use strict";cc._RF.push(e,"91505BnZNtNEJMC4XwNsAQB","WeChatModule");var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),s=this&&this.__decorate||function(t,e,i,n){var o,s=arguments.length,a=s<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(a=(s<3?o(a):s>3?o(e,i,a):o(e,i))||a);return s>3&&a&&Object.defineProperty(e,i,a),a};Object.defineProperty(i,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return o(e,t),e.prototype.start=function(){},s([l(cc.Label)],e.prototype,"label",void 0),s([l],e.prototype,"text",void 0),s([r],e)}(cc.Component);i.default=u,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,e){"use strict";cc._RF.push(e,"d7278Y/VdxIXoC52AYo/O8c","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["Capture_to_native","DataUtil","GameData","GameResourceUtil","GameServerUtil","GameUtils","Global","Http","LogUtil","NativeServiceUtils","ScreenShotNode","StoreData","TextureRenderUtils","Util","Config","ChancelTypeConstant","RequestCmdEnum","ResponseCmdEnum","RoomEventConstant","TrusteeshipEnum","BackgroundAdapter","ContentAdapter","EventManager","InstanceEvent","LoaderManager","SceneNavigator","ActionData","BadNews","GoodNews","RequestBuy","Article","Company","Equity","Futures","House","Speculate","Stock","ArticleDto","CompanyDto","EquityDto","FuturesDto","HouseDto","SkillDto","StockDto","Episode","GameCacheInfo","GameFlow","GameRole","RoomInfo","UserInfo","Skill","AuctionObjectVo","AuctionVo","ChildrenVo","DiceVo","EpisodeVo","GameVo","LoseCauseVo","MarketVo","RaisesVo","RetrospectVo","SelectChancelVo","SkillVo","SpeculateBuyVo","ArrayUtil","AudioPlayer","BrowserUtil","DebugUtil","DeviceUtil","ImageUtil","MD5","MathUtil","Native","ObjectUtil","PromiseUtil","RegexUtil","StorageUtil","TimeUtil","TweenUtil","WeChatModule","AppEntry","GameActivityArea","GameHudView","GameIncident","GameKeyboard","GamePlayer","GameRoleItem","GameRule","GameTasks","GameTrusteeship","Toast","Game","Launch","LaunchMain","Main","Retrospect","RoleStore","TeamGame","GameBank","GameChatWindow","GameChooseModeWindow","GameIncidentsWindow","GameInviteAppView","GameLoadingWindow","GameOtherUserWindow","GameResultWindow","GameStatement","GameWindow","DialogMgr","HotUpdate","HotUpdateScene","use_v2.1-2.2.1_cc.Toggle_event"]);